{"remainingRequest":"D:\\Cailibuhong\\video2Graph\\MOOCChinaVis\\MOOC_ChinaVis\\sys\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Cailibuhong\\video2Graph\\MOOCChinaVis\\MOOC_ChinaVis\\sys\\src\\components\\ProblemContentPanel\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Cailibuhong\\video2Graph\\MOOCChinaVis\\MOOC_ChinaVis\\sys\\src\\components\\ProblemContentPanel\\index.vue","mtime":1687500933798},{"path":"D:\\Cailibuhong\\video2Graph\\MOOCChinaVis\\MOOC_ChinaVis\\sys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681618859467},{"path":"D:\\Cailibuhong\\video2Graph\\MOOCChinaVis\\MOOC_ChinaVis\\sys\\node_modules\\babel-loader\\lib\\index.js","mtime":1681618859957},{"path":"D:\\Cailibuhong\\video2Graph\\MOOCChinaVis\\MOOC_ChinaVis\\sys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681618859467},{"path":"D:\\Cailibuhong\\video2Graph\\MOOCChinaVis\\MOOC_ChinaVis\\sys\\node_modules\\vue-loader\\lib\\index.js","mtime":1681618860114}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgKiBhcyBkMyBmcm9tICdkMycNCmltcG9ydCB0b29scyBmcm9tICJAL3V0aWxzL3Rvb2xzLmpzIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBwcm9wczogW10sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHR5cGVSYWRpbzogImNlbGwgU3RhdGUiLA0KICAgICAgdHJlZURhdGE6IG51bGwsDQogICAgICB0b29sc1N0YXRlOiAnJywNCiAgICAgIHByb2JsZW1zRGF0YTpbXSwNCiAgICAgIHByb2JsZW1Db25jZXB0RGF0YTpbXSwNCiAgICAgIGNvbmNlcHRUcmVlOltdLA0KICAgICAgLy8gY29uZmlybVVybDogcmVxdWlyZSgiQC9hc3NldHMvaW1nL2NvbmZpcm0uc3ZnIiksDQogICAgICAvLyBjYW5jZWxVcmw6IHJlcXVpcmUoIkAvYXNzZXRzL2ltZy9jYW5jZWwuc3ZnIiksDQogICAgICAvLyB0b29sc0J1dHNVcmw6IHJlcXVpcmUoIkAvYXNzZXRzL2ltZy90b29sc0J1dHMucG5nIiksDQogICAgICAvLyBhZGROb2RlU29uVXJsOiByZXF1aXJlKCJAL2Fzc2V0cy9pbWcvYWRkTm9kZTEucG5nIiksDQogICAgICAvLyBhZGROb2RlUGVyVXJsOiByZXF1aXJlKCJAL2Fzc2V0cy9pbWcvYWRkTm9kZTIucG5nIiksDQogICAgICAvLyBhZGRMaW5rQmFzaWNVcmw6IHJlcXVpcmUoIkAvYXNzZXRzL2ltZy9hZGRMaW5rLnBuZyIpLA0KICAgICAgLy8gbmFtZWlucHV0OiAiUmFuZG9tIFZhcmlhYmxlcyIsDQogICAgICBuYW1laW5wdXQ6ICJGdW5kYW1lbnRhbCBHcmFwaHMiLA0KICAgICAgLy8gbmFtZWlucHV0OiAiVHJlZXMiLA0KICAgICAgbGVjdHVyZVN0eWxlVmFsdWU6IFswLCA4MF0sDQogICAgICB0YWJsZURhdGE6IFt7DQogICAgICAgIGtleTogJ1RpdGxlJywNCiAgICAgICAgdmFsdWU6ICcnLA0KICAgICAgfSx7DQogICAgICAgIGtleTogJ1R5cGUnLA0KICAgICAgICB2YWx1ZTogJycsDQogICAgICB9LCB7DQogICAgICAgIGtleTogJ0NvbnRlbnRUJywNCiAgICAgICAgdmFsdWU6ICcnLA0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICdDb250ZW50JywNCiAgICAgICAgdmFsdWU6ICcnLA0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICdJbnB1dFQnLA0KICAgICAgICB2YWx1ZTogJycsDQogICAgICB9LCB7DQogICAgICAgIGtleTogJ0lucHV0JywNCiAgICAgICAgdmFsdWU6ICcnLA0KICAgICAgfSx7DQogICAgICAgIGtleTogJ091dFQnLA0KICAgICAgICB2YWx1ZTogJycsDQogICAgICB9LHsNCiAgICAgICAga2V5OiAnT3V0JywNCiAgICAgICAgdmFsdWU6ICcnLA0KICAgICAgfQ0KICAgICAgXSwNCiAgICAgIA0KICAgICAgZ3JhcGhHVHJhbnNmb3JtSzogMSwNCiAgICAgIGdyYXBoR1RyYW5zZm9ybVg6IDAsDQogICAgICBncmFwaEdUcmFuc2Zvcm1ZOiAxMCwNCiAgICAgIGN1ckVudElkOiAiIiwNCiAgICAgIGluc2VydEVudElkOiAiIiwNCiAgICAgIGluc2VydFNvdXJjZUVudElkOiAiLTEiLA0KICAgICAgaW5zZXJ0VGFyZ2V0RW50SWQ6ICItMSIsDQogICAgICBzb25MaXN0OiBbXSwNCiAgICAgIG1pbkRJbXBvcnRhbmNlOiAwLA0KICAgICAgbWF4REltcG9ydGFuY2U6IDAsDQogICAgICBtaW5EUmVsZXZhbmNlOiAwLA0KICAgICAgbWF4RFJlbGV2YW5jZTogMCwNCiAgICAgIG1heEREdXJhdGlvbjogMCwNCiAgICAgIG1heFRvdGFsRHVyYXRpb246IDAsDQogICAgICBpbXBvcnRhbmNlTWluQ29sb3I6ICJyZ2IoMjAzLCAyMzAsIDIwOSkiLA0KICAgICAgaW1wb3J0YW5jZU1heENvbG9yOiAicmdiKDIyLCAxNDQsIDIwNykiLA0KICAgICAgdG90YWxEdXJhdGlvbjogMTAwMCwNCiAgICAgIGltcG9ydGFuY2VDb2xvcl9saW5lYXI6IG51bGwsDQogICAgICBpbXBvcnRhbmNlQ29tcHV0ZV9jb2xvcjogbnVsbCwNCiAgICAgIHJlbGV2YW5jZVNjYWxlX2xpbmVhcjogbnVsbCwNCiAgICAgIHRvdGFsRHVyYXRpb25TY2FsZV9saW5lYXI6IG51bGwsDQogICAgICBEaXZpc2lvbkRhdGFMaXN0OiBbXSwNCiAgICAgIHJvb3REaXZpc2lvbkRhdGFMaXN0OiBbXSwNCiAgICAgIGVudERpdmlzaW9uRGF0YUxpc3Q6IFtdLA0KICAgICAgY29sb3JNYXA6IHt9LA0KICAgICAgcm9vdENvbG9yTWFwOnt9LA0KICAgICAgdmlkZW9EdXJhdGlvbjogNTcwLA0KICAgICAgc2VsZWN0UmVjdElkOiAiIiwNCiAgICAgIHNlbGVjdFJlY3RDbGFzczogIiIsDQogICAgICB0b3BpY0xpbmVXaWR0aDogMTAwMCwNCiAgICAgIHRvcGljTGluZUhlaWdodDogMTAwMCwNCiAgICAgIG1vdmVMaW5lV2lkdGg6IDEwMDAsDQogICAgICBlbnRMaW5lV2lkdGg6IDEwMDAsDQogICAgICB0b3RhbFNvbkR1cmF0aW9uOiAwLA0KICAgICAgdHJlZUdUcmFuc2Zvcm1LOjEsDQogICAgICB0cmVlR1RyYW5zZm9ybVg6MTAsDQogICAgICB0cmVlR1RyYW5zZm9ybVk6MTAwLA0KICAgICAgbWFyZ2luOiB7IHRvcDogNSwgcmlnaHQ6IDUsIGJvdHRvbTogNSwgbGVmdDogNSB9LA0KICAgICAgLy8gbWNvbG9yOiBbDQogICAgICAvLyAgICJyZ2IoMjU1LDYwLDYwKSIsDQogICAgICAvLyAgICJyZ2IoMTU1LDIwLDEwMCkiLA0KICAgICAgLy8gICAicmdiKDI1NSw4MywyNTUpIiwNCiAgICAgIC8vICAgInJnYigyMDAsMTAwLDUwKSIsDQogICAgICAvLyAgICJyZ2IoMjM1LDEzNSwxNjIpIiwNCiAgICAgIC8vICAgInJnYigyMDAsMjAwLDEwMikiLA0KICAgICAgLy8gICAicmdiKDI1NSwxNzgsMTAxKSIsDQogICAgICAvLyAgICJyZ2IoNjMsMTUxLDEzNCkiLA0KICAgICAgLy8gICAicmdiKDgzLDE1NSwyNTUpIiwNCiAgICAgIC8vICAgInJnYig1MCwyMDAsMTIwKSIsDQogICAgICAvLyAgICJyZ2IoMiw1MCwyMDApIiwNCiAgICAgIC8vICAgInJnYigwLDEyMiwyNDQpIiwNCiAgICAgIC8vICAgInJnYigxNTAsMTIyLDI0NCkiLA0KICAgICAgLy8gICAicmdiKDE2OCwxNjgsMjU1KSIsDQogICAgICAvLyAgICJyZ2IoMjAwLDIwMCwyMDApIiwNCiAgICAgIC8vIF0sDQogICAgICBtY29sb3I6IFsNCiAgICAgICAgInJnYig5MSwgMTA3LCAyNTUpIiwNCiAgICAgICAgInJnYig2LCAyMTQsIDE2MCkiLA0KICAgICAgICAicmdiKDI1NSwgMTIwLCA5MCkiLA0KICAgICAgICAicmdiKDEyNSwgOTgsIDIxMSkiLA0KICAgICAgICAicmdiKDI1NSwgMTEzLCAyMTIpIiwNCiAgICAgICAgInJnYigxMTIsIDIxNCwgMjU1KSIsDQogICAgICAgICJyZ2IoMjU1LCAxNTksIDI4KSIsDQogICAgICAgICJyZ2IoMjU1LCA3NywgMTA5KSIsDQogICAgICBdLA0KICAgICAgbUxpZ2h0Y29sb3I6IFsNCiAgICAgICAgIiNmZjljOWMiLA0KICAgICAgICAiI2NjODhiMCIsDQogICAgICAgICIjZmZhOGZmIiwNCiAgICAgICAgIiNlM2IwOTciLA0KICAgICAgICAiI2Y0YzNkMCIsDQogICAgICAgICIjZjRmNGQwIiwNCiAgICAgICAgIiNmZmQ4YjEiLA0KICAgICAgICAiIzllY2FjMiIsDQogICAgICAgICIjYThjY2ZmIiwNCiAgICAgICAgIiM5N2UzYmEiLA0KICAgICAgICAiIzZmOGJlMCIsDQogICAgICAgICJyZ2IoMCwxMjIsMjQ0KSIsDQogICAgICAgICIjYjZhMmY3IiwNCiAgICAgICAgInJnYigxNjgsMTY4LDI1NSkiLA0KICAgICAgICAicmdiKDIwMCwyMDAsMjAwKSIsDQogICAgICBdLA0KICAgIH07DQogIH0sDQogIHdhdGNoOiB7DQogICAgdHlwZVJhZGlvKHZhbCkgew0KICAgIH0sDQogICAgbGVjdHVyZVN0eWxlVmFsdWUodmFsKXsNCiAgICAgIGNvbnNvbGUubG9nKHZhbCk7DQogICAgICBsZXQgbWlkID0gKHZhbFswXSt2YWxbMV0pLzI7DQogICAgICBkMy5zZWxlY3QoIiNwcm9jRGF0YSAuZWwtc2xpZGVyX19ydW53YXkiKQ0KICAgICAgLmF0dHIoInN0eWxlIiwiYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjZmY5YzljICIrbWlkKyIlLCM2ZjhiZTAgIittaWQrIiUpICFpbXBvcnRhbnQiKQ0KICAgIH0sDQogICAgdHlwZSh2YWwpIHsNCiAgICB9LA0KICAgIC8vIHNlbGVjdEVudCh2YWwpew0KICAgIC8vICAgY29uc29sZS5sb2codmFsKTsNCiAgICAvLyB9LA0KICAgIGN1ckVudElkKGN1ckVudElkKSB7DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgc2VsZWN0VHlwZSh2KSB7DQogICAgICAvLyBjb25zb2xlLmxvZyh2KQ0KICAgIH0sDQogICAgDQoNCiAgICBpUm93U3R5bGU6ZnVuY3Rpb24gKHtyb3csIHJvd0luZGV4fSkgew0KICAgICAgICByZXR1cm4gJ2hlaWdodDozNXB4JzsNCiAgICB9LA0KICAgIGlIZWFkZXJSb3dTdHlsZTpmdW5jdGlvbiAoe3Jvdywgcm93SW5kZXh9KSB7DQogICAgICAgIHJldHVybiAnaGVpZ2h0OjM1cHgnOw0KICAgIH0sDQogICAgaUNlbGxTdHlsZTpmdW5jdGlvbiAoe3JvdywgY29sdW1uLCByb3dJbmRleCwgY29sdW1uSW5kZXh9KSB7DQogICAgICAgIHJldHVybiAncGFkZGluZzoycHgnDQogICAgfSwNCiAgICBpSGVhZGVyQ2VsbFN0eWxlOmZ1bmN0aW9uICh7cm93LCBjb2x1bW4sIHJvd0luZGV4LCBjb2x1bW5JbmRleH0pIHsNCiAgICAgICAgcmV0dXJuICdwYWRkaW5nOjBweCcNCiAgICB9LA0KICAgIGRyYXdwcm9jRGF0YSgpIHsNCiAgICAgIGNvbnN0IF90aGlzID0gdGhpczsNCiAgICAgIGNvbnN0IG1hcmdpbiA9IF90aGlzLm1hcmdpbjsNCiAgICAgIGxldCB3aWR0aCA9IHRoaXMuJHJlZnMucHJvY0RhdGEub2Zmc2V0V2lkdGggLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodDsNCiAgICAgIGxldCBoZWlnaHQgPSB0aGlzLiRyZWZzLnByb2NEYXRhLm9mZnNldEhlaWdodCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tOw0KICAgICAgZDMuc2VsZWN0KCIjcHJvY0RhdGEiKS5zZWxlY3QoInN2ZyIpLnJlbW92ZSgpOw0KICAgICAgdmFyIHN2ZyA9IGQzLnNlbGVjdCgiI3Byb2NEYXRhIikuYXBwZW5kKCJzdmciKQ0KICAgICAgICAuYXR0cigiaWQiLCAicHJvY0VudCIpDQogICAgICAgIC5hdHRyKCJ3aWR0aCIsIHdpZHRoKQ0KICAgICAgICAuYXR0cigiaGVpZ2h0IiwgaGVpZ2h0KTsNCg0KICAgICAgICBsZXQgZ3JhcGhHVHJhbnNmb3JtWCA9IF90aGlzLmdyYXBoR1RyYW5zZm9ybVg7DQogICAgICBsZXQgZ3JhcGhHVHJhbnNmb3JtWSA9IF90aGlzLmdyYXBoR1RyYW5zZm9ybVk7DQogICAgICBsZXQgZ3JhcGhHVHJhbnNmb3JtSyA9IF90aGlzLmdyYXBoR1RyYW5zZm9ybUs7DQogICAgICANCiAgICAgIGxldCBzdHggPSAwOw0KICAgICAgbGV0IHN0eSA9IDA7DQogICAgICBsZXQgc3RrID0gMTsNCiAgICAgIGxldCBlbnRHID0gc3ZnLmFwcGVuZCgiZyIpLmF0dHIoImlkIiwgImVudEciKS5hdHRyKCJ3aWR0aCIsIHdpZHRoKS5hdHRyKCJoZWlnaHQiLCBoZWlnaHQpOw0KICAgICAgbGV0IHNvbkcgPSBzdmcuYXBwZW5kKCJnIikuYXR0cigiaWQiLCAic29uRyIpLmF0dHIoIndpZHRoIiwgd2lkdGgpLmF0dHIoImhlaWdodCIsIGhlaWdodCkuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgxLDMyMCkiKTsNCiAgICAgICAgdmFyIGdyYXBoWm9vbSA9IGQzLnpvb20oKQ0KICAgICAgICAuc2NhbGVFeHRlbnQoWzAsIDEwMF0pDQogICAgICAgIC5vbigic3RhcnQiLCAoZSkgPT4gew0KICAgICAgICAgIHN0eSA9IGUudHJhbnNmb3JtLnk7DQogICAgICAgICAgc3R4ID0gZS50cmFuc2Zvcm0ueDsNCiAgICAgICAgICBzdGsgPSBlLnRyYW5zZm9ybS5rOw0KICAgICAgICB9KQ0KICAgICAgICAub24oJ3pvb20nLCAoZSkgPT4gew0KICAgICAgICAgIGdyYXBoR1RyYW5zZm9ybVggPSBfdGhpcy5ncmFwaEdUcmFuc2Zvcm1YIC8vKyBlLnRyYW5zZm9ybS54IC0gc3R4Ow0KICAgICAgICAgIGdyYXBoR1RyYW5zZm9ybVkgPSBfdGhpcy5ncmFwaEdUcmFuc2Zvcm1ZICsgZS50cmFuc2Zvcm0ueSAtIHN0eTsNCiAgICAgICAgICBncmFwaEdUcmFuc2Zvcm1LID0gX3RoaXMuZ3JhcGhHVHJhbnNmb3JtSyAvLysgZS50cmFuc2Zvcm0uayAtIHN0azsNCiAgICAgICAgICBlbnRHLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIChncmFwaEdUcmFuc2Zvcm1YKSArICcsJyArIChncmFwaEdUcmFuc2Zvcm1ZKSArICcpIHNjYWxlKCcgKyAoZ3JhcGhHVHJhbnNmb3JtSykgKyAnKScpDQogICAgICAgIH0pDQogICAgICAgIC5vbignZW5kJywgKGUpID0+IHsNCiAgICAgICAgICBfdGhpcy5ncmFwaEdUcmFuc2Zvcm1YID0gZ3JhcGhHVHJhbnNmb3JtWDsNCiAgICAgICAgICBfdGhpcy5ncmFwaEdUcmFuc2Zvcm1ZID0gZ3JhcGhHVHJhbnNmb3JtWTsNCiAgICAgICAgICBfdGhpcy5ncmFwaEdUcmFuc2Zvcm1LID0gZ3JhcGhHVHJhbnNmb3JtSzsNCiAgICAgICAgICBlbnRHLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIChncmFwaEdUcmFuc2Zvcm1YKSArICcsJyArIChncmFwaEdUcmFuc2Zvcm1ZKSArICcpIHNjYWxlKCcgKyAoZ3JhcGhHVHJhbnNmb3JtSykgKyAnKScpDQogICAgICAgIH0pOw0KDQogICAgICBzdmcuY2FsbChncmFwaFpvb20pOw0KICAgICAgLy8gX3RoaXMuZW50RyA9IGVudEc7DQogICAgICAvLyBfdGhpcy5zb25HID0gc29uRzsNCiAgICAgIF90aGlzLmRyYXdRdWVzdGlvblN1cmZhY2UoZW50Ryk7DQogICAgICAvLyBfdGhpcy5kcmF3U29uTGluZShfdGhpcy5kYXRhWzFdKTsNCiAgICB9LA0KICAgIGRyYXdTb25MaW5lKGRhdGEpIHsNCiAgICAgIGNvbnN0IF90aGlzID0gdGhpczsNCiAgICAgIGxldCBwc3ZnID0gZDMuc2VsZWN0KCIjc29uRyIpOw0KICAgICAgbGV0IHcgPSBwc3ZnLmF0dHIoIndpZHRoIikgLSAxOw0KICAgICAgbGV0IGggPSA0MDsNCiAgICAgIHBzdmcucmVtb3ZlKCk7DQogICAgICBsZXQgc3ZnID0gZDMuc2VsZWN0KCIjcHJvY0VudCIpLmFwcGVuZCgiZyIpLmF0dHIoImlkIiwgInNvbkciKS5hdHRyKCJ3aWR0aCIsIHcgKyAxKS5hdHRyKCJoZWlnaHQiLCBoICsgMikuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgxLDMyMCkiKTsNCiAgICAgIGxldCBjb2xvcl9saW5lYXIgPSBfdGhpcy5pbXBvcnRhbmNlQ29sb3JfbGluZWFyOw0KICAgICAgbGV0IGNvbXB1dGVfY29sb3IgPSBfdGhpcy5pbXBvcnRhbmNlQ29tcHV0ZV9jb2xvcjsNCiAgICAgIGxldCBvRGF0YSA9IF90aGlzLmRhdGE7DQogICAgICBfdGhpcy5lbnRMaW5lV2lkdGggPSB3Ow0KICAgICAgLy8gaWYgKHNvbkxpc3QubGVuZ3RoID4gMCkgew0KICAgICAgc3ZnLnNlbGVjdEFsbCgpLnJlbW92ZSgpOw0KICAgICAgc3ZnLmFwcGVuZCgibGluZSIpDQogICAgICAgIC5hdHRyKCJ4MSIsIDApDQogICAgICAgIC5hdHRyKCJ5MSIsIGggLyAyKQ0KICAgICAgICAuYXR0cigieDIiLCB3KQ0KICAgICAgICAuYXR0cigieTIiLCBoIC8gMikNCiAgICAgICAgLmF0dHIoInN0cm9rZSIsICJyZ2IoMjAwLDIwMCwyMDApIikNCiAgICAgICAgLmF0dHIoInN0cm9rZS13aWR0aCIsICI1cHgiKTsNCg0KICAgICAgbGV0IHRvdGFsU29uRHVyYXRpb24gPSAwOw0KICAgICAgbGV0IGRhdGFJbmRleCA9IG9EYXRhLm1hcChpdGVtID0+IGl0ZW0uaWQpLmluZGV4T2YoZGF0YVsnaWQnXSk7DQogICAgICBsZXQgc3RhcnRJbmRleCA9ICgoZGF0YUluZGV4IC0gMikgPiAwKSA/IChkYXRhSW5kZXggLSAyKSA6ICgwKTsNCiAgICAgIGxldCBlbmRJbmRleCA9ICgoZGF0YUluZGV4ICsgMSkgPCBvRGF0YS5sZW5ndGgpID8gKGRhdGFJbmRleCArIDIpIDogKG9EYXRhLmxlbmd0aCAtIDEpOw0KDQogICAgICBsZXQgZGF0YUxpID0gdG9vbHMuZGVlcENsb25lKG9EYXRhKS5zcGxpY2Uoc3RhcnRJbmRleCwgZW5kSW5kZXggLSBzdGFydEluZGV4ICsgMSk7DQogICAgICAvLyBsZXQgZGF0YSA9IHNvbkxpc3Q7DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFMaS5sZW5ndGg7IGkrKykgew0KICAgICAgICBsZXQgY3VyRW50ID0gb0RhdGEuZmluZChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZFsnaWQnXSA9PSBkYXRhTGlbaV1bJ2lkJ10gfSk7DQogICAgICAgIGxldCB0aW1lID0gdG9vbHMudGltZTJzZWNvbmRzKGN1ckVudFsndGltZSddWzBdKTsNCiAgICAgICAgbGV0IGVuZFRpbWUgPSB0b29scy50aW1lMnNlY29uZHMoY3VyRW50Wyd0aW1lJ11bMV0pOw0KICAgICAgICB0b3RhbFNvbkR1cmF0aW9uICs9IGVuZFRpbWUgLSB0aW1lOw0KICAgICAgfQ0KICAgICAgX3RoaXMudG90YWxTb25EdXJhdGlvbiA9IHRvdGFsU29uRHVyYXRpb247DQogICAgICBsZXQgY3hMaW5lYXIgPSBkMy5zY2FsZUxpbmVhcihbMCwgdG90YWxTb25EdXJhdGlvbl0sIFswLCB3XSk7DQogICAgICBsZXQgRGl2aXNpb25EYXRhTGlzdCA9IFtdOw0KICAgICAgLy8gbGV0IGNvbG9ySW5kZXggPSAwOw0KICAgICAgbGV0IHByZXggPSAwOw0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhTGkubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgbGV0IGN1ckVudCA9IG9EYXRhLmZpbmQoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGRbJ2lkJ10gPT0gZGF0YUxpW2ldWydpZCddIH0pOw0KICAgICAgICBsZXQgdGVtcCA9IHRvb2xzLmRlZXBDbG9uZShjdXJFbnQpOw0KICAgICAgICBpZiAoRGl2aXNpb25EYXRhTGlzdC5sZW5ndGggIT0gMCkgew0KICAgICAgICAgIERpdmlzaW9uRGF0YUxpc3RbRGl2aXNpb25EYXRhTGlzdC5sZW5ndGggLSAxXVsnbmV4dElkJ10gPSB0ZW1wWydpZCddOw0KICAgICAgICAgIHRlbXBbJ3ByZUlkJ10gPSBEaXZpc2lvbkRhdGFMaXN0W0RpdmlzaW9uRGF0YUxpc3QubGVuZ3RoIC0gMV1bJ2lkJ107DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7IHRlbXBbJ3ByZUlkJ10gPSAiLTEiOyB9DQogICAgICAgIERpdmlzaW9uRGF0YUxpc3QucHVzaCh0ZW1wKTsNCiAgICAgICAgbGV0IHRpbWUgPSB0b29scy50aW1lMnNlY29uZHMoY3VyRW50Wyd0aW1lJ11bMF0pOw0KICAgICAgICBsZXQgZW5kVGltZSA9IHRvb2xzLnRpbWUyc2Vjb25kcyhjdXJFbnRbJ3RpbWUnXVsxXSk7DQogICAgICAgIGxldCBjdXJFbnREdXIgPSBlbmRUaW1lIC0gdGltZTsNCiAgICAgICAgbGV0IGN4ID0gcHJleDsNCiAgICAgICAgbGV0IGVuZHggPSBwcmV4ICsgY3hMaW5lYXIoY3VyRW50RHVyKTsNCiAgICAgICAgbGV0IGltcG9ydGFuY2VWYWx1ZSA9IGN1ckVudFsnYXR0cmlidXRlJ11bJ2ltcG9ydGFuY2UnXTsNCiAgICAgICAgbGV0IGVudENvbG9yID0gY29tcHV0ZV9jb2xvcihjb2xvcl9saW5lYXIoaW1wb3J0YW5jZVZhbHVlKSk7DQogICAgICAgIGlmIChpICE9IDApIHsNCiAgICAgICAgICBfdGhpcy5kcmF3UmVjdChzdmcsIGN4IC0gNSwgMCwgNSwgaCwgaCAvIDIsICJkaXZpc2lvbl8iICsgY3VyRW50WydpZCddLCAiZW50ZGl2aXNpb25MaW5lIiwgInJnYigyNTAsMjUwLDI1MCkiLCA1LCAnJywgMCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGRhdGFMaVtpXVsnaWQnXSA9PSBkYXRhWydpZCddKSBfdGhpcy5kcmF3UmVjdChzdmcsIGN4LCAwLCBlbmR4IC0gY3gsIGgsIGggLyAyLCAicHJvY0VudF8iICsgY3VyRW50WydpZCddLCAicHJvY0VudCIsIGVudENvbG9yLCAxLCAiYmxhY2siLCAxKS8vY29sb3JbX3RoaXMuY29sb3JNYXBbc29uWydpZCddXV0sIDUsIDAuMSkNCiAgICAgICAgZWxzZSBfdGhpcy5kcmF3UmVjdChzdmcsIGN4LCAwLCBlbmR4IC0gY3gsIGgsIGggLyAyLCAicHJvY0VudF8iICsgY3VyRW50WydpZCddLCAicHJvY0VudCIsIGVudENvbG9yLCAxLCAicmdiKDE1MCwxNTAsMTUwKSIsIDEpLy9jb2xvcltfdGhpcy5jb2xvck1hcFtzb25bJ2lkJ11dXSwgNSwgMC4xKQ0KICAgICAgICBwcmV4ID0gZW5keDsNCiAgICAgIH0NCiAgICAgIERpdmlzaW9uRGF0YUxpc3RbRGl2aXNpb25EYXRhTGlzdC5sZW5ndGggLSAxXVsnbmV4dElkJ10gPSAiLTEiOw0KICAgICAgX3RoaXMuZW50RGl2aXNpb25EYXRhTGlzdCA9IERpdmlzaW9uRGF0YUxpc3Q7DQogICAgfSwNCiAgICBkcmF3RW50aXR5T3JpKGRhdGEpIHsNCiAgICAgIGNvbnN0IF90aGlzID0gdGhpczsNCiAgICAgIGxldCBwc3ZnID0gZDMuc2VsZWN0KCIjZW50RyIpOw0KICAgICAgbGV0IHcgPSBwc3ZnLmF0dHIoIndpZHRoIik7DQogICAgICBsZXQgaCA9IHBzdmcuYXR0cigiaGVpZ2h0Iik7DQogICAgICBwc3ZnLnJlbW92ZSgpOw0KICAgICAgbGV0IHN2ZyA9IGQzLnNlbGVjdCgiI3Byb2NFbnQiKS5hcHBlbmQoImciKS5hdHRyKCJpZCIsICJlbnRHIikuYXR0cigid2lkdGgiLCB3KS5hdHRyKCJoZWlnaHQiLCBoKTsNCiAgICAgIGxldCBjb2xvcl9saW5lYXIgPSBfdGhpcy5pbXBvcnRhbmNlQ29sb3JfbGluZWFyOw0KICAgICAgbGV0IGNvbXB1dGVfY29sb3IgPSBfdGhpcy5pbXBvcnRhbmNlQ29tcHV0ZV9jb2xvcjsNCiAgICAgIGxldCB0b3RhbER1cmF0aW9uVmFsdWUgPSBkYXRhWyd0b3RhbER1cmF0aW9uJ107DQogICAgICBsZXQgclNjYWxlID0gX3RoaXMudG90YWxEdXJhdGlvblNjYWxlX2xpbmVhcjsNCiAgICAgIGxldCByID0gclNjYWxlKHRvdGFsRHVyYXRpb25WYWx1ZSk7DQogICAgICBsZXQgb0RhdGEgPSBfdGhpcy5kYXRhOw0KICAgICAgbGV0IHggPSBzdmcuYXR0cigid2lkdGgiKSAvIDI7DQogICAgICBsZXQgeSA9IDEyMDsNCiAgICAgIGxldCBpbXBvcnRhbmNlVmFsdWUgPSBkYXRhWydhdHRyaWJ1dGUnXVsnaW1wb3J0YW5jZSddOw0KICAgICAgbGV0IHJlbGV2YW5jZVZhbHVlID0gZGF0YVsnYXR0cmlidXRlJ11bJ3JlbGV2YW5jZSddOw0KICAgICAgc3ZnLnNlbGVjdEFsbCgpLnJlbW92ZSgpOw0KDQogICAgICBpZiAoZGF0YVsndHlwZSddID09ICcxJykgew0KICAgICAgICBsZXQgYXJlYSA9IHRvb2xzLmNhbGNUcmlhbmdsZSh4LCB5LCByKTsNCiAgICAgICAgX3RoaXMuZHJhd1RyaWFuZ2xlKHN2ZywgInJnYigyNTAsIDE5OSwgODgpIiwgYXJlYSwgInJnYigyNTAsIDE5OSwgODgpIik7DQogICAgICB9DQogICAgICBlbHNlIHsNCg0KICAgICAgICBsZXQgY3kgPSB5Ow0KICAgICAgICBsZXQgdG90YWxEdXJhdGlvbiA9IF90aGlzLnRvdGFsRHVyYXRpb247DQogICAgICAgIGxldCB0aW1lTGluZVNjYWxlX2xpbmVhciA9IGQzLnNjYWxlTGluZWFyKFswLCB0b3RhbER1cmF0aW9uXSwgW3ggLSByICogTWF0aC5zcXJ0KDMpIC8gMiwgeCArIHIgKiBNYXRoLnNxcnQoMykgLyAyXSkNCiAgICAgICAgbGV0IHRpbWVMaW5lSGlnaFNjYWxlX2xpbmVhciA9IGQzLnNjYWxlTGluZWFyKFswLCBfdGhpcy5tYXhERHVyYXRpb25dLCBbMCwgciAqICgxICsgTWF0aC5zcXJ0KDMpIC8gMildKQ0KICAgICAgICBsZXQgY2lyY2xlQ29sb3IgPSBjb21wdXRlX2NvbG9yKGNvbG9yX2xpbmVhcihpbXBvcnRhbmNlVmFsdWUpKTsNCiAgICAgICAgX3RoaXMuZHJhd0NpcmNsZShzdmcsIHgsIGN5LCByLCBjaXJjbGVDb2xvciwgZGF0YSwgMSwgImVudENpcmNsZSIsICJlbnRDaXJjbGVfIiArIGRhdGFbJ2lkJ10pOw0KDQogICAgICAgIHIgPSByICogTWF0aC5zcXJ0KDMpIC8gMjsNCiAgICAgICAgeSArPSByIC8gMjsNCiAgICAgICAgbGV0IHBhdGggPSBkMy5wYXRoKCk7DQoNCg0KICAgICAgICBwYXRoLm1vdmVUbyh4IC0gciwgeSk7DQogICAgICAgIGxldCBsaW5lTGkgPSBbZGF0YVsndGltZSddXTsNCiAgICAgICAgbGV0IGxpbmVQb2ludCA9IFt7ICdpZCc6IGRhdGFbJ2lkJ10sICd0aW1lJzogZGF0YVsndGltZSddLCAneCc6IDAsICd5JzogMCB9XTsNCiAgICAgICAgZm9yIChsZXQgc3JlbCBpbiBkYXRhWyJzaW1pbGFyaXR5UmVsIl0pIHsNCiAgICAgICAgICBsZXQgY2RhdGEgPSBvRGF0YS5maW5kKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkWydpZCddID09IGRhdGFbInNpbWlsYXJpdHlSZWwiXVtzcmVsXSB9KQ0KICAgICAgICAgIGxpbmVMaS5wdXNoKGNkYXRhWyd0aW1lJ10pDQogICAgICAgICAgbGluZVBvaW50LnB1c2goeyAnaWQnOiBjZGF0YVsnaWQnXSwgJ3RpbWUnOiBjZGF0YVsndGltZSddLCAneCc6IDAsICd5JzogMCB9KQ0KICAgICAgICB9DQogICAgICAgIGNvbnN0IHNvcnRtdCA9IChhLCBiKSA9PiB7DQogICAgICAgICAgcmV0dXJuIHRvb2xzLnRpbWUyc2Vjb25kcyhhWzBdKSAtIHRvb2xzLnRpbWUyc2Vjb25kcyhiWzBdKTsNCiAgICAgICAgfQ0KICAgICAgICBjb25zdCBzb3J0bHAgPSAoYSwgYikgPT4gew0KICAgICAgICAgIHJldHVybiB0b29scy50aW1lMnNlY29uZHMoYVsndGltZSddWzBdKSAtIHRvb2xzLnRpbWUyc2Vjb25kcyhiWyd0aW1lJ11bMF0pOw0KICAgICAgICB9DQogICAgICAgIGxpbmVMaSA9IGxpbmVMaS5zb3J0KHNvcnRtdCk7DQogICAgICAgIGxpbmVQb2ludCA9IGxpbmVQb2ludC5zb3J0KHNvcnRscCk7DQogICAgICAgIGxldCBsaW5lRGF0YSA9IFtbeCAtIHIsIHldXTsNCiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBsaW5lTGkubGVuZ3RoOyB0KyspIHsNCiAgICAgICAgICBsZXQgc3RhcnRUID0gbGluZUxpW3RdWzBdOw0KICAgICAgICAgIGxldCBlbmRUID0gbGluZUxpW3RdWzFdOw0KICAgICAgICAgIGxldCBzdGFydFMgPSB0b29scy50aW1lMnNlY29uZHMoc3RhcnRUKTsNCiAgICAgICAgICBsZXQgZW5kUyA9IHRvb2xzLnRpbWUyc2Vjb25kcyhlbmRUKTsNCiAgICAgICAgICBsZXQgZHVyYXRpb24gPSBlbmRTIC0gc3RhcnRTOw0KDQogICAgICAgICAgbGV0IHN0YXJ0eCA9IHRpbWVMaW5lU2NhbGVfbGluZWFyKChzdGFydFMgLSBkdXJhdGlvbiAqIDEwKSk7DQogICAgICAgICAgbGV0IGVuZHggPSB0aW1lTGluZVNjYWxlX2xpbmVhcigoZW5kUyArIGR1cmF0aW9uICogMTApKTsNCg0KICAgICAgICAgIGxldCBzdGFydHlmID0geSArIHRpbWVMaW5lSGlnaFNjYWxlX2xpbmVhcigoZHVyYXRpb24pKSAvIDg7DQogICAgICAgICAgbGV0IHN0YXJ0eWYxID0geSArIHRpbWVMaW5lSGlnaFNjYWxlX2xpbmVhcigoZHVyYXRpb24pKSAvIDg7DQogICAgICAgICAgbGV0IGVuZHlmID0geSArIHRpbWVMaW5lSGlnaFNjYWxlX2xpbmVhcigoZHVyYXRpb24pKSAvIDg7DQogICAgICAgICAgbGV0IGVuZHlmMSA9IHkgKyB0aW1lTGluZUhpZ2hTY2FsZV9saW5lYXIoKGR1cmF0aW9uKSkgLyA4Ow0KICAgICAgICAgIGxldCB5eiA9IHkgLSB0aW1lTGluZUhpZ2hTY2FsZV9saW5lYXIoKGR1cmF0aW9uKSk7DQogICAgICAgICAgbGV0IG1pZHggPSB0aW1lTGluZVNjYWxlX2xpbmVhcigoZW5kUyArIHN0YXJ0UykgLyAyKTsNCiAgICAgICAgICBsaW5lUG9pbnRbdF1bJ3gnXSA9IG1pZHg7DQogICAgICAgICAgbGluZVBvaW50W3RdWyd5J10gPSB5IC0gdGltZUxpbmVIaWdoU2NhbGVfbGluZWFyKGR1cmF0aW9uKSAvIDEuNzsNCiAgICAgICAgICBsZXQgeTEgPSB5Ow0KICAgICAgICAgIGlmIChzdGFydHggPCAobGluZURhdGFbbGluZURhdGEubGVuZ3RoIC0gMV1bMF0pKSB7DQogICAgICAgICAgICBpZiAodCA+IDApIHsNCiAgICAgICAgICAgICAgbGluZURhdGEuc3BsaWNlKGxpbmVEYXRhLmxlbmd0aCAtIDMsIDMpOw0KICAgICAgICAgICAgICBzdGFydHggPSAobGluZURhdGFbbGluZURhdGEubGVuZ3RoIC0gMV1bMF0gKyBtaWR4KSAvIDI7DQogICAgICAgICAgICAgIHkxID0gbGluZURhdGFbbGluZURhdGEubGVuZ3RoIC0gMV1bMV0gKyB0aW1lTGluZUhpZ2hTY2FsZV9saW5lYXIoKGR1cmF0aW9uKSkgLyAyOw0KICAgICAgICAgICAgICBzdGFydHlmID0gbGluZURhdGFbbGluZURhdGEubGVuZ3RoIC0gMV1bMV0gKyB0aW1lTGluZUhpZ2hTY2FsZV9saW5lYXIoKGR1cmF0aW9uKSkgLyAyOw0KICAgICAgICAgICAgICBzdGFydHlmMSA9IGxpbmVEYXRhW2xpbmVEYXRhLmxlbmd0aCAtIDFdWzFdICsgdGltZUxpbmVIaWdoU2NhbGVfbGluZWFyKChkdXJhdGlvbikpIC8gMjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgbGV0IHN0YXJ0eDEgPSBzdGFydHggKyAodGltZUxpbmVTY2FsZV9saW5lYXIoKHN0YXJ0UyArIGR1cmF0aW9uKSkgLSB0aW1lTGluZVNjYWxlX2xpbmVhcigoc3RhcnRTKSkpOw0KICAgICAgICAgIGxldCBlbmR4MSA9IGVuZHggLSAodGltZUxpbmVTY2FsZV9saW5lYXIoKHN0YXJ0UyArIGR1cmF0aW9uKSkgLSB0aW1lTGluZVNjYWxlX2xpbmVhcigoc3RhcnRTKSkpOw0KICAgICAgICAgIGxldCBzdGFydHgyID0gc3RhcnR4MSArICh0aW1lTGluZVNjYWxlX2xpbmVhcigoc3RhcnRTICsgZHVyYXRpb24pKSAtIHRpbWVMaW5lU2NhbGVfbGluZWFyKChzdGFydFMpKSk7DQogICAgICAgICAgbGV0IGVuZHgyID0gZW5keDEgLSAodGltZUxpbmVTY2FsZV9saW5lYXIoKHN0YXJ0UyArIGR1cmF0aW9uKSkgLSB0aW1lTGluZVNjYWxlX2xpbmVhcigoc3RhcnRTKSkpOw0KICAgICAgICAgIGlmIChlbmR4ID4gKHIgKyB4KSkgZW5keCA9IHIgKyB4Ow0KICAgICAgICAgIGlmIChzdGFydHgxIDwgKGxpbmVEYXRhW2xpbmVEYXRhLmxlbmd0aCAtIDFdWzBdKSkgc3RhcnR4MSA9IGxpbmVEYXRhW2xpbmVEYXRhLmxlbmd0aCAtIDFdWzBdOw0KICAgICAgICAgIGlmIChlbmR4MSA+IChyICsgeCkpIGVuZHgxID0gciArIHg7DQogICAgICAgICAgaWYgKHN0YXJ0eDIgPCAobGluZURhdGFbbGluZURhdGEubGVuZ3RoIC0gMV1bMF0pKSBzdGFydHgyID0gbGluZURhdGFbbGluZURhdGEubGVuZ3RoIC0gMV1bMF07DQogICAgICAgICAgaWYgKGVuZHgyID4gKHIgKyB4KSkgZW5keDIgPSByICsgeDsNCiAgICAgICAgICBsaW5lRGF0YS5wdXNoKFtzdGFydHgsIHkxXSwgW3N0YXJ0eDEsIHN0YXJ0eWYxXSwgW3N0YXJ0eDIsIHN0YXJ0eWZdLCBbbWlkeCwgeXpdLCBbZW5keDIsIGVuZHlmXSwgW2VuZHgxLCBlbmR5ZjFdLCBbZW5keCwgeV0pDQogICAgICAgIH0NCiAgICAgICAgbGluZURhdGEucHVzaChbeCArIHIsIHldKQ0KICAgICAgICBsZXQgY3VydmVfZ2VuZXJhdG9yID0gZDMubGluZSgpDQogICAgICAgICAgLngoKGQpID0+IGRbMF0pDQogICAgICAgICAgLnkoKGQpID0+IHsNCiAgICAgICAgICAgIGxldCBoID0gTWF0aC5zcXJ0KE1hdGgucG93KHIsIDIpIC0gTWF0aC5wb3coKGRbMF0gLSAoeCAtIHIpKSwgMikpOw0KICAgICAgICAgICAgaWYgKCh5IC0gZFsxXSkgPiAoaCArIHIgKiBNYXRoLnNxcnQoMykgLyAyKSkNCiAgICAgICAgICAgICAgcmV0dXJuIHkgLSAoaCArIHIgKiBNYXRoLnNxcnQoMykgLyAyKSArIDI7DQogICAgICAgICAgICByZXR1cm4gZFsxXTsNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC5jdXJ2ZShkMy5jdXJ2ZUJhc2lzKQ0KICAgICAgICBfdGhpcy5kcmF3VGltZUxpbmUoc3ZnLCBjdXJ2ZV9nZW5lcmF0b3IobGluZURhdGEpLCAid2hpdGUiLCAyLCAnMCcsICdzb25MaW5lICcsICdzb25MaW5lICcpOw0KDQoNCiAgICAgICAgZm9yIChsZXQgcCA9IDA7IHAgPCBsaW5lUG9pbnQubGVuZ3RoOyBwKyspIHsNCiAgICAgICAgICBfdGhpcy5kcmF3Q2lyY2xlKHN2ZywgbGluZVBvaW50W3BdWyd4J10sIGxpbmVQb2ludFtwXVsneSddLCA1LCAicmVkIiwgbGluZVBvaW50W3BdLCAwLCAibGluZVBvaW50IiwgImxpbmVQb2ludF8iICsgbGluZVBvaW50W3BdWydpZCddKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vICIxIjogInJnYigxNDUsIDIwNCwgMTE3KSIsDQogICAgICAgIC8vICAgIjIiOiAicmdiKDg0LCAxMTIsIDE5OCkiLA0KICAgICAgICAvLyAgICIzIjogInJnYigyMzgsIDEwMiwgMTAyKSIsDQogICAgICAgIGxldCB0eXBlQ29sb3IgPSB7DQogICAgICAgICAgIjEiOiAiI2ZmOWM5YyIsDQogICAgICAgICAgIjIiOiAiI2Y0ZjRkMCIsDQogICAgICAgICAgIjMiOiAiIzZmOGJlMCIsDQogICAgICAgIH07DQogICAgICAgIGxldCBkdXJhdGlvbiA9IHRvb2xzLnRpbWUyc2Vjb25kcyhkYXRhWyd0aW1lJ11bMF0pIC0gdG9vbHMudGltZTJzZWNvbmRzKGRhdGFbJ3RpbWUnXVsxXSk7DQogICAgICAgIGxldCB0eXBlRGF0YSA9IGRhdGFbJ2F0dHJpYnV0ZSddWydleHByZXNzaW9ucyddOw0KICAgICAgICBsZXQgc29uTGlzdCA9IGRhdGFbJ3NvbiddOw0KICAgICAgICBsZXQgdHlwZUFyY1NjYWxlX2xpbmVhciA9IGQzLnNjYWxlTGluZWFyKFswLCBkdXJhdGlvbl0sIFswLCBNYXRoLlBJICogMl0pOw0KDQogICAgICAgIHZhciB0eXBlU3RhcnRSID0gMC8vTWF0aC5QSS80Ow0KDQogICAgICAgIHZhciB0eXBlU3RlcFIgPSBNYXRoLlBJIC8gMTsNCg0KICAgICAgICBpZiAoc29uTGlzdC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgZm9yIChsZXQgaSBpbiB0eXBlRGF0YSkgew0KICAgICAgICAgICAgbGV0IGNvbG9yID0gdHlwZUNvbG9yW2ldOw0KICAgICAgICAgICAgbGV0IHR5cGVEdXJpdGlvbiA9IHR5cGVEYXRhW2ldOw0KICAgICAgICAgICAgbGV0IHRvdGFsVHlwZVNlY29uZHMgPSAwOw0KICAgICAgICAgICAgZm9yIChsZXQgZCBpbiB0eXBlRHVyaXRpb24pIHsNCiAgICAgICAgICAgICAgdG90YWxUeXBlU2Vjb25kcyArPSAodG9vbHMudGltZTJzZWNvbmRzKHR5cGVEdXJpdGlvbltkXVsxXSkgLSB0b29scy50aW1lMnNlY29uZHModHlwZUR1cml0aW9uW2RdWzBdKSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGxldCB0eXBlU3RlcFIgPSB0eXBlQXJjU2NhbGVfbGluZWFyKHRvdGFsVHlwZVNlY29uZHMpLy9NYXRoLlBJLzI7DQoNCiAgICAgICAgICAgIGxldCBlbmRBbmdsZXQgPSB0eXBlU3RhcnRSICsgMSAqIHR5cGVTdGVwUg0KICAgICAgICAgICAgdmFyIGRhdGFzZXQgPSB7IHN0YXJ0QW5nbGU6IHR5cGVTdGFydFIsIGVuZEFuZ2xlOiBlbmRBbmdsZXQgfTsgLy/liJvlu7rkuIDkuKrlvKfnlJ/miJDlmagNCiAgICAgICAgICAgIHR5cGVTdGFydFIgPSBlbmRBbmdsZXQ7DQogICAgICAgICAgICB2YXIgYXJjUGF0aCA9IGQzLmFyYygpDQogICAgICAgICAgICAgIC5pbm5lclJhZGl1cyhyICsgMTApDQogICAgICAgICAgICAgIC5vdXRlclJhZGl1cyhyICsgMjUpOw0KICAgICAgICAgICAgdmFyIHBhdGhBcmMgPSBhcmNQYXRoKGRhdGFzZXQpOw0KICAgICAgICAgICAgX3RoaXMuZHJhd0FyYyhzdmcsIHgsIHkgLSByIC8gMiwgcGF0aEFyYywgY29sb3IsIGNvbG9yLCAndHlwZSBmJyArIGRhdGFbJ2lkJ10gKyAiIHQiICsgaSk7DQogICAgICAgICAgfQ0KICAgICAgICAgIGxldCBzb25Ub3RhbCA9IDA7DQogICAgICAgICAgbGV0IHNvbk51bSA9IDANCiAgICAgICAgICBmb3IgKGxldCBzIGluIHNvbkxpc3QpIHsNCiAgICAgICAgICAgIGxldCBzb25EYXRhID0gb0RhdGEuZmluZChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZFsnaWQnXSA9PSBzb25MaXN0W3NdIH0pOw0KICAgICAgICAgICAgbGV0IHNvbkR1ciA9IHNvbkRhdGFbJ3RvdGFsRHVyYXRpb24nXTsNCiAgICAgICAgICAgIHNvblRvdGFsICs9IHNvbkR1cjsNCiAgICAgICAgICAgIHNvbk51bSArPSAxOw0KICAgICAgICAgIH0NCiAgICAgICAgICBsZXQgc2tpcEFyYyA9IE1hdGguUEkgLyAoc29uTnVtICsgMik7DQogICAgICAgICAgbGV0IHRpbWVTb25MaW5lYXIgPSBkMy5zY2FsZUxpbmVhcihbMCwgc29uVG90YWxdLCBbMCwgTWF0aC5QSSAqIDIgLSBza2lwQXJjICogc29uTnVtXSk7DQogICAgICAgICAgbGV0IHRpbWVTb25IZWlnaExpbmVhciA9IGQzLnNjYWxlTGluZWFyKFswLCBzb25Ub3RhbF0sIFs0MCwgNDBdKTsNCg0KICAgICAgICAgIGxldCB0aW1lU29uQ29sb3JfbGluZWFyID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIHNvblRvdGFsXSkucmFuZ2UoWzAsIDFdKTsNCiAgICAgICAgICBsZXQgdGltZVNvbkNvbXB1dGVfY29sb3IgPSBkMy5pbnRlcnBvbGF0ZSgid2hpdGUiLCBjaXJjbGVDb2xvcik7DQogICAgICAgICAgdmFyIHNvblN0YXJ0UiA9IDA7Ly8tTWF0aC5QSS8yOw0KICAgICAgICAgIGZvciAobGV0IHMgaW4gc29uTGlzdCkgew0KICAgICAgICAgICAgbGV0IHNvbkRhdGEgPSBvRGF0YS5maW5kKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkWydpZCddID09IHNvbkxpc3Rbc10gfSk7DQogICAgICAgICAgICBsZXQgc29uRHVyID0gc29uRGF0YVsndG90YWxEdXJhdGlvbiddOw0KDQogICAgICAgICAgICBsZXQgc29uU3RlcFIgPSB0aW1lU29uTGluZWFyKHNvbkR1cikvL01hdGguUEkvMjsNCg0KICAgICAgICAgICAgbGV0IGVuZEFuZ2xldCA9IHNvblN0YXJ0UiArIHNvblN0ZXBSOw0KICAgICAgICAgICAgdmFyIGRhdGFzZXQgPSB7IHN0YXJ0QW5nbGU6IHNvblN0YXJ0UiwgZW5kQW5nbGU6IGVuZEFuZ2xldCB9OyAvL+WIm+W7uuS4gOS4quW8p+eUn+aIkOWZqA0KICAgICAgICAgICAgc29uU3RhcnRSID0gZW5kQW5nbGV0Ow0KICAgICAgICAgICAgbGV0IGNvbG9yID0gJ2JsdWUnOw0KICAgICAgICAgICAgdmFyIGFyY1BhdGggPSBkMy5hcmMoKQ0KICAgICAgICAgICAgICAuaW5uZXJSYWRpdXMociArIDI4KQ0KICAgICAgICAgICAgICAub3V0ZXJSYWRpdXMociArIHRpbWVTb25IZWlnaExpbmVhcihzb25EdXIpKTsNCiAgICAgICAgICAgIHZhciBhcmNNaWRQYXRoID0gZDMuYXJjKCkNCiAgICAgICAgICAgICAgLmlubmVyUmFkaXVzKDApDQogICAgICAgICAgICAgIC5vdXRlclJhZGl1cyhyICsgMzIpOw0KICAgICAgICAgICAgdmFyIHBhdGhBcmMgPSBhcmNQYXRoKGRhdGFzZXQpOw0KDQogICAgICAgICAgICBlbmRBbmdsZXQgPSBzb25TdGFydFIgKyBza2lwQXJjOw0KICAgICAgICAgICAgdmFyIG1pZERhdGFzZXQgPSB7IHN0YXJ0QW5nbGU6IHNvblN0YXJ0UiwgZW5kQW5nbGU6IGVuZEFuZ2xldCB9OyAvL+WIm+W7uuS4gOS4quW8p+eUn+aIkOWZqA0KDQogICAgICAgICAgICBsZXQgamlhbnRvdVBhdGggPSBkMy5wYXRoKCk7DQogICAgICAgICAgICBqaWFudG91UGF0aC5hcmMoeCwgeSAtIHIgLyAyLCByICsgMzIsIHNvblN0YXJ0UiAtIE1hdGguUEkgLyAyLCBlbmRBbmdsZXQgLSBNYXRoLlBJIC8gMik7DQoNCiAgICAgICAgICAgIHNvblN0YXJ0UiArPSBza2lwQXJjOw0KICAgICAgICAgICAgdmFyIHBhdGhNaWRBcmMgPSBhcmNNaWRQYXRoKG1pZERhdGFzZXQpOw0KICAgICAgICAgICAgbGV0IHRpbWVTb25Db2xvciA9IGNvbXB1dGVfY29sb3IoY29sb3JfbGluZWFyKHNvbkRhdGFbJ2F0dHJpYnV0ZSddWydpbXBvcnRhbmNlJ10pKTsNCiAgICAgICAgICAgIF90aGlzLmRyYXdBcmMoc3ZnLCB4LCB5IC0gciAvIDIsIHBhdGhBcmMsIHRpbWVTb25Db2xvciwgdGltZVNvbkNvbG9yLCAnc29uIGYnICsgZGF0YVsnaWQnXSArICIgcyIgKyBzb25MaXN0W3NdLCAnMCcpOw0KICAgICAgICAgICAgaWYgKHMgIT0gc29uTGlzdC5sZW5ndGggLSAxKSB7DQogICAgICAgICAgICAgIF90aGlzLmRyYXdUaW1lTGluZShzdmcsIGppYW50b3VQYXRoLCAicmdiKDIwMCwyMDAsMjAwKSIsIDMsICc5LDUnLCAnbWlkQXJjICcsICdtaWRBcmMgJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgIH0NCg0KDQogICAgICB9DQogICAgICBsZXQgdHh0cyA9IF90aGlzLm5hbWVpbnB1dC5zcGxpdCgiICIpDQogICAgICBfdGhpcy5kcmF3VHh0KHN2ZywgeCAtIHIgLSAzMiwgeSArIHIgKyA1MCwgciAqIDIgKyA2NCwgdHh0cywgImdyZXkiKTsNCiAgICB9LA0KICAgIGRyYXdFbnRpdHkoZGF0YSkgew0KICAgICAgY29uc3QgX3RoaXMgPSB0aGlzOw0KICAgICAgbGV0IHBzdmcgPSBkMy5zZWxlY3QoIiNlbnRHIik7DQogICAgICBsZXQgdyA9IHBzdmcuYXR0cigid2lkdGgiKTsNCiAgICAgIGxldCBoID0gcHN2Zy5hdHRyKCJoZWlnaHQiKTsNCiAgICAgIHBzdmcucmVtb3ZlKCk7DQogICAgICBsZXQgc3ZnID0gZDMuc2VsZWN0KCIjcHJvY0VudCIpLmFwcGVuZCgiZyIpLmF0dHIoImlkIiwgImVudEciKS5hdHRyKCJ3aWR0aCIsIHcpLmF0dHIoImhlaWdodCIsIGgpOw0KICAgICAgbGV0IGNvbG9yX2xpbmVhciA9IF90aGlzLmltcG9ydGFuY2VDb2xvcl9saW5lYXI7DQogICAgICBsZXQgY29tcHV0ZV9jb2xvciA9IF90aGlzLmltcG9ydGFuY2VDb21wdXRlX2NvbG9yOw0KICAgICAgbGV0IHRvdGFsRHVyYXRpb25WYWx1ZSA9IGRhdGFbJ3RvdGFsRHVyYXRpb24nXTsNCiAgICAgIGxldCByU2NhbGUgPSBfdGhpcy50b3RhbER1cmF0aW9uU2NhbGVfbGluZWFyOw0KICAgICAgbGV0IHIgPSByU2NhbGUodG90YWxEdXJhdGlvblZhbHVlKTsNCiAgICAgIGxldCBvRGF0YSA9IF90aGlzLmRhdGE7DQogICAgICBsZXQgeCA9IHN2Zy5hdHRyKCJ3aWR0aCIpIC8gMjsNCiAgICAgIGxldCB5ID0gMTIwOw0KICAgICAgbGV0IGltcG9ydGFuY2VWYWx1ZSA9IGRhdGFbJ2F0dHJpYnV0ZSddWydpbXBvcnRhbmNlJ107DQogICAgICBsZXQgcmVsZXZhbmNlVmFsdWUgPSBkYXRhWydhdHRyaWJ1dGUnXVsncmVsZXZhbmNlJ107DQogICAgICBzdmcuc2VsZWN0QWxsKCkucmVtb3ZlKCk7DQoNCiAgICAgIGlmIChkYXRhWyd0eXBlJ10gPT0gJzEnKSB7DQogICAgICAgIGxldCBhcmVhID0gdG9vbHMuY2FsY1RyaWFuZ2xlKHgsIHksIHIpOw0KICAgICAgICBfdGhpcy5kcmF3VHJpYW5nbGUoc3ZnLCAicmdiKDI1MCwgMTk5LCA4OCkiLCBhcmVhLCAicmdiKDI1MCwgMTk5LCA4OCkiKTsNCiAgICAgIH0NCiAgICAgIGVsc2Ugew0KDQogICAgICAgIGxldCBjeSA9IHk7DQogICAgICAgIGxldCB0b3RhbER1cmF0aW9uID0gX3RoaXMudG90YWxEdXJhdGlvbjsNCiAgICAgICAgbGV0IHRpbWVMaW5lU2NhbGVfbGluZWFyID0gZDMuc2NhbGVMaW5lYXIoWzAsIHRvdGFsRHVyYXRpb25dLCBbeCAtIHIgKiBNYXRoLnNxcnQoMykgLyAyLCB4ICsgciAqIE1hdGguc3FydCgzKSAvIDJdKQ0KICAgICAgICBsZXQgdGltZUxpbmVIaWdoU2NhbGVfbGluZWFyID0gZDMuc2NhbGVMaW5lYXIoWzAsIF90aGlzLm1heEREdXJhdGlvbl0sIFswLCByICogKDEgKyBNYXRoLnNxcnQoMykgLyAyKV0pDQogICAgICAgIGxldCBjaXJjbGVDb2xvciA9IGNvbXB1dGVfY29sb3IoY29sb3JfbGluZWFyKGltcG9ydGFuY2VWYWx1ZSkpOw0KICAgICAgICBfdGhpcy5kcmF3Q2lyY2xlKHN2ZywgeCwgY3ksIHIsIGNpcmNsZUNvbG9yLCBkYXRhLCAxLCAiZW50Q2lyY2xlIiwgImVudENpcmNsZV8iICsgZGF0YVsnaWQnXSk7DQoNCiAgICAgICAgciA9IHIgKiBNYXRoLnNxcnQoMykgLyAyOw0KICAgICAgICB5ICs9IHIgLyAyOw0KICAgICAgICBsZXQgcGF0aCA9IGQzLnBhdGgoKTsNCg0KDQogICAgICAgIHBhdGgubW92ZVRvKHggLSByLCB5KTsNCiAgICAgICAgbGV0IGxpbmVMaSA9IFtkYXRhXTsNCiAgICAgICAgbGV0IGxpbmVQb2ludCA9IFt7ICdpZCc6IGRhdGFbJ2lkJ10sICd0aW1lJzogZGF0YVsndGltZSddLCAneCc6IDAsICd5JzogMCB9XTsNCiAgICAgICAgbGV0IGpnaWRMID0gW2RhdGFbJ2lkJ11dOw0KICAgICAgICBsZXQgc2ltaWxhcml0eVJlbHNsaSA9IFtkYXRhWyJzaW1pbGFyaXR5UmVsIl1dOw0KICAgICAgICB3aGlsZShzaW1pbGFyaXR5UmVsc2xpLmxlbmd0aD4wKXsNCiAgICAgICAgICBsZXQgc2ltaWxhcml0eVJlbHMgPSBzaW1pbGFyaXR5UmVsc2xpWzBdOw0KICAgICAgICAgIHNpbWlsYXJpdHlSZWxzbGkuc3BsaWNlKDAsMSk7DQogICAgICAgICAgbGV0IGpnID0gMDsNCiAgICAgICAgICBmb3IgKGxldCBzcmVsIGluIHNpbWlsYXJpdHlSZWxzKSB7DQogICAgICAgICAgICBsZXQgY2RhdGEgPSBvRGF0YS5maW5kKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkWydpZCddID09IHNpbWlsYXJpdHlSZWxzW3NyZWxdIH0pOw0KICAgICAgICAgICAgaWYoamdpZEwuaW5kZXhPZihjZGF0YVsnaWQnXSk9PS0xKXsNCiAgICAgICAgICAgICAgc2ltaWxhcml0eVJlbHNsaS5wdXNoKGNkYXRhWyJzaW1pbGFyaXR5UmVsIl0pDQogICAgICAgICAgICAgIGpnPTE7DQogICAgICAgICAgICAgIGxpbmVMaS5wdXNoKGNkYXRhKQ0KICAgICAgICAgICAgICBqZ2lkTC5wdXNoKGNkYXRhWydpZCddKQ0KICAgICAgICAgICAgICBsaW5lUG9pbnQucHVzaCh7ICdpZCc6IGNkYXRhWydpZCddLCAndGltZSc6IGNkYXRhWyd0aW1lJ10sICd4JzogMCwgJ3knOiAwIH0pDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIC8vIGlmKGpnPT0wKXsNCiAgICAgICAgICAgIC8vIGJyZWFrOw0KICAgICAgICAgIC8vIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgY29uc3Qgc29ydG10ID0gKGEsIGIpID0+IHsNCiAgICAgICAgICByZXR1cm4gdG9vbHMudGltZTJzZWNvbmRzKGFbMF0pIC0gdG9vbHMudGltZTJzZWNvbmRzKGJbMF0pOw0KICAgICAgICB9DQogICAgICAgIGNvbnN0IHNvcnRscCA9IChhLCBiKSA9PiB7DQogICAgICAgICAgcmV0dXJuIHRvb2xzLnRpbWUyc2Vjb25kcyhhWyd0aW1lJ11bMF0pIC0gdG9vbHMudGltZTJzZWNvbmRzKGJbJ3RpbWUnXVswXSk7DQogICAgICAgIH0NCiAgICAgICAgY29uc29sZS5sb2cobGluZUxpKTsNCiAgICAgICAgbGluZUxpID0gbGluZUxpLnNvcnQoc29ydGxwKTsNCiAgICAgICAgbGluZVBvaW50ID0gbGluZVBvaW50LnNvcnQoc29ydGxwKTsNCiAgICAgICAgbGV0IGxpbmVEYXRhID0gW1t4IC0gciAqIE1hdGguc3FydCgzKS8yLTQgLCB5XV07DQogICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgbGluZUxpLmxlbmd0aDsgdCsrKSB7DQogICAgICAgICAgbGV0IHN0YXJ0VCA9IGxpbmVMaVt0XVsndGltZSddWzBdOw0KICAgICAgICAgIGxldCBkdXJhdGlvbiA9bGluZUxpW3RdWyd0b3RhbER1cmF0aW9uJ10NCiAgICAgICAgICAvLyBsZXQgZW5kVCA9IGxpbmVMaVt0XVsndGltZSddWzFdOw0KICAgICAgICAgIGxldCBzdGFydFMgPSB0b29scy50aW1lMnNlY29uZHMoc3RhcnRUKTsNCiAgICAgICAgICBsZXQgZW5kUyA9IHN0YXJ0UyArZHVyYXRpb247DQogICAgICAgICAgLy8gbGV0IHN0YXJ0eCA9IHRpbWVMaW5lU2NhbGVfbGluZWFyKChzdGFydFMgLSBkdXJhdGlvbiAqIDEwKSk7DQogICAgICAgICAgLy8gbGV0IGVuZHggPSB0aW1lTGluZVNjYWxlX2xpbmVhcigoZW5kUyArIGR1cmF0aW9uICogMTApKTsNCiAgICAgICAgICBsZXQgbGltc3QgPSAoeCAtIHIgKiBNYXRoLnNxcnQoMykgLyAyKTsNCiAgICAgICAgICBsZXQgbGltZWQgPSAoeCArIHIgKiBNYXRoLnNxcnQoMykgLyAyKTsNCiAgICAgICAgICBsZXQgc3RhcnR4ID0gKGxpbXN0PHRpbWVMaW5lU2NhbGVfbGluZWFyKChzdGFydFMpKSk/KHRpbWVMaW5lU2NhbGVfbGluZWFyKChzdGFydFMpKSk6KGxpbXN0KTsNCiAgICAgICAgICBsZXQgZW5keCA9IChsaW1lZD50aW1lTGluZVNjYWxlX2xpbmVhcigoZW5kUykpKT8odGltZUxpbmVTY2FsZV9saW5lYXIoKGVuZFMpKSk6KGxpbWVkKTsNCiAgICAgICAgICAvLyBsZXQgbWlkeCA9IHRpbWVMaW5lU2NhbGVfbGluZWFyKChlbmRTICsgc3RhcnRTKSAvIDIpOw0KICAgICAgICAgIGxldCBtaWR4ID0gKHN0YXJ0eCtlbmR4KSAvIDI7DQogICAgICAgICAgbGV0IHlzID0geTsNCiAgICAgICAgICBsZXQgeXogPSB5IC0gdGltZUxpbmVIaWdoU2NhbGVfbGluZWFyKChkdXJhdGlvbikpOw0KICAgICAgICAgIGxpbmVQb2ludFt0XVsneCddID0gbWlkeDsNCiAgICAgICAgICBsaW5lUG9pbnRbdF1bJ3knXSA9IHkgLSB0aW1lTGluZUhpZ2hTY2FsZV9saW5lYXIoZHVyYXRpb24pIC8gMS43Ow0KICAgICAgICAgIC8vIGlmIChzdGFydHggPCAobGluZURhdGFbbGluZURhdGEubGVuZ3RoIC0gMV1bMF0pKSB7DQogICAgICAgICAgICBpZiAodCA+IDApIHsNCiAgICAgICAgICAgICAgbGluZURhdGEuc3BsaWNlKGxpbmVEYXRhLmxlbmd0aCAtIDEsIDEpOw0KICAgICAgICAgICAgICBtaWR4Kz10KjU7DQogICAgICAgICAgICAgIHN0YXJ0eCA9IG1pZHgtKChtaWR4LShsaW5lRGF0YVtsaW5lRGF0YS5sZW5ndGggLSAxXVswXSArIG1pZHgpIC8gMikpLzI7DQogICAgICAgICAgICAgIGVuZHgrPXQqNTsNCiAgICAgICAgICAgICAgeXMgPSB5Kyh5LWxpbmVEYXRhW2xpbmVEYXRhLmxlbmd0aCAtIDFdWzFdKS8zDQogICAgICAgICAgICB9DQogICAgICAgICAgICBjb25zb2xlLmxvZyh5cykNCiAgICAgICAgICAvLyB9DQogICAgICAgICAgbGluZURhdGEucHVzaChbc3RhcnR4LCB5c10sW21pZHgsIHl6XSxbZW5keCwgeV0pfQ0KICAgICAgICBsaW5lRGF0YS5wdXNoKFt4ICsgciwgeV0pDQogICAgICAgIGxldCBjdXJ2ZV9nZW5lcmF0b3IgPSBkMy5saW5lKCkNCiAgICAgICAgICAueCgoZCkgPT4gZFswXSkNCiAgICAgICAgICAueSgoZCkgPT4gew0KICAgICAgICAgICAgbGV0IGggPSBNYXRoLnNxcnQoTWF0aC5wb3cociwgMikgLSBNYXRoLnBvdygoZFswXSAtICh4IC0gcikpLCAyKSk7DQogICAgICAgICAgICBpZiAoKHkgLSBkWzFdKSA+IChoICsgciAqIE1hdGguc3FydCgzKSAvIDIpKQ0KICAgICAgICAgICAgICByZXR1cm4geSAtIChoICsgciAqIE1hdGguc3FydCgzKSAvIDIpICsgMjsNCiAgICAgICAgICAgIHJldHVybiBkWzFdOw0KICAgICAgICAgIH0pDQogICAgICAgICAgLmN1cnZlKGQzLmN1cnZlQnVuZGxlICkNCiAgICAgICAgICAvLyAuY3VydmUoZDMuY3VydmVDYXRtdWxsUm9tICApDQogICAgICAgICAgLy8gLmN1cnZlKGQzLmN1cnZlQmFzaXMpDQogICAgICAgIF90aGlzLmRyYXdUaW1lTGluZShzdmcsIGN1cnZlX2dlbmVyYXRvcihsaW5lRGF0YSksICJ3aGl0ZSIsIDIsICcwJywgJ3NvbkxpbmUgJywgJ3NvbkxpbmUgJyk7DQoNCg0KICAgICAgICBmb3IgKGxldCBwID0gMDsgcCA8IGxpbmVQb2ludC5sZW5ndGg7IHArKykgew0KICAgICAgICAgIF90aGlzLmRyYXdDaXJjbGUoc3ZnLCBsaW5lUG9pbnRbcF1bJ3gnXSwgbGluZVBvaW50W3BdWyd5J10sIDUsICJyZWQiLCBsaW5lUG9pbnRbcF0sIDAsICJsaW5lUG9pbnQiLCAibGluZVBvaW50XyIgKyBsaW5lUG9pbnRbcF1bJ2lkJ10pOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gIjEiOiAicmdiKDE0NSwgMjA0LCAxMTcpIiwNCiAgICAgICAgLy8gICAiMiI6ICJyZ2IoODQsIDExMiwgMTk4KSIsDQogICAgICAgIC8vICAgIjMiOiAicmdiKDIzOCwgMTAyLCAxMDIpIiwNCiAgICAgICAgbGV0IHR5cGVDb2xvciA9IHsNCiAgICAgICAgICAiMSI6ICIjZmY5YzljIiwNCiAgICAgICAgICAiMiI6ICIjZjRmNGQwIiwNCiAgICAgICAgICAiMyI6ICIjNmY4YmUwIiwNCiAgICAgICAgfTsNCiAgICAgICAgbGV0IGR1cmF0aW9uID0gdG9vbHMudGltZTJzZWNvbmRzKGRhdGFbJ3RpbWUnXVswXSkgLSB0b29scy50aW1lMnNlY29uZHMoZGF0YVsndGltZSddWzFdKTsNCiAgICAgICAgbGV0IHR5cGVEYXRhID0gZGF0YVsnYXR0cmlidXRlJ11bJ2V4cHJlc3Npb25zJ107DQogICAgICAgIGxldCBzb25MaXN0ID0gZGF0YVsnc29uJ107DQogICAgICAgIGxldCBzb25zID0gW3Nvbkxpc3RdOw0KICAgICAgICB3aGlsZSAoc29ucy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgbGV0IGN1clNvbkxpc3QgPSBzb25zWzBdOw0KICAgICAgICAgIHNvbnMuc3BsaWNlKDAsIDEpOw0KICAgICAgICAgIGlmIChjdXJTb25MaXN0Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgIGZvciAobGV0IHMgaW4gY3VyU29uTGlzdCkgew0KICAgICAgICAgICAgICBsZXQgc29uRGF0YSA9IG9EYXRhLmZpbmQoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGRbJ2lkJ10gPT0gY3VyU29uTGlzdFtzXSB9KTsNCiAgICAgICAgICAgICAgbGV0IHNvblR5cGVEYXRhID0gc29uRGF0YVsnYXR0cmlidXRlJ11bJ2V4cHJlc3Npb25zJ107DQoNCiAgICAgICAgICAgICAgZm9yIChsZXQgdCBpbiBzb25UeXBlRGF0YSkgew0KICAgICAgICAgICAgICAgIGxldCB0eXBlRHVyaXRpb24gPSBzb25UeXBlRGF0YVt0XTsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBkIGluIHR5cGVEdXJpdGlvbikgew0KICAgICAgICAgICAgICAgICAgIHR5cGVEYXRhW3RdLnB1c2godHlwZUR1cml0aW9uW2RdKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBzb25zLnB1c2goc29uRGF0YVsnc29uJ10pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB2YXIgdHlwZVN0YXJ0UiA9IDAvL01hdGguUEkvNDsNCg0KICAgICAgICB2YXIgdHlwZVN0ZXBSID0gTWF0aC5QSSAvIDE7DQoNCiAgICAgICAgaWYgKHNvbkxpc3QubGVuZ3RoID4gMCkgew0KICAgICAgICAgIGxldCB0eXBlVG90YWxEdXIgPSAwOw0KICAgICAgICAgIGZvciAobGV0IHQgaW4gdHlwZURhdGEpIHsNCiAgICAgICAgICAgIGxldCB0eXBlRHVyaXRpb24gPSB0eXBlRGF0YVt0XTsNCiAgICAgICAgICAgIGZvciAobGV0IGQgaW4gdHlwZUR1cml0aW9uKSB7DQogICAgICAgICAgICAgIHR5cGVUb3RhbER1ciArPSAodG9vbHMudGltZTJzZWNvbmRzKHR5cGVEdXJpdGlvbltkXVsxXSkgLSB0b29scy50aW1lMnNlY29uZHModHlwZUR1cml0aW9uW2RdWzBdKSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgbGV0IHR5cGVBcmNTY2FsZV9saW5lYXIgPSBkMy5zY2FsZUxpbmVhcihbMCwgdHlwZVRvdGFsRHVyXSwgWzAsIE1hdGguUEkgKiAyXSk7DQogICAgICAgICAgZm9yIChsZXQgaSBpbiB0eXBlRGF0YSkgew0KICAgICAgICAgICAgbGV0IGNvbG9yID0gdHlwZUNvbG9yW2ldOw0KICAgICAgICAgICAgbGV0IHR5cGVEdXJpdGlvbiA9IHR5cGVEYXRhW2ldOw0KICAgICAgICAgICAgbGV0IHRvdGFsVHlwZVNlY29uZHMgPSAwOw0KICAgICAgICAgICAgZm9yIChsZXQgZCBpbiB0eXBlRHVyaXRpb24pIHsNCiAgICAgICAgICAgICAgdG90YWxUeXBlU2Vjb25kcyArPSAodG9vbHMudGltZTJzZWNvbmRzKHR5cGVEdXJpdGlvbltkXVsxXSkgLSB0b29scy50aW1lMnNlY29uZHModHlwZUR1cml0aW9uW2RdWzBdKSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmKHRvdGFsVHlwZVNlY29uZHM+MCkNCiAgICAgICAgICAgIHtsZXQgdHlwZVN0ZXBSID0gdHlwZUFyY1NjYWxlX2xpbmVhcih0b3RhbFR5cGVTZWNvbmRzKS8vTWF0aC5QSS8yOw0KDQogICAgICAgICAgICBsZXQgZW5kQW5nbGV0ID0gdHlwZVN0YXJ0UiArIDEgKiB0eXBlU3RlcFINCiAgICAgICAgICAgIHZhciBkYXRhc2V0ID0geyBzdGFydEFuZ2xlOiB0eXBlU3RhcnRSLCBlbmRBbmdsZTogZW5kQW5nbGV0IH07IC8v5Yib5bu65LiA5Liq5byn55Sf5oiQ5ZmoDQogICAgICAgICAgICB0eXBlU3RhcnRSID0gZW5kQW5nbGV0Ow0KICAgICAgICAgICAgdmFyIGFyY1BhdGggPSBkMy5hcmMoKQ0KICAgICAgICAgICAgICAuaW5uZXJSYWRpdXMociArIDEwKQ0KICAgICAgICAgICAgICAub3V0ZXJSYWRpdXMociArIDI1KTsNCiAgICAgICAgICAgIHZhciBwYXRoQXJjID0gYXJjUGF0aChkYXRhc2V0KTsNCiAgICAgICAgICAgIF90aGlzLmRyYXdBcmMoc3ZnLCB4LCB5IC0gciAvIDIsIHBhdGhBcmMsIGNvbG9yLCBjb2xvciwgJ3R5cGUgZicgKyBkYXRhWydpZCddICsgIiB0IiArIGkpO30NCiAgICAgICAgICB9DQoNCiAgICAgICAgICBsZXQgc29uVG90YWwgPSAwOw0KICAgICAgICAgIGxldCBzb25OdW0gPSAwDQogICAgICAgICAgZm9yIChsZXQgcyBpbiBzb25MaXN0KSB7DQogICAgICAgICAgICBsZXQgc29uRGF0YSA9IG9EYXRhLmZpbmQoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGRbJ2lkJ10gPT0gc29uTGlzdFtzXSB9KTsNCiAgICAgICAgICAgIGxldCBzb25EdXIgPSBzb25EYXRhWyd0b3RhbER1cmF0aW9uJ107DQogICAgICAgICAgICBzb25Ub3RhbCArPSBzb25EdXI7DQogICAgICAgICAgICBzb25OdW0gKz0gMTsNCiAgICAgICAgICB9DQogICAgICAgICAgbGV0IHNraXBBcmMgPSBNYXRoLlBJIC8gKHNvbk51bSArIDIpOw0KICAgICAgICAgIGxldCB0aW1lU29uTGluZWFyID0gZDMuc2NhbGVMaW5lYXIoWzAsIHNvblRvdGFsXSwgWzAsIE1hdGguUEkgKiAyIC0gc2tpcEFyYyAqIHNvbk51bV0pOw0KICAgICAgICAgIGxldCB0aW1lU29uSGVpZ2hMaW5lYXIgPSBkMy5zY2FsZUxpbmVhcihbMCwgc29uVG90YWxdLCBbNDAsIDQwXSk7DQoNCiAgICAgICAgICBsZXQgdGltZVNvbkNvbG9yX2xpbmVhciA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFswLCBzb25Ub3RhbF0pLnJhbmdlKFswLCAxXSk7DQogICAgICAgICAgbGV0IHRpbWVTb25Db21wdXRlX2NvbG9yID0gZDMuaW50ZXJwb2xhdGUoIndoaXRlIiwgY2lyY2xlQ29sb3IpOw0KICAgICAgICAgIHZhciBzb25TdGFydFIgPSAwOy8vLU1hdGguUEkvMjsNCiAgICAgICAgICBmb3IgKGxldCBzIGluIHNvbkxpc3QpIHsNCiAgICAgICAgICAgIGxldCBzb25EYXRhID0gb0RhdGEuZmluZChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZFsnaWQnXSA9PSBzb25MaXN0W3NdIH0pOw0KICAgICAgICAgICAgbGV0IHNvbkR1ciA9IHNvbkRhdGFbJ3RvdGFsRHVyYXRpb24nXTsNCg0KICAgICAgICAgICAgbGV0IHNvblN0ZXBSID0gdGltZVNvbkxpbmVhcihzb25EdXIpLy9NYXRoLlBJLzI7DQoNCiAgICAgICAgICAgIGxldCBlbmRBbmdsZXQgPSBzb25TdGFydFIgKyBzb25TdGVwUjsNCiAgICAgICAgICAgIHZhciBkYXRhc2V0ID0geyBzdGFydEFuZ2xlOiBzb25TdGFydFIsIGVuZEFuZ2xlOiBlbmRBbmdsZXQgfTsgLy/liJvlu7rkuIDkuKrlvKfnlJ/miJDlmagNCiAgICAgICAgICAgIHNvblN0YXJ0UiA9IGVuZEFuZ2xldDsNCiAgICAgICAgICAgIGxldCBjb2xvciA9ICdibHVlJzsNCiAgICAgICAgICAgIHZhciBhcmNQYXRoID0gZDMuYXJjKCkNCiAgICAgICAgICAgICAgLmlubmVyUmFkaXVzKHIgKyAyOCkNCiAgICAgICAgICAgICAgLm91dGVyUmFkaXVzKHIgKyB0aW1lU29uSGVpZ2hMaW5lYXIoc29uRHVyKSk7DQogICAgICAgICAgICB2YXIgYXJjTWlkUGF0aCA9IGQzLmFyYygpDQogICAgICAgICAgICAgIC5pbm5lclJhZGl1cygwKQ0KICAgICAgICAgICAgICAub3V0ZXJSYWRpdXMociArIDMyKTsNCiAgICAgICAgICAgIHZhciBwYXRoQXJjID0gYXJjUGF0aChkYXRhc2V0KTsNCg0KICAgICAgICAgICAgZW5kQW5nbGV0ID0gc29uU3RhcnRSICsgc2tpcEFyYzsNCiAgICAgICAgICAgIHZhciBtaWREYXRhc2V0ID0geyBzdGFydEFuZ2xlOiBzb25TdGFydFIsIGVuZEFuZ2xlOiBlbmRBbmdsZXQgfTsgLy/liJvlu7rkuIDkuKrlvKfnlJ/miJDlmagNCg0KICAgICAgICAgICAgbGV0IGppYW50b3VQYXRoID0gZDMucGF0aCgpOw0KICAgICAgICAgICAgamlhbnRvdVBhdGguYXJjKHgsIHkgLSByIC8gMiwgciArIDMyLCBzb25TdGFydFIgLSBNYXRoLlBJIC8gMiwgZW5kQW5nbGV0IC0gTWF0aC5QSSAvIDIpOw0KDQogICAgICAgICAgICBzb25TdGFydFIgKz0gc2tpcEFyYzsNCiAgICAgICAgICAgIHZhciBwYXRoTWlkQXJjID0gYXJjTWlkUGF0aChtaWREYXRhc2V0KTsNCiAgICAgICAgICAgIGxldCB0aW1lU29uQ29sb3IgPSBjb21wdXRlX2NvbG9yKGNvbG9yX2xpbmVhcihzb25EYXRhWydhdHRyaWJ1dGUnXVsnaW1wb3J0YW5jZSddKSk7DQogICAgICAgICAgICBfdGhpcy5kcmF3QXJjKHN2ZywgeCwgeSAtIHIgLyAyLCBwYXRoQXJjLCB0aW1lU29uQ29sb3IsIHRpbWVTb25Db2xvciwgJ3NvbiBmJyArIGRhdGFbJ2lkJ10gKyAiIHMiICsgc29uTGlzdFtzXSwgJzAnKTsNCiAgICAgICAgICAgIGlmIChzICE9IHNvbkxpc3QubGVuZ3RoIC0gMSkgew0KICAgICAgICAgICAgICBfdGhpcy5kcmF3VGltZUxpbmUoc3ZnLCBqaWFudG91UGF0aCwgInJnYigyMDAsMjAwLDIwMCkiLCAzLCAnOSw1JywgJ21pZEFyYyAnLCAnbWlkQXJjICcpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICB9DQoNCg0KICAgICAgfQ0KICAgICAgbGV0IHR4dHMgPSBkYXRhWyduYW1lJ10uc3BsaXQoIiAiKQ0KICAgICAgbGV0IHR4ID0geCAtIHIgLSAzMDsNCiAgICAgIGxldCB0eSA9IHkgKyByICs2MDsNCiAgICAgIGxldCB0dyA9IHIqMjsNCiAgICAgIHR4ID0geDsNCiAgICAgIGlmKGRhdGFbJ3NvbiddLmxlbmd0aD09MCl7DQogICAgICAgIHR4ID0geC8vLXItMTA7DQogICAgICAgIHR5ID0geStyKjI7DQogICAgICB9DQogICAgICBpZihkYXRhWydpZCddPT0iMyIpew0KICAgICAgICB0eCA9IHgtMTA7DQogICAgICAgIHR5ID0geStyKjI7DQogICAgICB9DQogICAgICBpZihkYXRhWydpZCddPT0iNCIpew0KICAgICAgICB0eCA9IHgrMTA7DQogICAgICAgIHR5ID0geStyKjI7DQogICAgICB9DQogICAgICAvLyBpZihkYXRhWyd0eXBlJ109PScxJyl7DQogICAgICAvLyAgIHR4ID0geC1yLzI7DQogICAgICAvLyAgIHR5ID0geStyKjI7DQogICAgICAvLyB9DQoNCiAgICAgIF90aGlzLmRyYXdUeHQoc3ZnLCB0eCwgdHksdHcgLCB0eHRzLCAiZ3JleSIsMjIsIGB0ZXh0XyR7ZGF0YVsnaWQnXX1gKTsNCiAgICAgIC8vIGxldCB0eHRzID0gX3RoaXMubmFtZWlucHV0LnNwbGl0KCIgIikNCiAgICAgIC8vIF90aGlzLmRyYXdUeHQoc3ZnLCB4IC0gciAtIDMyLCB5ICsgciArIDUwLCByICogMiArIDY0LCB0eHRzLCAiZ3JleSIpOw0KICAgIH0sDQogICAgZHJhd1F1ZXN0aW9uU3VyZmFjZShzdmcpew0KICAgICAgY29uc3QgX3RoaXMgPSB0aGlzOw0KICAgICAgbGV0IHBzdmcgPXN2Zw0KICAgICAgbGV0IHcgPSBwc3ZnLmF0dHIoIndpZHRoIik7DQogICAgICBsZXQgaCA9IHBzdmcuYXR0cigiaGVpZ2h0Iik7DQogICAgICBwc3ZnLnNlbGVjdCgiI3Byb2NHIikucmVtb3ZlKCk7DQogICAgICBsZXQgYmFja2cgPSBwc3ZnLmFwcGVuZCgiZyIpLmF0dHIoImlkIiwgImJhY2tHIikuYXR0cigid2lkdGgiLCB3KS5hdHRyKCJoZWlnaHQiLCBoKTsNCiAgICAgIGxldCBwcm9nID0gcHN2Zy5hcHBlbmQoImciKS5hdHRyKCJpZCIsICJwcm9jRyIpLmF0dHIoIndpZHRoIiwgdykuYXR0cigiaGVpZ2h0IiwgaCk7DQogICAgICBsZXQgcHJvRGF0YSA9IF90aGlzLnByb2JsZW1zRGF0YTsNCiAgICAgIGxldCBwcm9ibGVtQ29uY2VwdERhdGEgPSBfdGhpcy5wcm9ibGVtQ29uY2VwdERhdGE7DQogICAgICBsZXQgY29uY2VwdFRyZWUgPSBfdGhpcy5jb25jZXB0VHJlZTsNCg0KICAgICAgY29uc29sZS5sb2coY29uY2VwdFRyZWUscHJvYmxlbUNvbmNlcHREYXRhKTsNCiAgICAgIGxldCBwcm9JZCA9IF90aGlzLmN1ckVudElkOw0KICAgICAgaWYocHJvSWQgPT0gIiIpe3JldHVybjt9DQogICAgICBsZXQgY3VyUHJvID0gcHJvRGF0YS5maW5kKGZ1bmN0aW9uKHApe3JldHVybiAocFsnaWQnXSkudG9TdHJpbmcoKSA9PSAocHJvSWQpLnRvU3RyaW5nKCl9KQ0KICAgICAgbGV0IHRpdGxlID0gY3VyUHJvWyd0aXRsZSddOw0KICAgICAgbGV0IHR5cGUgPSBjdXJQcm9bJ3R5cGUnXTsNCiAgICAgIGxldCB0eD0xMDsNCiAgICAgIGxldCB0eSA9IDIwOw0KICAgICAgLy8gdHkgPSBfdGhpcy5kcmF3VHh0KHByb2csdHgsdHksdyxgVGl0bGU6JHt0aXRsZX1gLCJibGFjayIsMjIsJ3RpdGxlJyk7DQogICAgICBsZXQgY29udGVudCA9IGN1clByb1snY29udGVudCddLnNwbGl0KCIjIyMiKTsNCg0KICAgICAgbGV0IGlucHV0ID0iICI7DQogICAgICBsZXQgb3V0cHV0ID0iIjsNCiAgICAgIGlmKHByb0lkID09ICcxNTY4MDg2NjYxNDA4MTYxNzk4Jyl7DQogICAgICAgIHRpdGxlID0gIkFTQ0lJIjsNCiAgICAgICAgY29udGVudCA9IFsi5bey55+l5a2X56ymICdhJyDnmoRBU0NJSeeggeS4uiA5N++8jOaJp+ihjOS4i+WIl+ivreWPpeeahOi+k+WHuuaYr19fX19fX1/jgIIgYHByaW50ZiAoJyVkLCAlYycsICdiJywgJ2InKzEgKWAgOyJdOw0KICAgICAgICBfdGhpcy50YWJsZURhdGEuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdFsna2V5J10gPT0gJ0lucHV0VCd9KVsndmFsdWUnXSA9ICIiOw0KICAgICAgICBpbnB1dCA9ICJBLjk4LCBiICAgQi7plJnor68gQy4gOTgsIDk5ICAgRC4gOTgsIGMiDQogICAgICAgIF90aGlzLnRhYmxlRGF0YS5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0WydrZXknXSA9PSAnT3V0VCd9KVsndmFsdWUnXSA9ICIiOw0KICAgICAgICAvLyBvdXRwdXQgPSAiQy4gOTgsIDk5ICAgRC4gOTgsIGMiDQogICAgICB9DQogICAgICBlbHNlIGlmKHByb0lkID09ICcxNTY4MDg2NjYxNDA4MTYxNzk4Jyl7DQogICAgICAgIHRpdGxlID0gIkFTQ0lJIjsNCiAgICAgICAgY29udGVudCA9IFsi5bey55+l5a2X56ymICdhJyDnmoRBU0NJSeeggeS4uiA5N++8jOaJp+ihjOS4i+WIl+ivreWPpeeahOi+k+WHuuaYr19fX19fX1/jgIIgYHByaW50ZiAoJyVkLCAlYycsICdiJywgJ2InKzEgKWAgOyJdOw0KICAgICAgICBfdGhpcy50YWJsZURhdGEuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdFsna2V5J10gPT0gJ0lucHV0VCd9KVsndmFsdWUnXSA9ICIiOw0KICAgICAgICBpbnB1dCA9ICJBLjk4LCBiICAgQi7plJnor68gQy4gOTgsIDk5ICAgRC4gOTgsIGMiDQogICAgICAgIF90aGlzLnRhYmxlRGF0YS5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0WydrZXknXSA9PSAnT3V0VCd9KVsndmFsdWUnXSA9ICIiOw0KICAgICAgICAvLyBvdXRwdXQgPSAiQy4gOTgsIDk5ICAgRC4gOTgsIGMiDQogICAgICB9DQogICAgICBlbHNlIGlmKHR5cGUgPT0gJ1BST0dSQU1NSU5HJyl7DQogICAgICAgIGlucHV0ID0iICIrIGNvbnRlbnRbMV0uc3BsaXQoIui+k+WFpeagvOW8jzoiKVsxXTsNCiAgICAgICAgb3V0cHV0ID0iIisgY29udGVudFsyXS5zcGxpdCgi6L6T5Ye65qC85byPOiIpWzFdOw0KICAgICAgICB0aXRsZSA9IGBUaXRsZTogJHsnICd9ICR7dGl0bGV9YDsNCiAgICAgICAgX3RoaXMudGFibGVEYXRhLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHRbJ2tleSddID09ICdDb250ZW50VCd9KVsndmFsdWUnXSA9ICJEZXNjcmlwdGlvbjoiOw0KICAgICAgICBfdGhpcy50YWJsZURhdGEuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdFsna2V5J10gPT0gJ0lucHV0VCd9KVsndmFsdWUnXSA9ICJJbnB1dCBGb3JtYXQ6IjsNCiAgICAgICAgX3RoaXMudGFibGVEYXRhLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHRbJ2tleSddID09ICdPdXRUJ30pWyd2YWx1ZSddID0gIk91dHB1dCBGb3JtYXQ6IjsNCiAgICAgIH0NCiAgICAgIGVsc2V7DQogICAgICAgIHRpdGxlID0gIiI7DQoNCiAgICAgICAgX3RoaXMudGFibGVEYXRhLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHRbJ2tleSddID09ICdJbnB1dFQnfSlbJ3ZhbHVlJ10gPSAiIjsNCiAgICAgICAgX3RoaXMudGFibGVEYXRhLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHRbJ2tleSddID09ICdPdXRUJ30pWyd2YWx1ZSddID0gIiI7DQogICAgICB9DQogICAgICBfdGhpcy50YWJsZURhdGEuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdFsna2V5J10gPT0gJ1RpdGxlJ30pWyd2YWx1ZSddID0gYCR7JyAnfSAke3RpdGxlfWA7DQogICAgICBfdGhpcy50YWJsZURhdGEuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdFsna2V5J10gPT0gJ1R5cGUnfSlbJ3ZhbHVlJ10gPSBgVHlwZTogJHt0eXBlfWA7DQogICAgICBfdGhpcy50YWJsZURhdGEuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdFsna2V5J10gPT0gJ0NvbnRlbnQnfSlbJ3ZhbHVlJ10gPSBjb250ZW50WzBdOw0KICAgICAgX3RoaXMudGFibGVEYXRhLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHRbJ2tleSddID09ICdJbnB1dCd9KVsndmFsdWUnXSA9IGAgJHtpbnB1dH1gOw0KICAgICAgX3RoaXMudGFibGVEYXRhLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHRbJ2tleSddID09ICdPdXQnfSlbJ3ZhbHVlJ10gPSBgICR7b3V0cHV0fWA7DQogICAgICBjb25zb2xlLmxvZyhfdGhpcy50YWJsZURhdGEpDQogICAgICBsZXQgY29uTWFwID0ge30NCiAgICAgIGxldCBjb25OYW1lID0gW10NCiAgICAgIGZvcihsZXQgaT0wO2k8Y29uY2VwdFRyZWUubGVuZ3RoO2krKyl7DQogICAgICAgIGNvbk1hcFtjb25jZXB0VHJlZVtpXVsnaWQnXV0gPSAtMTsNCiAgICAgICAgY29uTmFtZS5wdXNoKGNvbmNlcHRUcmVlW2ldWydpZCddKQ0KICAgICAgfQ0KICAgICAgLy8gdmFyIGNvbXBhcmUgPSBmdW5jdGlvbiAoeCwgeSkgey8v5q+U6L6D5Ye95pWwDQogICAgICAvLyAgIGxldCBsZW54ID0geC5sZW5ndGg7DQogICAgICAvLyAgIGxldCBsZW55ID0geS5sZW5ndGg7DQogICAgICAvLyAgIGlmKGxlbnghPWxlbnkpcmV0dXJuIGxlbng+bGVueTsNCiAgICAgIC8vICAgcmV0dXJuIHhbInByb2JsZW1TZXRJZCJdID4geVsicHJvYmxlbVNldElkIl0gDQogICAgICAvLyB9Ow0KICAgICAgLy8gY29uTmFtZS5zb3J0KGNvbXBhcmUpDQoNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvYmxlbUNvbmNlcHREYXRhLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGxldCBjb25jZXB0SWQgPSBwcm9ibGVtQ29uY2VwdERhdGFbaV1bJ2NvbmNlcHRJZCddOw0KICAgICAgICBsZXQgcHJvYmxlbUlkID0gcHJvYmxlbUNvbmNlcHREYXRhW2ldWydwcm9ibGVtJ107DQogICAgICAgIGxldCB0eXBlID0gcHJvYmxlbUNvbmNlcHREYXRhW2ldWyd0eXBlJ107DQogICAgICAgIGlmKHByb2JsZW1JZCA9PSBwcm9JZCl7DQogICAgICAgICAgY29uTWFwW2NvbmNlcHRJZF0gPSB0eXBlOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBsZXQgcHJleCA9IDMwOw0KICAgICAgbGV0IHByZXkgPSA2MDsNCiAgICAgIGxldCB0ZXh0V2lkdGggPSBfdGhpcy5kcmF3VHh0KHByb2csIDE0LCAyMCwgIlJlbGF0ZWQgY29uY2VwdHPvvJoiLCAicmdiKDEwMywgMTAzLCAxMDMpIiwgMjIsIGBrZGApOw0KICAgICAgY29uY2VwdFRyZWUuZm9yRWFjaChjb249PnsNCiAgICAgICAgbGV0IGpnID0gY29uTWFwW2NvblsnaWQnXV07DQogICAgICAgIGlmKGpnIT0tMSl7DQogICAgICAgICAgbGV0IHJlY0NvbG9yID0gInJnYigyMTgsIDEyNywgMTM2KSI7DQogICAgICAgICAgaWYoamc9PTApDQogICAgICAgICAgICByZWNDb2xvciA9ICJncmV5Ig0KICAgICAgICAgIGxldCB0ZXh0V2lkdGggPSBfdGhpcy5kcmF3VHh0KHByb2csIHByZXgsIHByZXksIGNvblsnbmFtZSddLCAid2hpdGUiLCAxNiwgYFByb1N1cl9jb24ke2NvblsnaWQnXX1gKTsNCiAgICAgICAgICBfdGhpcy5kcmF3UmVjdChiYWNrZywgcHJleC00LCBwcmV5LTIwLCB0ZXh0V2lkdGgrOCwyOCwgIDEwLCByZWNDb2xvciwgIjEiLCAibm9uZSIsICIxIiwgYFByb1N1cl9jb1JlY3Qke2NvblsnaWQnXX1gLCAnUHJvU3VyJyk7DQogICAgICAgIC8vIHByZXkrPTEwOw0KICAgICAgICAgIHByZXgrPXRleHRXaWR0aCsyMDsNCiAgICAgICAgICBpZihwcmV4PjI3MCl7DQogICAgICAgICAgICBwcmV4ID0gMzA7DQogICAgICAgICAgICBwcmV5Kz0zMA0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAvLyBsZXQgdGV4dFdpZHRoID0gX3RoaXMuZHJhd1R4dChwcm9nLCBwcmV4LCBwcmV5LCBjb25bJ2lkJ10rJycrY29uTWFwW2NvblsnaWQnXV0sICJibGFjayIsIDEwLCBgRmlnTmV0X2NvbmApOw0KDQogICAgICAgICAgLy8gX3RoaXMuZHJhd1R4dChwcm9nLHByZXgscHJleSx3LGBUaXRsZToke2NvbnRlbnR9YCwiYmxhY2siLDE2LCd0aXRsZScpOw0KICAgICAgfSkNCiAgICAgIC8vIF90aGlzLmRyYXdUeHQocHJvZyx0eCx0eSsyNSx3LGBUaXRsZToke2NvbnRlbnR9YCwiYmxhY2siLDE2LCd0aXRsZScpOw0KICAgIH0sICAgIA0KICAgIA0KICAgIGRyYXdSZWN0KHN2ZywgeCwgeSwgdywgaCwgcngsIGZpbGwsIHN0cm9rZVdpZHRoLCBzdHJva2UsIG9wYWNpdHksIGlkTmFtZSwgY2xhc3NOYW1lKSB7DQogICAgICBkMy5zZWxlY3QoYCMke2lkTmFtZX1gKS5yZW1vdmUoKTsNCiAgICAgIGxldCByZWN0ID0gc3ZnLmFwcGVuZCgicmVjdCIpDQogICAgICAgIC5hdHRyKCJ4IiwgeCkNCiAgICAgICAgLmF0dHIoInkiLCB5KQ0KICAgICAgICAuYXR0cigid2lkdGgiLCB3KQ0KICAgICAgICAuYXR0cigiaGVpZ2h0IiwgaCkNCiAgICAgICAgLmF0dHIoImlkIiwgaWROYW1lKQ0KICAgICAgICAuYXR0cigiY2xhc3MiLCBjbGFzc05hbWUpDQogICAgICAgIC5hdHRyKCJvcGFjaXR5Iiwgb3BhY2l0eSkNCiAgICAgICAgLmF0dHIoImZpbGwiLCBmaWxsKQ0KICAgICAgICAuYXR0cigicngiLCByeCkNCiAgICAgICAgLmF0dHIoInN0cm9rZSIsIHN0cm9rZSkNCiAgICAgICAgLmF0dHIoInN0cm9rZS13aWR0aCIsIHN0cm9rZVdpZHRoKQ0KICAgICAgcmV0dXJuIHJlY3Q7DQogICAgfSwNCiAgICBkcmF3VHh0KHN2ZywgeCwgeSwgdGV4dCwgZmlsbCwgZm9udHNpemUgPSAxMiwgaWROLCBhbiA9ICdzdGFydCcpIHsNCiAgICAgIGxldCB0eHQgPSBzdmcuYXBwZW5kKCJ0ZXh0IikNCiAgICAgICAgLmF0dHIoInkiLCB5KQ0KICAgICAgICAuYXR0cigieCIsIHgpDQogICAgICAgIC5hdHRyKCJpZCIsIGlkTikNCiAgICAgICAgLmF0dHIoImZpbGwiLCBmaWxsKQ0KICAgICAgICAuYXR0cigiZm9udC1zaXplIiwgZm9udHNpemUpDQogICAgICAgIC5zdHlsZSgidGV4dC1hbmNob3IiLCBhbikNCiAgICAgICAgLnRleHQodGV4dCkNCiAgICAgIA0KICAgICAgICBsZXQgdGV4dFdpZHRoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7aWROfWApLmdldEJCb3goKS53aWR0aDsNCiAgICAgIHJldHVybiB0ZXh0V2lkdGg7DQogICAgfSwNCiAgICBkcmF3VHh0VyhzdmcsIHgsIHksIHdpZHRoLCB0eHRzLCBmaWxsLCBmb250c2l6ZSA9IDEyLCBpZE4pIHsNCiAgICAgIGxldCB0eCA9IHg7DQogICAgICBsZXQgdHkgPSB5Ow0KICAgICAgbGV0IHByZVdpZHRoID0gMDsNCiAgICAgIGxldCBwcmVJZE4gPSAwOw0KICAgICAgbGV0IHByZXRleHQgPSAnJw0KICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCB0eHRzLmxlbmd0aDsgdCsrKSB7DQogICAgICAgIHByZXRleHQgKz0iICIrIHR4dHNbdF07DQogICAgICAgIGxldCB0eHQgPSBzdmcuYXBwZW5kKCJ0ZXh0IikNCiAgICAgICAgICAuYXR0cigieSIsIHR5KQ0KICAgICAgICAgIC5hdHRyKCJ4IiwgdHgpDQogICAgICAgICAgLmF0dHIoImlkIiwgYCR7aWROfV8ke3R9YCkNCiAgICAgICAgICAuYXR0cigiZmlsbCIsIGZpbGwpDQogICAgICAgICAgLmF0dHIoImZvbnQtc2l6ZSIsIGZvbnRzaXplKQ0KICAgICAgICAgIC5zdHlsZSgidGV4dC1hbmNob3IiLCAic3RhcnQiKQ0KICAgICAgICAgIC50ZXh0KHByZXRleHQpDQogICAgICAgIGxldCB0ZXh0V2lkdGggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtpZE59XyR7dH1gKS5nZXRCQm94KCkud2lkdGg7DQogICAgICAgIGlmKCh0ZXh0V2lkdGg+d2lkdGgpfHwodD09dHh0cy5sZW5ndGggLTEpKXsNCiAgICAgICAgICBwcmV0ZXh0ID0gJyc7DQogICAgICAgICAgdHggPSB4Ow0KICAgICAgICAgIHR5ICs9IDI1Ow0KICAgICAgICB9DQogICAgICAgIGVsc2V7DQogICAgICAgICAgdHh0LnJlbW92ZSgpDQogICAgICAgIH0NCiAgICAgICAgcHJlV2lkdGggKz0gdGV4dFdpZHRoOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHR5Ow0KICAgIH0sDQogICAgZHJhd1R4dE9yaTEoc3ZnLCB4LCB5LCB3aWR0aCwgdHh0cywgZmlsbCxmb250c2l6ZT0xMikgew0KICAgICAgbGV0IHR4ID0geDsNCiAgICAgIGxldCB0eSA9IHk7DQogICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHR4dHMubGVuZ3RoOyB0KyspIHsNCg0KICAgICAgbGV0IHR4dCA9ICAgc3ZnLmFwcGVuZCgidGV4dCIpDQogICAgICAgICAgLmF0dHIoInkiLCB0eSkNCiAgICAgICAgICAuYXR0cigieCIsIHR4KQ0KICAgICAgICAgIC5hdHRyKCJmaWxsIiwgZmlsbCkNCiAgICAgICAgICAuYXR0cigiZm9udC1zaXplIixmb250c2l6ZSkNCiAgICAgICAgICAuc3R5bGUoInRleHQtYW5jaG9yIiwgIm1pZGRsZSIpDQogICAgICAgICAgLnRleHQodHh0c1t0XSkNCiAgICAgICAgdHggKz0gdHh0c1t0XS5sZW5ndGggKiAxNDsNCiAgICAgICAgaWYgKHR4IC0geCA+IHdpZHRoKSB7DQogICAgICAgICAgdHggPSB4Ow0KICAgICAgICAgIHR5ICs9IDI1Ow0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBkcmF3VHh0T3JpKHN2ZywgeCwgeSwgd2lkdGgsIHR4dHMsIGZpbGwpIHsNCiAgICAgIGxldCB0eCA9IHg7DQogICAgICBsZXQgdHkgPSB5Ow0KICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCB0eHRzLmxlbmd0aDsgdCsrKSB7DQoNCiAgICAgICAgc3ZnLmFwcGVuZCgidGV4dCIpDQogICAgICAgICAgLmF0dHIoInkiLCB0eSkNCiAgICAgICAgICAuYXR0cigieCIsIHR4KQ0KICAgICAgICAgIC5hdHRyKCJmaWxsIiwgZmlsbCkNCiAgICAgICAgICAudGV4dCh0eHRzW3RdKQ0KICAgICAgICB0eCArPSB0eHRzW3RdLmxlbmd0aCAqIDEwOw0KICAgICAgICBpZiAodHggLSB4ID4gd2lkdGgpIHsNCiAgICAgICAgICB0eCA9IHg7DQogICAgICAgICAgdHkgKz0gMjU7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIGRyYXdUcmlhbmdsZShzdmcsIGNvbG9yLCBwb2ludHMsIHN0cm9rZSwgb3BhY2l0eSA9IDEpIHsNCiAgICAgIHN2Zy5hcHBlbmQoInBvbHlnb24iKQ0KICAgICAgICAuYXR0cigicG9pbnRzIiwgcG9pbnRzKQ0KICAgICAgICAuYXR0cigiZmlsbCIsIGNvbG9yKQ0KICAgICAgICAuYXR0cigic3Ryb2tlLWxpbmVqb2luIiwgInJvdW5kIikNCiAgICAgICAgLmF0dHIoIm9wYWNpdHkiLCBvcGFjaXR5KQ0KICAgICAgICAuYXR0cigic3Ryb2tlIiwgc3Ryb2tlKQ0KICAgICAgICAuYXR0cigic3Ryb2tlLXdpZHRoIiwgIjE1cHgiKTsNCiAgICB9LA0KICAgIGRyYXdDaXJjbGUoc3ZnLCB4LCB5LCByLCBmaWxsLCBkYXRhLCBvcGFjaXR5LCBjbGFzc05hbWUgPSAnZW50Q2lyY2xlJywgaWROYW1lKSB7DQogICAgICBjb25zdCBfdGhpcyA9IHRoaXM7DQogICAgICBjb25zdCBvRGF0YSA9IF90aGlzLmRhdGENCiAgICAgIHN2Zy5hcHBlbmQoImNpcmNsZSIpDQogICAgICAgIC5hdHRyKCJpZCIsIGlkTmFtZSkNCiAgICAgICAgLmF0dHIoImNsYXNzIiwgY2xhc3NOYW1lKQ0KICAgICAgICAuYXR0cigib3BhY2l0eSIsIG9wYWNpdHkpDQogICAgICAgIC5hdHRyKCJjeCIsIHgpDQogICAgICAgIC5hdHRyKCJjeSIsIHkpDQogICAgICAgIC5hdHRyKCJyIiwgcikNCiAgICAgICAgLmF0dHIoImZpbGwiLCBmaWxsKQ0KICAgICAgICAub24oIm1vdXNlb3ZlciIsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmF0dHIoInIiLCByICogMS4xKQ0KICAgICAgICAgIGxldCBjbGFzc04gPSBkMy5zZWxlY3QodGhpcykuYXR0cigiY2xhc3MiKTsNCiAgICAgICAgICBpZiAoY2xhc3NOID09ICdsaW5lUG9pbnQnKSB7DQogICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXR0cigib3BhY2l0eSIsIDEpLmF0dHIoInIiLCA1KQ0KICAgICAgICAgIH0NCiAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLmYiICsgZGF0YVsnaWQnXSkNCiAgICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICAgICAgbGV0IHRyYW5zZm9ybWQgPSBkMy5zZWxlY3QodGhpcykuYXR0cigidHJhbnNmb3JtIikNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNmb3JtZC5zcGxpdCgiICIpWzBdICsgIiBzY2FsZSgxLjEpIg0KICAgICAgICAgICAgICB9KQ0KDQogICAgICAgICAgICBkMy5zZWxlY3RBbGwoIi5iYXNpY1JlbCIpDQogICAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICAgICAgbGV0IGNsYXNzTiA9IGQzLnNlbGVjdCh0aGlzKS5hdHRyKCJjbGFzcyIpOw0KICAgICAgICAgICAgICAgIGxldCBjbGFzc05MaXN0ID0gY2xhc3NOLnNwbGl0KCIgIik7DQogICAgICAgICAgICAgICAgbGV0IGpnID0gMDsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNsYXNzTkxpc3QubGVuZ3RoIC0gMTsgaSsrKSB7DQogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc291cmNlJyArIGRhdGFbJ2lkJ10sIGNsYXNzTkxpc3RbaV0pDQogICAgICAgICAgICAgICAgICBpZiAoJ3NvdXJjZScgKyBkYXRhWydpZCddID09IGNsYXNzTkxpc3RbaV0pIHsgamcgPSAxOyB9DQogICAgICAgICAgICAgICAgICBpZiAoJ3RhcmdldCcgKyBkYXRhWydpZCddID09IGNsYXNzTkxpc3RbaV0pIHsgamcgPSAxOyB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChqZyA9PSAxKSB7DQogICAgICAgICAgICAgICAgICBjbGFzc04gKz0gIiBhY3RpdmVTIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIGNsYXNzTjsNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIC5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmF0dHIoInIiLCByKQ0KICAgICAgICAgIGxldCBjbGFzc04gPSBkMy5zZWxlY3QodGhpcykuYXR0cigiY2xhc3MiKTsNCiAgICAgICAgICBpZiAoY2xhc3NOID09ICdsaW5lUG9pbnQnKSB7DQogICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXR0cigib3BhY2l0eSIsIDApLmF0dHIoInIiLCA1KQ0KICAgICAgICAgIH0NCiAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLmYiICsgZGF0YVsnaWQnXSkNCiAgICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICAgICAgbGV0IHRyYW5zZm9ybWQgPSBkMy5zZWxlY3QodGhpcykuYXR0cigidHJhbnNmb3JtIikNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNmb3JtZC5zcGxpdCgiICIpWzBdICsgIiBzY2FsZSgxKSINCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgicGF0aCIpDQogICAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICAgICAgbGV0IHRoaXNTZWxlY3QgPSBkMy5zZWxlY3QodGhpcykNCiAgICAgICAgICAgICAgICBsZXQgY2xhc3NOID0gdGhpc1NlbGVjdC5hdHRyKCJjbGFzcyIpOw0KICAgICAgICAgICAgICAgIGxldCBjbGFzc05MaXN0ID0gY2xhc3NOLnNwbGl0KCIgIikNCiAgICAgICAgICAgICAgICBpZiAoY2xhc3NOTGlzdFtjbGFzc05MaXN0Lmxlbmd0aCAtIDFdID09ICJhY3RpdmVTIikgew0KICAgICAgICAgICAgICAgICAgY2xhc3NOID0gIiI7DQogICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNsYXNzTkxpc3QubGVuZ3RoIC0gMTsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGNsYXNzTiArPSBjbGFzc05MaXN0W2ldICsgIiAiOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gY2xhc3NODQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAub24oIm1vdXNlZG93biIsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmF0dHIoInIiLCByKTsNCiAgICAgICAgICBkMy5zZWxlY3RBbGwoIi5mIiArIGRhdGFbJ2lkJ10pDQogICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgICAgbGV0IHRyYW5zZm9ybWQgPSBkMy5zZWxlY3QodGhpcykuYXR0cigidHJhbnNmb3JtIikNCiAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zZm9ybWQuc3BsaXQoIiAiKVswXSArICIgc2NhbGUoMSkiDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIGxldCB0aGlzSWQgPSB0aGlzLmlkLnNwbGl0KCJfIilbMV07DQogICAgICAgICAgbGV0IHRoaXNEYXRhID0gb0RhdGEuZmluZChmdW5jdGlvbiAoYSkgeyByZXR1cm4gYVsnaWQnXSA9PSB0aGlzSWQgfSkNCiAgICAgICAgICBsZXQgdGhpc1RpbWUgPSB0aGlzRGF0YVsndGltZSddOw0KICAgICAgICAgIF90aGlzLmNsaWNrX0VudCh0aGlzVGltZSk7DQogICAgICAgICAgLy8gY29uc29sZS5sb2codGhpc1RpbWUsdGhpc0lkLHRoaXNEYXRhKQ0KICAgICAgICB9KQ0KICAgICAgLy8gLm9uKCIiKQ0KICAgIH0sDQogICAgZHJhd1RpbWVMaW5lKHN2ZywgcGF0aCwgc3Ryb2tlLCB3aWR0aCwgc3Ryb2tlX2Rhc2hhcnJheSA9ICIwIiwgaWROYW1lLCBjbGFzc05hbWUpIHsNCiAgICAgIHN2Zy5hcHBlbmQoJ3BhdGgnKQ0KICAgICAgICAuYXR0cignZCcsIHBhdGgudG9TdHJpbmcoKSkNCiAgICAgICAgLmF0dHIoJ3N0cm9rZScsIHN0cm9rZSkNCiAgICAgICAgLmF0dHIoJ2NsYXNzJywgY2xhc3NOYW1lKQ0KICAgICAgICAuYXR0cignaWQnLCBpZE5hbWUpDQogICAgICAgIC5hdHRyKCJzdHJva2UtZGFzaGFycmF5Iiwgc3Ryb2tlX2Rhc2hhcnJheSkNCiAgICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsIHdpZHRoKQ0KICAgICAgICAuYXR0cignZmlsbCcsICdub25lJykNCiAgICAgICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbiAoZCkgew0KICAgICAgICAgIGxldCB0aGlzU2VsZWN0ID0gZDMuc2VsZWN0KHRoaXMpDQogICAgICAgICAgbGV0IGNsYXNzTiA9IHRoaXNTZWxlY3QuYXR0cigiY2xhc3MiKTsNCiAgICAgICAgICBsZXQgaWROID0gdGhpc1NlbGVjdC5hdHRyKCJpZCIpOw0KICAgICAgICAgIGlmIChjbGFzc04uc3BsaXQoIiAiKVswXSA9PSAiYmFzaWNSZWwiKSB7DQogICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXR0cigiY2xhc3MiLCBjbGFzc04gKyAiIGFjdGl2ZVMiKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIC5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgbGV0IHRoaXNTZWxlY3QgPSBkMy5zZWxlY3QodGhpcykNCiAgICAgICAgICBsZXQgY2xhc3NOID0gdGhpc1NlbGVjdC5hdHRyKCJjbGFzcyIpOw0KICAgICAgICAgIGxldCBjbGFzc05MaXN0ID0gY2xhc3NOLnNwbGl0KCIgIikNCiAgICAgICAgICBpZiAoY2xhc3NOTGlzdFtjbGFzc05MaXN0Lmxlbmd0aCAtIDFdID09ICJhY3RpdmVTIikgew0KICAgICAgICAgICAgY2xhc3NOID0gIiI7DQogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNsYXNzTkxpc3QubGVuZ3RoIC0gMTsgaSsrKSB7DQogICAgICAgICAgICAgIGNsYXNzTiArPSBjbGFzc05MaXN0W2ldICsgIiAiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmF0dHIoImNsYXNzIiwgY2xhc3NOKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgfSwNCiAgICBkcmF3QXJjKHN2ZywgeCwgeSwgYXJjUGF0aCwgc3Ryb2tlLCBmaWxsLCBjbGFzc05hbWUsIHN0cm9rZV9kYXNoYXJyYXkgPSAiMCIsIHdpZHRoID0gMykgew0KICAgICAgc3ZnLmFwcGVuZCgicGF0aCIpDQogICAgICAgIC5hdHRyKCJkIiwgYXJjUGF0aCkNCiAgICAgICAgLmF0dHIoImNsYXNzIiwgY2xhc3NOYW1lKQ0KICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgeCArICIsIiArIHkgKyAiKSIpDQogICAgICAgIC5hdHRyKCJzdHJva2UiLCBzdHJva2UpDQogICAgICAgIC5hdHRyKCdzdHJva2Utd2lkdGgnLCB3aWR0aCkNCiAgICAgICAgLmF0dHIoInN0cm9rZS1kYXNoYXJyYXkiLCBzdHJva2VfZGFzaGFycmF5KQ0KICAgICAgICAuYXR0cigic3Ryb2tlLWxpbmVqb2luIiwgInJvdW5kIikNCiAgICAgICAgLmF0dHIoImZpbGwiLCBmaWxsKQ0KICAgIH0sDQogICAgdXBkYXRhKCkgew0KICAgICAgDQogICAgY29uc3QgX3RoaXMgPSB0aGlzOw0KICAgICAgX3RoaXMuZHJhd3Byb2NEYXRhKCk7DQogICAgfSwNCiAgICBjbGlja19FbnQodGltZSkgew0KICAgICAgdGhpcy4kZW1pdCgidGltZUR1ciIsIHRpbWUpOw0KICAgIH0sDQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgY29uc3QgX3RoaXMgPSB0aGlzOw0KICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgIF90aGlzLnVwZGF0YSgpOw0KDQogICAgfSk7DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgY29uc3QgX3RoaXMgPSB0aGlzDQogICAgLy8gX3RoaXMudGFibGVEYXRhLmZpbmQoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGRbJ2tleSddID09ICduYW1lJyB9KVsndmFsdWUnXSA9ICdDb21wdXRlciBOZXR3b3JrJzsNCiAgICB0aGlzLiRidXMuJG9uKCdzZWxlY3RFbnQnLCAodmFsKSA9PiB7DQogICAgIF90aGlzLmN1ckVudElkID0gdmFsOw0KICAgICBfdGhpcy51cGRhdGEoKTsNCiAgICB9KTsNCiAgICB0aGlzLiRidXMuJG9uKCdhbGxQcm9ibGVtJywgKHZhbCkgPT4gew0KICAgICBfdGhpcy5wcm9ibGVtc0RhdGEgPSB2YWw7DQogICAgICAvLyBfdGhpcy51cGRhdGEoKTsNCiAgICB9KTsNCiAgICANCiAgICB0aGlzLiRidXMuJG9uKCdDb25jZXB0VHJlZScsICh2YWwpID0+IHsNCiAgICAgIF90aGlzLmNvbmNlcHRUcmVlID0gdmFsOw0KICAgIH0pOw0KICAgIA0KICAgIHRoaXMuJGJ1cy4kb24oJ1Byb19Db24nLCAodmFsKSA9PiB7DQogICAgICBfdGhpcy5wcm9ibGVtQ29uY2VwdERhdGEgPSB2YWw7DQogICAgfSk7DQogIH0sDQogIC8vIGJlZm9yZURlc3Ryb3koKSB7DQogIC8vICAgY2xlYXJJbnRlcnZhbCh0aGlzLm1vdmVUaW1lcik7DQogIC8vIH0sDQp9IA0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/ProblemContentPanel","sourcesContent":["<!-- eslint-disable no-unused-vars -->\r\n<!-- eslint-disable no-unused-vars -->\r\n\r\n<template>\r\n  <div class=\"procPanel\">\r\n    <div class=\"panelHead\">Content View </div>\r\n      <!-- //SupportPanel</div> -->\r\n    <div id=\"procPanelDiv\" class=\"panelBody\" ref=\"procPanelDiv\">\r\n      <div id=\"questionSer\" ref=\"questionSer\"></div>\r\n      \r\n        <el-table stripe  :data=\"tableData\" style=\"width: 100%;height:80%;overflow-y: scroll;scrollbar-width: none;\"         \r\n        :row-style=\"iRowStyle\"\r\n        :cell-style=\"iCellStyle\"\r\n        :header-row-style=\"iHeaderRowStyle\"\r\n        :header-cell-style=\"iHeaderCellStyle\">\r\n          <!-- <el-table-column prop=\"key\" label=\"\" width=\"190\">\r\n          </el-table-column> -->\r\n          <!-- eslint-disable -->\r\n          <el-table-column prop=\"value\" label=\"\" width=\"480\">\r\n            <template slot-scope=\"scope\">\r\n              <div v-if=\"scope.row.key == 'Title'\">\r\n                <div style=\"float: left;height: 40px;font-size: 24px;color: rgb(103, 103, 103);\">\r\n                {{ scope.row.value }}</div>\r\n\r\n              </div>\r\n              <div v-if=\"scope.row.key == 'Type'\">\r\n                <!-- <div style=\"float: left;height:15px;font-size: 17px;\"> -->\r\n                <div style=\"float: left;height: auto;;font-size: 20px;color: rgb(103, 103, 103);\">\r\n                  {{ `${scope.row.value}` }}</div>\r\n              </div>\r\n              <div v-if=\"scope.row.key == 'ContentT'\">\r\n                <div style=\"float: left;height: auto;;font-size: 22px;color: rgb(103, 103, 103);\">\r\n                {{ scope.row.value }}</div>\r\n              </div>\r\n              <div v-if=\"scope.row.key == 'Content'\">\r\n                <div style=\"float: left;height: auto;\">\r\n                  &nbsp;&nbsp;{{ `&nbsp;&nbsp;${scope.row.value}` }}</div>\r\n              </div>\r\n              <div v-if=\"scope.row.key == 'InputT'\">\r\n                <div style=\"float: left;height: auto;;font-size: 22px;color: rgb(103, 103, 103);\">\r\n                {{ scope.row.value }}</div>\r\n              </div>\r\n              <div v-if=\"scope.row.key == 'Input'\">\r\n                <div style=\"float: left;height: auto;\">\r\n                  &nbsp;&nbsp;{{ `&nbsp;&nbsp;${scope.row.value}` }}</div>\r\n              </div>\r\n              <div v-if=\"scope.row.key == 'OutT'\">\r\n                <div style=\"float: left;height: auto;;font-size: 22px;color: rgb(103, 103, 103);\">\r\n                {{ scope.row.value }}</div>\r\n              </div>\r\n              <div v-if=\"scope.row.key == 'Out'\">\r\n                <div style=\"float: left;height: auto;\">\r\n                  &nbsp;&nbsp;{{ `&nbsp;&nbsp;${scope.row.value}` }}</div>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n          <!-- eslint-enable -->\r\n        </el-table>\r\n      <!-- <div id=\"connectCon\" ref=\"connectCon\">\r\n      </div> -->\r\n      <div id=\"procData\" ref=\"procData\">\r\n\r\n      </div>\r\n    </div>\r\n    </div>\r\n</template>\r\n  \r\n<script>\r\nimport * as d3 from 'd3'\r\nimport tools from \"@/utils/tools.js\";\r\n\r\nexport default {\r\n  props: [],\r\n  data() {\r\n    return {\r\n      typeRadio: \"cell State\",\r\n      treeData: null,\r\n      toolsState: '',\r\n      problemsData:[],\r\n      problemConceptData:[],\r\n      conceptTree:[],\r\n      // confirmUrl: require(\"@/assets/img/confirm.svg\"),\r\n      // cancelUrl: require(\"@/assets/img/cancel.svg\"),\r\n      // toolsButsUrl: require(\"@/assets/img/toolsButs.png\"),\r\n      // addNodeSonUrl: require(\"@/assets/img/addNode1.png\"),\r\n      // addNodePerUrl: require(\"@/assets/img/addNode2.png\"),\r\n      // addLinkBasicUrl: require(\"@/assets/img/addLink.png\"),\r\n      // nameinput: \"Random Variables\",\r\n      nameinput: \"Fundamental Graphs\",\r\n      // nameinput: \"Trees\",\r\n      lectureStyleValue: [0, 80],\r\n      tableData: [{\r\n        key: 'Title',\r\n        value: '',\r\n      },{\r\n        key: 'Type',\r\n        value: '',\r\n      }, {\r\n        key: 'ContentT',\r\n        value: '',\r\n      }, {\r\n        key: 'Content',\r\n        value: '',\r\n      }, {\r\n        key: 'InputT',\r\n        value: '',\r\n      }, {\r\n        key: 'Input',\r\n        value: '',\r\n      },{\r\n        key: 'OutT',\r\n        value: '',\r\n      },{\r\n        key: 'Out',\r\n        value: '',\r\n      }\r\n      ],\r\n      \r\n      graphGTransformK: 1,\r\n      graphGTransformX: 0,\r\n      graphGTransformY: 10,\r\n      curEntId: \"\",\r\n      insertEntId: \"\",\r\n      insertSourceEntId: \"-1\",\r\n      insertTargetEntId: \"-1\",\r\n      sonList: [],\r\n      minDImportance: 0,\r\n      maxDImportance: 0,\r\n      minDRelevance: 0,\r\n      maxDRelevance: 0,\r\n      maxDDuration: 0,\r\n      maxTotalDuration: 0,\r\n      importanceMinColor: \"rgb(203, 230, 209)\",\r\n      importanceMaxColor: \"rgb(22, 144, 207)\",\r\n      totalDuration: 1000,\r\n      importanceColor_linear: null,\r\n      importanceCompute_color: null,\r\n      relevanceScale_linear: null,\r\n      totalDurationScale_linear: null,\r\n      DivisionDataList: [],\r\n      rootDivisionDataList: [],\r\n      entDivisionDataList: [],\r\n      colorMap: {},\r\n      rootColorMap:{},\r\n      videoDuration: 570,\r\n      selectRectId: \"\",\r\n      selectRectClass: \"\",\r\n      topicLineWidth: 1000,\r\n      topicLineHeight: 1000,\r\n      moveLineWidth: 1000,\r\n      entLineWidth: 1000,\r\n      totalSonDuration: 0,\r\n      treeGTransformK:1,\r\n      treeGTransformX:10,\r\n      treeGTransformY:100,\r\n      margin: { top: 5, right: 5, bottom: 5, left: 5 },\r\n      // mcolor: [\r\n      //   \"rgb(255,60,60)\",\r\n      //   \"rgb(155,20,100)\",\r\n      //   \"rgb(255,83,255)\",\r\n      //   \"rgb(200,100,50)\",\r\n      //   \"rgb(235,135,162)\",\r\n      //   \"rgb(200,200,102)\",\r\n      //   \"rgb(255,178,101)\",\r\n      //   \"rgb(63,151,134)\",\r\n      //   \"rgb(83,155,255)\",\r\n      //   \"rgb(50,200,120)\",\r\n      //   \"rgb(2,50,200)\",\r\n      //   \"rgb(0,122,244)\",\r\n      //   \"rgb(150,122,244)\",\r\n      //   \"rgb(168,168,255)\",\r\n      //   \"rgb(200,200,200)\",\r\n      // ],\r\n      mcolor: [\r\n        \"rgb(91, 107, 255)\",\r\n        \"rgb(6, 214, 160)\",\r\n        \"rgb(255, 120, 90)\",\r\n        \"rgb(125, 98, 211)\",\r\n        \"rgb(255, 113, 212)\",\r\n        \"rgb(112, 214, 255)\",\r\n        \"rgb(255, 159, 28)\",\r\n        \"rgb(255, 77, 109)\",\r\n      ],\r\n      mLightcolor: [\r\n        \"#ff9c9c\",\r\n        \"#cc88b0\",\r\n        \"#ffa8ff\",\r\n        \"#e3b097\",\r\n        \"#f4c3d0\",\r\n        \"#f4f4d0\",\r\n        \"#ffd8b1\",\r\n        \"#9ecac2\",\r\n        \"#a8ccff\",\r\n        \"#97e3ba\",\r\n        \"#6f8be0\",\r\n        \"rgb(0,122,244)\",\r\n        \"#b6a2f7\",\r\n        \"rgb(168,168,255)\",\r\n        \"rgb(200,200,200)\",\r\n      ],\r\n    };\r\n  },\r\n  watch: {\r\n    typeRadio(val) {\r\n    },\r\n    lectureStyleValue(val){\r\n      console.log(val);\r\n      let mid = (val[0]+val[1])/2;\r\n      d3.select(\"#procData .el-slider__runway\")\r\n      .attr(\"style\",\"background: linear-gradient(90deg, #ff9c9c \"+mid+\"%,#6f8be0 \"+mid+\"%) !important\")\r\n    },\r\n    type(val) {\r\n    },\r\n    // selectEnt(val){\r\n    //   console.log(val);\r\n    // },\r\n    curEntId(curEntId) {\r\n    }\r\n  },\r\n  methods: {\r\n    selectType(v) {\r\n      // console.log(v)\r\n    },\r\n    \r\n\r\n    iRowStyle:function ({row, rowIndex}) {\r\n        return 'height:35px';\r\n    },\r\n    iHeaderRowStyle:function ({row, rowIndex}) {\r\n        return 'height:35px';\r\n    },\r\n    iCellStyle:function ({row, column, rowIndex, columnIndex}) {\r\n        return 'padding:2px'\r\n    },\r\n    iHeaderCellStyle:function ({row, column, rowIndex, columnIndex}) {\r\n        return 'padding:0px'\r\n    },\r\n    drawprocData() {\r\n      const _this = this;\r\n      const margin = _this.margin;\r\n      let width = this.$refs.procData.offsetWidth - margin.left - margin.right;\r\n      let height = this.$refs.procData.offsetHeight - margin.top - margin.bottom;\r\n      d3.select(\"#procData\").select(\"svg\").remove();\r\n      var svg = d3.select(\"#procData\").append(\"svg\")\r\n        .attr(\"id\", \"procEnt\")\r\n        .attr(\"width\", width)\r\n        .attr(\"height\", height);\r\n\r\n        let graphGTransformX = _this.graphGTransformX;\r\n      let graphGTransformY = _this.graphGTransformY;\r\n      let graphGTransformK = _this.graphGTransformK;\r\n      \r\n      let stx = 0;\r\n      let sty = 0;\r\n      let stk = 1;\r\n      let entG = svg.append(\"g\").attr(\"id\", \"entG\").attr(\"width\", width).attr(\"height\", height);\r\n      let sonG = svg.append(\"g\").attr(\"id\", \"sonG\").attr(\"width\", width).attr(\"height\", height).attr(\"transform\", \"translate(1,320)\");\r\n        var graphZoom = d3.zoom()\r\n        .scaleExtent([0, 100])\r\n        .on(\"start\", (e) => {\r\n          sty = e.transform.y;\r\n          stx = e.transform.x;\r\n          stk = e.transform.k;\r\n        })\r\n        .on('zoom', (e) => {\r\n          graphGTransformX = _this.graphGTransformX //+ e.transform.x - stx;\r\n          graphGTransformY = _this.graphGTransformY + e.transform.y - sty;\r\n          graphGTransformK = _this.graphGTransformK //+ e.transform.k - stk;\r\n          entG.attr('transform', 'translate(' + (graphGTransformX) + ',' + (graphGTransformY) + ') scale(' + (graphGTransformK) + ')')\r\n        })\r\n        .on('end', (e) => {\r\n          _this.graphGTransformX = graphGTransformX;\r\n          _this.graphGTransformY = graphGTransformY;\r\n          _this.graphGTransformK = graphGTransformK;\r\n          entG.attr('transform', 'translate(' + (graphGTransformX) + ',' + (graphGTransformY) + ') scale(' + (graphGTransformK) + ')')\r\n        });\r\n\r\n      svg.call(graphZoom);\r\n      // _this.entG = entG;\r\n      // _this.sonG = sonG;\r\n      _this.drawQuestionSurface(entG);\r\n      // _this.drawSonLine(_this.data[1]);\r\n    },\r\n    drawSonLine(data) {\r\n      const _this = this;\r\n      let psvg = d3.select(\"#sonG\");\r\n      let w = psvg.attr(\"width\") - 1;\r\n      let h = 40;\r\n      psvg.remove();\r\n      let svg = d3.select(\"#procEnt\").append(\"g\").attr(\"id\", \"sonG\").attr(\"width\", w + 1).attr(\"height\", h + 2).attr(\"transform\", \"translate(1,320)\");\r\n      let color_linear = _this.importanceColor_linear;\r\n      let compute_color = _this.importanceCompute_color;\r\n      let oData = _this.data;\r\n      _this.entLineWidth = w;\r\n      // if (sonList.length > 0) {\r\n      svg.selectAll().remove();\r\n      svg.append(\"line\")\r\n        .attr(\"x1\", 0)\r\n        .attr(\"y1\", h / 2)\r\n        .attr(\"x2\", w)\r\n        .attr(\"y2\", h / 2)\r\n        .attr(\"stroke\", \"rgb(200,200,200)\")\r\n        .attr(\"stroke-width\", \"5px\");\r\n\r\n      let totalSonDuration = 0;\r\n      let dataIndex = oData.map(item => item.id).indexOf(data['id']);\r\n      let startIndex = ((dataIndex - 2) > 0) ? (dataIndex - 2) : (0);\r\n      let endIndex = ((dataIndex + 1) < oData.length) ? (dataIndex + 2) : (oData.length - 1);\r\n\r\n      let dataLi = tools.deepClone(oData).splice(startIndex, endIndex - startIndex + 1);\r\n      // let data = sonList;\r\n      for (let i = 0; i < dataLi.length; i++) {\r\n        let curEnt = oData.find(function (d) { return d['id'] == dataLi[i]['id'] });\r\n        let time = tools.time2seconds(curEnt['time'][0]);\r\n        let endTime = tools.time2seconds(curEnt['time'][1]);\r\n        totalSonDuration += endTime - time;\r\n      }\r\n      _this.totalSonDuration = totalSonDuration;\r\n      let cxLinear = d3.scaleLinear([0, totalSonDuration], [0, w]);\r\n      let DivisionDataList = [];\r\n      // let colorIndex = 0;\r\n      let prex = 0;\r\n      for (let i = 0; i < dataLi.length; i++) {\r\n        let curEnt = oData.find(function (d) { return d['id'] == dataLi[i]['id'] });\r\n        let temp = tools.deepClone(curEnt);\r\n        if (DivisionDataList.length != 0) {\r\n          DivisionDataList[DivisionDataList.length - 1]['nextId'] = temp['id'];\r\n          temp['preId'] = DivisionDataList[DivisionDataList.length - 1]['id'];\r\n        }\r\n        else { temp['preId'] = \"-1\"; }\r\n        DivisionDataList.push(temp);\r\n        let time = tools.time2seconds(curEnt['time'][0]);\r\n        let endTime = tools.time2seconds(curEnt['time'][1]);\r\n        let curEntDur = endTime - time;\r\n        let cx = prex;\r\n        let endx = prex + cxLinear(curEntDur);\r\n        let importanceValue = curEnt['attribute']['importance'];\r\n        let entColor = compute_color(color_linear(importanceValue));\r\n        if (i != 0) {\r\n          _this.drawRect(svg, cx - 5, 0, 5, h, h / 2, \"division_\" + curEnt['id'], \"entdivisionLine\", \"rgb(250,250,250)\", 5, '', 0);\r\n        }\r\n        if (dataLi[i]['id'] == data['id']) _this.drawRect(svg, cx, 0, endx - cx, h, h / 2, \"procEnt_\" + curEnt['id'], \"procEnt\", entColor, 1, \"black\", 1)//color[_this.colorMap[son['id']]], 5, 0.1)\r\n        else _this.drawRect(svg, cx, 0, endx - cx, h, h / 2, \"procEnt_\" + curEnt['id'], \"procEnt\", entColor, 1, \"rgb(150,150,150)\", 1)//color[_this.colorMap[son['id']]], 5, 0.1)\r\n        prex = endx;\r\n      }\r\n      DivisionDataList[DivisionDataList.length - 1]['nextId'] = \"-1\";\r\n      _this.entDivisionDataList = DivisionDataList;\r\n    },\r\n    drawEntityOri(data) {\r\n      const _this = this;\r\n      let psvg = d3.select(\"#entG\");\r\n      let w = psvg.attr(\"width\");\r\n      let h = psvg.attr(\"height\");\r\n      psvg.remove();\r\n      let svg = d3.select(\"#procEnt\").append(\"g\").attr(\"id\", \"entG\").attr(\"width\", w).attr(\"height\", h);\r\n      let color_linear = _this.importanceColor_linear;\r\n      let compute_color = _this.importanceCompute_color;\r\n      let totalDurationValue = data['totalDuration'];\r\n      let rScale = _this.totalDurationScale_linear;\r\n      let r = rScale(totalDurationValue);\r\n      let oData = _this.data;\r\n      let x = svg.attr(\"width\") / 2;\r\n      let y = 120;\r\n      let importanceValue = data['attribute']['importance'];\r\n      let relevanceValue = data['attribute']['relevance'];\r\n      svg.selectAll().remove();\r\n\r\n      if (data['type'] == '1') {\r\n        let area = tools.calcTriangle(x, y, r);\r\n        _this.drawTriangle(svg, \"rgb(250, 199, 88)\", area, \"rgb(250, 199, 88)\");\r\n      }\r\n      else {\r\n\r\n        let cy = y;\r\n        let totalDuration = _this.totalDuration;\r\n        let timeLineScale_linear = d3.scaleLinear([0, totalDuration], [x - r * Math.sqrt(3) / 2, x + r * Math.sqrt(3) / 2])\r\n        let timeLineHighScale_linear = d3.scaleLinear([0, _this.maxDDuration], [0, r * (1 + Math.sqrt(3) / 2)])\r\n        let circleColor = compute_color(color_linear(importanceValue));\r\n        _this.drawCircle(svg, x, cy, r, circleColor, data, 1, \"entCircle\", \"entCircle_\" + data['id']);\r\n\r\n        r = r * Math.sqrt(3) / 2;\r\n        y += r / 2;\r\n        let path = d3.path();\r\n\r\n\r\n        path.moveTo(x - r, y);\r\n        let lineLi = [data['time']];\r\n        let linePoint = [{ 'id': data['id'], 'time': data['time'], 'x': 0, 'y': 0 }];\r\n        for (let srel in data[\"similarityRel\"]) {\r\n          let cdata = oData.find(function (d) { return d['id'] == data[\"similarityRel\"][srel] })\r\n          lineLi.push(cdata['time'])\r\n          linePoint.push({ 'id': cdata['id'], 'time': cdata['time'], 'x': 0, 'y': 0 })\r\n        }\r\n        const sortmt = (a, b) => {\r\n          return tools.time2seconds(a[0]) - tools.time2seconds(b[0]);\r\n        }\r\n        const sortlp = (a, b) => {\r\n          return tools.time2seconds(a['time'][0]) - tools.time2seconds(b['time'][0]);\r\n        }\r\n        lineLi = lineLi.sort(sortmt);\r\n        linePoint = linePoint.sort(sortlp);\r\n        let lineData = [[x - r, y]];\r\n        for (let t = 0; t < lineLi.length; t++) {\r\n          let startT = lineLi[t][0];\r\n          let endT = lineLi[t][1];\r\n          let startS = tools.time2seconds(startT);\r\n          let endS = tools.time2seconds(endT);\r\n          let duration = endS - startS;\r\n\r\n          let startx = timeLineScale_linear((startS - duration * 10));\r\n          let endx = timeLineScale_linear((endS + duration * 10));\r\n\r\n          let startyf = y + timeLineHighScale_linear((duration)) / 8;\r\n          let startyf1 = y + timeLineHighScale_linear((duration)) / 8;\r\n          let endyf = y + timeLineHighScale_linear((duration)) / 8;\r\n          let endyf1 = y + timeLineHighScale_linear((duration)) / 8;\r\n          let yz = y - timeLineHighScale_linear((duration));\r\n          let midx = timeLineScale_linear((endS + startS) / 2);\r\n          linePoint[t]['x'] = midx;\r\n          linePoint[t]['y'] = y - timeLineHighScale_linear(duration) / 1.7;\r\n          let y1 = y;\r\n          if (startx < (lineData[lineData.length - 1][0])) {\r\n            if (t > 0) {\r\n              lineData.splice(lineData.length - 3, 3);\r\n              startx = (lineData[lineData.length - 1][0] + midx) / 2;\r\n              y1 = lineData[lineData.length - 1][1] + timeLineHighScale_linear((duration)) / 2;\r\n              startyf = lineData[lineData.length - 1][1] + timeLineHighScale_linear((duration)) / 2;\r\n              startyf1 = lineData[lineData.length - 1][1] + timeLineHighScale_linear((duration)) / 2;\r\n            }\r\n          }\r\n          let startx1 = startx + (timeLineScale_linear((startS + duration)) - timeLineScale_linear((startS)));\r\n          let endx1 = endx - (timeLineScale_linear((startS + duration)) - timeLineScale_linear((startS)));\r\n          let startx2 = startx1 + (timeLineScale_linear((startS + duration)) - timeLineScale_linear((startS)));\r\n          let endx2 = endx1 - (timeLineScale_linear((startS + duration)) - timeLineScale_linear((startS)));\r\n          if (endx > (r + x)) endx = r + x;\r\n          if (startx1 < (lineData[lineData.length - 1][0])) startx1 = lineData[lineData.length - 1][0];\r\n          if (endx1 > (r + x)) endx1 = r + x;\r\n          if (startx2 < (lineData[lineData.length - 1][0])) startx2 = lineData[lineData.length - 1][0];\r\n          if (endx2 > (r + x)) endx2 = r + x;\r\n          lineData.push([startx, y1], [startx1, startyf1], [startx2, startyf], [midx, yz], [endx2, endyf], [endx1, endyf1], [endx, y])\r\n        }\r\n        lineData.push([x + r, y])\r\n        let curve_generator = d3.line()\r\n          .x((d) => d[0])\r\n          .y((d) => {\r\n            let h = Math.sqrt(Math.pow(r, 2) - Math.pow((d[0] - (x - r)), 2));\r\n            if ((y - d[1]) > (h + r * Math.sqrt(3) / 2))\r\n              return y - (h + r * Math.sqrt(3) / 2) + 2;\r\n            return d[1];\r\n          })\r\n          .curve(d3.curveBasis)\r\n        _this.drawTimeLine(svg, curve_generator(lineData), \"white\", 2, '0', 'sonLine ', 'sonLine ');\r\n\r\n\r\n        for (let p = 0; p < linePoint.length; p++) {\r\n          _this.drawCircle(svg, linePoint[p]['x'], linePoint[p]['y'], 5, \"red\", linePoint[p], 0, \"linePoint\", \"linePoint_\" + linePoint[p]['id']);\r\n        }\r\n\r\n        // \"1\": \"rgb(145, 204, 117)\",\r\n        //   \"2\": \"rgb(84, 112, 198)\",\r\n        //   \"3\": \"rgb(238, 102, 102)\",\r\n        let typeColor = {\r\n          \"1\": \"#ff9c9c\",\r\n          \"2\": \"#f4f4d0\",\r\n          \"3\": \"#6f8be0\",\r\n        };\r\n        let duration = tools.time2seconds(data['time'][0]) - tools.time2seconds(data['time'][1]);\r\n        let typeData = data['attribute']['expressions'];\r\n        let sonList = data['son'];\r\n        let typeArcScale_linear = d3.scaleLinear([0, duration], [0, Math.PI * 2]);\r\n\r\n        var typeStartR = 0//Math.PI/4;\r\n\r\n        var typeStepR = Math.PI / 1;\r\n\r\n        if (sonList.length > 0) {\r\n          for (let i in typeData) {\r\n            let color = typeColor[i];\r\n            let typeDurition = typeData[i];\r\n            let totalTypeSeconds = 0;\r\n            for (let d in typeDurition) {\r\n              totalTypeSeconds += (tools.time2seconds(typeDurition[d][1]) - tools.time2seconds(typeDurition[d][0]))\r\n            }\r\n            let typeStepR = typeArcScale_linear(totalTypeSeconds)//Math.PI/2;\r\n\r\n            let endAnglet = typeStartR + 1 * typeStepR\r\n            var dataset = { startAngle: typeStartR, endAngle: endAnglet }; //创建一个弧生成器\r\n            typeStartR = endAnglet;\r\n            var arcPath = d3.arc()\r\n              .innerRadius(r + 10)\r\n              .outerRadius(r + 25);\r\n            var pathArc = arcPath(dataset);\r\n            _this.drawArc(svg, x, y - r / 2, pathArc, color, color, 'type f' + data['id'] + \" t\" + i);\r\n          }\r\n          let sonTotal = 0;\r\n          let sonNum = 0\r\n          for (let s in sonList) {\r\n            let sonData = oData.find(function (d) { return d['id'] == sonList[s] });\r\n            let sonDur = sonData['totalDuration'];\r\n            sonTotal += sonDur;\r\n            sonNum += 1;\r\n          }\r\n          let skipArc = Math.PI / (sonNum + 2);\r\n          let timeSonLinear = d3.scaleLinear([0, sonTotal], [0, Math.PI * 2 - skipArc * sonNum]);\r\n          let timeSonHeighLinear = d3.scaleLinear([0, sonTotal], [40, 40]);\r\n\r\n          let timeSonColor_linear = d3.scaleLinear().domain([0, sonTotal]).range([0, 1]);\r\n          let timeSonCompute_color = d3.interpolate(\"white\", circleColor);\r\n          var sonStartR = 0;//-Math.PI/2;\r\n          for (let s in sonList) {\r\n            let sonData = oData.find(function (d) { return d['id'] == sonList[s] });\r\n            let sonDur = sonData['totalDuration'];\r\n\r\n            let sonStepR = timeSonLinear(sonDur)//Math.PI/2;\r\n\r\n            let endAnglet = sonStartR + sonStepR;\r\n            var dataset = { startAngle: sonStartR, endAngle: endAnglet }; //创建一个弧生成器\r\n            sonStartR = endAnglet;\r\n            let color = 'blue';\r\n            var arcPath = d3.arc()\r\n              .innerRadius(r + 28)\r\n              .outerRadius(r + timeSonHeighLinear(sonDur));\r\n            var arcMidPath = d3.arc()\r\n              .innerRadius(0)\r\n              .outerRadius(r + 32);\r\n            var pathArc = arcPath(dataset);\r\n\r\n            endAnglet = sonStartR + skipArc;\r\n            var midDataset = { startAngle: sonStartR, endAngle: endAnglet }; //创建一个弧生成器\r\n\r\n            let jiantouPath = d3.path();\r\n            jiantouPath.arc(x, y - r / 2, r + 32, sonStartR - Math.PI / 2, endAnglet - Math.PI / 2);\r\n\r\n            sonStartR += skipArc;\r\n            var pathMidArc = arcMidPath(midDataset);\r\n            let timeSonColor = compute_color(color_linear(sonData['attribute']['importance']));\r\n            _this.drawArc(svg, x, y - r / 2, pathArc, timeSonColor, timeSonColor, 'son f' + data['id'] + \" s\" + sonList[s], '0');\r\n            if (s != sonList.length - 1) {\r\n              _this.drawTimeLine(svg, jiantouPath, \"rgb(200,200,200)\", 3, '9,5', 'midArc ', 'midArc ');\r\n            }\r\n          }\r\n\r\n        }\r\n\r\n\r\n      }\r\n      let txts = _this.nameinput.split(\" \")\r\n      _this.drawTxt(svg, x - r - 32, y + r + 50, r * 2 + 64, txts, \"grey\");\r\n    },\r\n    drawEntity(data) {\r\n      const _this = this;\r\n      let psvg = d3.select(\"#entG\");\r\n      let w = psvg.attr(\"width\");\r\n      let h = psvg.attr(\"height\");\r\n      psvg.remove();\r\n      let svg = d3.select(\"#procEnt\").append(\"g\").attr(\"id\", \"entG\").attr(\"width\", w).attr(\"height\", h);\r\n      let color_linear = _this.importanceColor_linear;\r\n      let compute_color = _this.importanceCompute_color;\r\n      let totalDurationValue = data['totalDuration'];\r\n      let rScale = _this.totalDurationScale_linear;\r\n      let r = rScale(totalDurationValue);\r\n      let oData = _this.data;\r\n      let x = svg.attr(\"width\") / 2;\r\n      let y = 120;\r\n      let importanceValue = data['attribute']['importance'];\r\n      let relevanceValue = data['attribute']['relevance'];\r\n      svg.selectAll().remove();\r\n\r\n      if (data['type'] == '1') {\r\n        let area = tools.calcTriangle(x, y, r);\r\n        _this.drawTriangle(svg, \"rgb(250, 199, 88)\", area, \"rgb(250, 199, 88)\");\r\n      }\r\n      else {\r\n\r\n        let cy = y;\r\n        let totalDuration = _this.totalDuration;\r\n        let timeLineScale_linear = d3.scaleLinear([0, totalDuration], [x - r * Math.sqrt(3) / 2, x + r * Math.sqrt(3) / 2])\r\n        let timeLineHighScale_linear = d3.scaleLinear([0, _this.maxDDuration], [0, r * (1 + Math.sqrt(3) / 2)])\r\n        let circleColor = compute_color(color_linear(importanceValue));\r\n        _this.drawCircle(svg, x, cy, r, circleColor, data, 1, \"entCircle\", \"entCircle_\" + data['id']);\r\n\r\n        r = r * Math.sqrt(3) / 2;\r\n        y += r / 2;\r\n        let path = d3.path();\r\n\r\n\r\n        path.moveTo(x - r, y);\r\n        let lineLi = [data];\r\n        let linePoint = [{ 'id': data['id'], 'time': data['time'], 'x': 0, 'y': 0 }];\r\n        let jgidL = [data['id']];\r\n        let similarityRelsli = [data[\"similarityRel\"]];\r\n        while(similarityRelsli.length>0){\r\n          let similarityRels = similarityRelsli[0];\r\n          similarityRelsli.splice(0,1);\r\n          let jg = 0;\r\n          for (let srel in similarityRels) {\r\n            let cdata = oData.find(function (d) { return d['id'] == similarityRels[srel] });\r\n            if(jgidL.indexOf(cdata['id'])==-1){\r\n              similarityRelsli.push(cdata[\"similarityRel\"])\r\n              jg=1;\r\n              lineLi.push(cdata)\r\n              jgidL.push(cdata['id'])\r\n              linePoint.push({ 'id': cdata['id'], 'time': cdata['time'], 'x': 0, 'y': 0 })\r\n            }\r\n          }\r\n          // if(jg==0){\r\n            // break;\r\n          // }\r\n        }\r\n        \r\n        const sortmt = (a, b) => {\r\n          return tools.time2seconds(a[0]) - tools.time2seconds(b[0]);\r\n        }\r\n        const sortlp = (a, b) => {\r\n          return tools.time2seconds(a['time'][0]) - tools.time2seconds(b['time'][0]);\r\n        }\r\n        console.log(lineLi);\r\n        lineLi = lineLi.sort(sortlp);\r\n        linePoint = linePoint.sort(sortlp);\r\n        let lineData = [[x - r * Math.sqrt(3)/2-4 , y]];\r\n        for (let t = 0; t < lineLi.length; t++) {\r\n          let startT = lineLi[t]['time'][0];\r\n          let duration =lineLi[t]['totalDuration']\r\n          // let endT = lineLi[t]['time'][1];\r\n          let startS = tools.time2seconds(startT);\r\n          let endS = startS +duration;\r\n          // let startx = timeLineScale_linear((startS - duration * 10));\r\n          // let endx = timeLineScale_linear((endS + duration * 10));\r\n          let limst = (x - r * Math.sqrt(3) / 2);\r\n          let limed = (x + r * Math.sqrt(3) / 2);\r\n          let startx = (limst<timeLineScale_linear((startS)))?(timeLineScale_linear((startS))):(limst);\r\n          let endx = (limed>timeLineScale_linear((endS)))?(timeLineScale_linear((endS))):(limed);\r\n          // let midx = timeLineScale_linear((endS + startS) / 2);\r\n          let midx = (startx+endx) / 2;\r\n          let ys = y;\r\n          let yz = y - timeLineHighScale_linear((duration));\r\n          linePoint[t]['x'] = midx;\r\n          linePoint[t]['y'] = y - timeLineHighScale_linear(duration) / 1.7;\r\n          // if (startx < (lineData[lineData.length - 1][0])) {\r\n            if (t > 0) {\r\n              lineData.splice(lineData.length - 1, 1);\r\n              midx+=t*5;\r\n              startx = midx-((midx-(lineData[lineData.length - 1][0] + midx) / 2))/2;\r\n              endx+=t*5;\r\n              ys = y+(y-lineData[lineData.length - 1][1])/3\r\n            }\r\n            console.log(ys)\r\n          // }\r\n          lineData.push([startx, ys],[midx, yz],[endx, y])}\r\n        lineData.push([x + r, y])\r\n        let curve_generator = d3.line()\r\n          .x((d) => d[0])\r\n          .y((d) => {\r\n            let h = Math.sqrt(Math.pow(r, 2) - Math.pow((d[0] - (x - r)), 2));\r\n            if ((y - d[1]) > (h + r * Math.sqrt(3) / 2))\r\n              return y - (h + r * Math.sqrt(3) / 2) + 2;\r\n            return d[1];\r\n          })\r\n          .curve(d3.curveBundle )\r\n          // .curve(d3.curveCatmullRom  )\r\n          // .curve(d3.curveBasis)\r\n        _this.drawTimeLine(svg, curve_generator(lineData), \"white\", 2, '0', 'sonLine ', 'sonLine ');\r\n\r\n\r\n        for (let p = 0; p < linePoint.length; p++) {\r\n          _this.drawCircle(svg, linePoint[p]['x'], linePoint[p]['y'], 5, \"red\", linePoint[p], 0, \"linePoint\", \"linePoint_\" + linePoint[p]['id']);\r\n        }\r\n\r\n        // \"1\": \"rgb(145, 204, 117)\",\r\n        //   \"2\": \"rgb(84, 112, 198)\",\r\n        //   \"3\": \"rgb(238, 102, 102)\",\r\n        let typeColor = {\r\n          \"1\": \"#ff9c9c\",\r\n          \"2\": \"#f4f4d0\",\r\n          \"3\": \"#6f8be0\",\r\n        };\r\n        let duration = tools.time2seconds(data['time'][0]) - tools.time2seconds(data['time'][1]);\r\n        let typeData = data['attribute']['expressions'];\r\n        let sonList = data['son'];\r\n        let sons = [sonList];\r\n        while (sons.length > 0) {\r\n          let curSonList = sons[0];\r\n          sons.splice(0, 1);\r\n          if (curSonList.length > 0) {\r\n            for (let s in curSonList) {\r\n              let sonData = oData.find(function (d) { return d['id'] == curSonList[s] });\r\n              let sonTypeData = sonData['attribute']['expressions'];\r\n\r\n              for (let t in sonTypeData) {\r\n                let typeDurition = sonTypeData[t];\r\n                for (let d in typeDurition) {\r\n                   typeData[t].push(typeDurition[d])\r\n                }\r\n              }\r\n              sons.push(sonData['son']);\r\n            }\r\n          }\r\n        }\r\n        var typeStartR = 0//Math.PI/4;\r\n\r\n        var typeStepR = Math.PI / 1;\r\n\r\n        if (sonList.length > 0) {\r\n          let typeTotalDur = 0;\r\n          for (let t in typeData) {\r\n            let typeDurition = typeData[t];\r\n            for (let d in typeDurition) {\r\n              typeTotalDur += (tools.time2seconds(typeDurition[d][1]) - tools.time2seconds(typeDurition[d][0]))\r\n            }\r\n          }\r\n          let typeArcScale_linear = d3.scaleLinear([0, typeTotalDur], [0, Math.PI * 2]);\r\n          for (let i in typeData) {\r\n            let color = typeColor[i];\r\n            let typeDurition = typeData[i];\r\n            let totalTypeSeconds = 0;\r\n            for (let d in typeDurition) {\r\n              totalTypeSeconds += (tools.time2seconds(typeDurition[d][1]) - tools.time2seconds(typeDurition[d][0]))\r\n            }\r\n            if(totalTypeSeconds>0)\r\n            {let typeStepR = typeArcScale_linear(totalTypeSeconds)//Math.PI/2;\r\n\r\n            let endAnglet = typeStartR + 1 * typeStepR\r\n            var dataset = { startAngle: typeStartR, endAngle: endAnglet }; //创建一个弧生成器\r\n            typeStartR = endAnglet;\r\n            var arcPath = d3.arc()\r\n              .innerRadius(r + 10)\r\n              .outerRadius(r + 25);\r\n            var pathArc = arcPath(dataset);\r\n            _this.drawArc(svg, x, y - r / 2, pathArc, color, color, 'type f' + data['id'] + \" t\" + i);}\r\n          }\r\n\r\n          let sonTotal = 0;\r\n          let sonNum = 0\r\n          for (let s in sonList) {\r\n            let sonData = oData.find(function (d) { return d['id'] == sonList[s] });\r\n            let sonDur = sonData['totalDuration'];\r\n            sonTotal += sonDur;\r\n            sonNum += 1;\r\n          }\r\n          let skipArc = Math.PI / (sonNum + 2);\r\n          let timeSonLinear = d3.scaleLinear([0, sonTotal], [0, Math.PI * 2 - skipArc * sonNum]);\r\n          let timeSonHeighLinear = d3.scaleLinear([0, sonTotal], [40, 40]);\r\n\r\n          let timeSonColor_linear = d3.scaleLinear().domain([0, sonTotal]).range([0, 1]);\r\n          let timeSonCompute_color = d3.interpolate(\"white\", circleColor);\r\n          var sonStartR = 0;//-Math.PI/2;\r\n          for (let s in sonList) {\r\n            let sonData = oData.find(function (d) { return d['id'] == sonList[s] });\r\n            let sonDur = sonData['totalDuration'];\r\n\r\n            let sonStepR = timeSonLinear(sonDur)//Math.PI/2;\r\n\r\n            let endAnglet = sonStartR + sonStepR;\r\n            var dataset = { startAngle: sonStartR, endAngle: endAnglet }; //创建一个弧生成器\r\n            sonStartR = endAnglet;\r\n            let color = 'blue';\r\n            var arcPath = d3.arc()\r\n              .innerRadius(r + 28)\r\n              .outerRadius(r + timeSonHeighLinear(sonDur));\r\n            var arcMidPath = d3.arc()\r\n              .innerRadius(0)\r\n              .outerRadius(r + 32);\r\n            var pathArc = arcPath(dataset);\r\n\r\n            endAnglet = sonStartR + skipArc;\r\n            var midDataset = { startAngle: sonStartR, endAngle: endAnglet }; //创建一个弧生成器\r\n\r\n            let jiantouPath = d3.path();\r\n            jiantouPath.arc(x, y - r / 2, r + 32, sonStartR - Math.PI / 2, endAnglet - Math.PI / 2);\r\n\r\n            sonStartR += skipArc;\r\n            var pathMidArc = arcMidPath(midDataset);\r\n            let timeSonColor = compute_color(color_linear(sonData['attribute']['importance']));\r\n            _this.drawArc(svg, x, y - r / 2, pathArc, timeSonColor, timeSonColor, 'son f' + data['id'] + \" s\" + sonList[s], '0');\r\n            if (s != sonList.length - 1) {\r\n              _this.drawTimeLine(svg, jiantouPath, \"rgb(200,200,200)\", 3, '9,5', 'midArc ', 'midArc ');\r\n            }\r\n          }\r\n\r\n        }\r\n\r\n\r\n      }\r\n      let txts = data['name'].split(\" \")\r\n      let tx = x - r - 30;\r\n      let ty = y + r +60;\r\n      let tw = r*2;\r\n      tx = x;\r\n      if(data['son'].length==0){\r\n        tx = x//-r-10;\r\n        ty = y+r*2;\r\n      }\r\n      if(data['id']==\"3\"){\r\n        tx = x-10;\r\n        ty = y+r*2;\r\n      }\r\n      if(data['id']==\"4\"){\r\n        tx = x+10;\r\n        ty = y+r*2;\r\n      }\r\n      // if(data['type']=='1'){\r\n      //   tx = x-r/2;\r\n      //   ty = y+r*2;\r\n      // }\r\n\r\n      _this.drawTxt(svg, tx, ty,tw , txts, \"grey\",22, `text_${data['id']}`);\r\n      // let txts = _this.nameinput.split(\" \")\r\n      // _this.drawTxt(svg, x - r - 32, y + r + 50, r * 2 + 64, txts, \"grey\");\r\n    },\r\n    drawQuestionSurface(svg){\r\n      const _this = this;\r\n      let psvg =svg\r\n      let w = psvg.attr(\"width\");\r\n      let h = psvg.attr(\"height\");\r\n      psvg.select(\"#procG\").remove();\r\n      let backg = psvg.append(\"g\").attr(\"id\", \"backG\").attr(\"width\", w).attr(\"height\", h);\r\n      let prog = psvg.append(\"g\").attr(\"id\", \"procG\").attr(\"width\", w).attr(\"height\", h);\r\n      let proData = _this.problemsData;\r\n      let problemConceptData = _this.problemConceptData;\r\n      let conceptTree = _this.conceptTree;\r\n\r\n      console.log(conceptTree,problemConceptData);\r\n      let proId = _this.curEntId;\r\n      if(proId == \"\"){return;}\r\n      let curPro = proData.find(function(p){return (p['id']).toString() == (proId).toString()})\r\n      let title = curPro['title'];\r\n      let type = curPro['type'];\r\n      let tx=10;\r\n      let ty = 20;\r\n      // ty = _this.drawTxt(prog,tx,ty,w,`Title:${title}`,\"black\",22,'title');\r\n      let content = curPro['content'].split(\"###\");\r\n\r\n      let input =\" \";\r\n      let output =\"\";\r\n      if(proId == '1568086661408161798'){\r\n        title = \"ASCII\";\r\n        content = [\"已知字符 'a' 的ASCII码为 97，执行下列语句的输出是_______。 `printf ('%d, %c', 'b', 'b'+1 )` ;\"];\r\n        _this.tableData.find(function(t){return t['key'] == 'InputT'})['value'] = \"\";\r\n        input = \"A.98, b   B.错误 C. 98, 99   D. 98, c\"\r\n        _this.tableData.find(function(t){return t['key'] == 'OutT'})['value'] = \"\";\r\n        // output = \"C. 98, 99   D. 98, c\"\r\n      }\r\n      else if(proId == '1568086661408161798'){\r\n        title = \"ASCII\";\r\n        content = [\"已知字符 'a' 的ASCII码为 97，执行下列语句的输出是_______。 `printf ('%d, %c', 'b', 'b'+1 )` ;\"];\r\n        _this.tableData.find(function(t){return t['key'] == 'InputT'})['value'] = \"\";\r\n        input = \"A.98, b   B.错误 C. 98, 99   D. 98, c\"\r\n        _this.tableData.find(function(t){return t['key'] == 'OutT'})['value'] = \"\";\r\n        // output = \"C. 98, 99   D. 98, c\"\r\n      }\r\n      else if(type == 'PROGRAMMING'){\r\n        input =\" \"+ content[1].split(\"输入格式:\")[1];\r\n        output =\"\"+ content[2].split(\"输出格式:\")[1];\r\n        title = `Title: ${' '} ${title}`;\r\n        _this.tableData.find(function(t){return t['key'] == 'ContentT'})['value'] = \"Description:\";\r\n        _this.tableData.find(function(t){return t['key'] == 'InputT'})['value'] = \"Input Format:\";\r\n        _this.tableData.find(function(t){return t['key'] == 'OutT'})['value'] = \"Output Format:\";\r\n      }\r\n      else{\r\n        title = \"\";\r\n\r\n        _this.tableData.find(function(t){return t['key'] == 'InputT'})['value'] = \"\";\r\n        _this.tableData.find(function(t){return t['key'] == 'OutT'})['value'] = \"\";\r\n      }\r\n      _this.tableData.find(function(t){return t['key'] == 'Title'})['value'] = `${' '} ${title}`;\r\n      _this.tableData.find(function(t){return t['key'] == 'Type'})['value'] = `Type: ${type}`;\r\n      _this.tableData.find(function(t){return t['key'] == 'Content'})['value'] = content[0];\r\n      _this.tableData.find(function(t){return t['key'] == 'Input'})['value'] = ` ${input}`;\r\n      _this.tableData.find(function(t){return t['key'] == 'Out'})['value'] = ` ${output}`;\r\n      console.log(_this.tableData)\r\n      let conMap = {}\r\n      let conName = []\r\n      for(let i=0;i<conceptTree.length;i++){\r\n        conMap[conceptTree[i]['id']] = -1;\r\n        conName.push(conceptTree[i]['id'])\r\n      }\r\n      // var compare = function (x, y) {//比较函数\r\n      //   let lenx = x.length;\r\n      //   let leny = y.length;\r\n      //   if(lenx!=leny)return lenx>leny;\r\n      //   return x[\"problemSetId\"] > y[\"problemSetId\"] \r\n      // };\r\n      // conName.sort(compare)\r\n\r\n      for (let i = 0; i < problemConceptData.length; i++) {\r\n        let conceptId = problemConceptData[i]['conceptId'];\r\n        let problemId = problemConceptData[i]['problem'];\r\n        let type = problemConceptData[i]['type'];\r\n        if(problemId == proId){\r\n          conMap[conceptId] = type;\r\n        }\r\n      }\r\n      let prex = 30;\r\n      let prey = 60;\r\n      let textWidth = _this.drawTxt(prog, 14, 20, \"Related concepts：\", \"rgb(103, 103, 103)\", 22, `kd`);\r\n      conceptTree.forEach(con=>{\r\n        let jg = conMap[con['id']];\r\n        if(jg!=-1){\r\n          let recColor = \"rgb(218, 127, 136)\";\r\n          if(jg==0)\r\n            recColor = \"grey\"\r\n          let textWidth = _this.drawTxt(prog, prex, prey, con['name'], \"white\", 16, `ProSur_con${con['id']}`);\r\n          _this.drawRect(backg, prex-4, prey-20, textWidth+8,28,  10, recColor, \"1\", \"none\", \"1\", `ProSur_coRect${con['id']}`, 'ProSur');\r\n        // prey+=10;\r\n          prex+=textWidth+20;\r\n          if(prex>270){\r\n            prex = 30;\r\n            prey+=30\r\n          }\r\n        }\r\n        // let textWidth = _this.drawTxt(prog, prex, prey, con['id']+''+conMap[con['id']], \"black\", 10, `FigNet_con`);\r\n\r\n          // _this.drawTxt(prog,prex,prey,w,`Title:${content}`,\"black\",16,'title');\r\n      })\r\n      // _this.drawTxt(prog,tx,ty+25,w,`Title:${content}`,\"black\",16,'title');\r\n    },    \r\n    \r\n    drawRect(svg, x, y, w, h, rx, fill, strokeWidth, stroke, opacity, idName, className) {\r\n      d3.select(`#${idName}`).remove();\r\n      let rect = svg.append(\"rect\")\r\n        .attr(\"x\", x)\r\n        .attr(\"y\", y)\r\n        .attr(\"width\", w)\r\n        .attr(\"height\", h)\r\n        .attr(\"id\", idName)\r\n        .attr(\"class\", className)\r\n        .attr(\"opacity\", opacity)\r\n        .attr(\"fill\", fill)\r\n        .attr(\"rx\", rx)\r\n        .attr(\"stroke\", stroke)\r\n        .attr(\"stroke-width\", strokeWidth)\r\n      return rect;\r\n    },\r\n    drawTxt(svg, x, y, text, fill, fontsize = 12, idN, an = 'start') {\r\n      let txt = svg.append(\"text\")\r\n        .attr(\"y\", y)\r\n        .attr(\"x\", x)\r\n        .attr(\"id\", idN)\r\n        .attr(\"fill\", fill)\r\n        .attr(\"font-size\", fontsize)\r\n        .style(\"text-anchor\", an)\r\n        .text(text)\r\n      \r\n        let textWidth = document.getElementById(`${idN}`).getBBox().width;\r\n      return textWidth;\r\n    },\r\n    drawTxtW(svg, x, y, width, txts, fill, fontsize = 12, idN) {\r\n      let tx = x;\r\n      let ty = y;\r\n      let preWidth = 0;\r\n      let preIdN = 0;\r\n      let pretext = ''\r\n      for (let t = 0; t < txts.length; t++) {\r\n        pretext +=\" \"+ txts[t];\r\n        let txt = svg.append(\"text\")\r\n          .attr(\"y\", ty)\r\n          .attr(\"x\", tx)\r\n          .attr(\"id\", `${idN}_${t}`)\r\n          .attr(\"fill\", fill)\r\n          .attr(\"font-size\", fontsize)\r\n          .style(\"text-anchor\", \"start\")\r\n          .text(pretext)\r\n        let textWidth = document.getElementById(`${idN}_${t}`).getBBox().width;\r\n        if((textWidth>width)||(t==txts.length -1)){\r\n          pretext = '';\r\n          tx = x;\r\n          ty += 25;\r\n        }\r\n        else{\r\n          txt.remove()\r\n        }\r\n        preWidth += textWidth;\r\n      }\r\n      return ty;\r\n    },\r\n    drawTxtOri1(svg, x, y, width, txts, fill,fontsize=12) {\r\n      let tx = x;\r\n      let ty = y;\r\n      for (let t = 0; t < txts.length; t++) {\r\n\r\n      let txt =   svg.append(\"text\")\r\n          .attr(\"y\", ty)\r\n          .attr(\"x\", tx)\r\n          .attr(\"fill\", fill)\r\n          .attr(\"font-size\",fontsize)\r\n          .style(\"text-anchor\", \"middle\")\r\n          .text(txts[t])\r\n        tx += txts[t].length * 14;\r\n        if (tx - x > width) {\r\n          tx = x;\r\n          ty += 25;\r\n        }\r\n      }\r\n    },\r\n    drawTxtOri(svg, x, y, width, txts, fill) {\r\n      let tx = x;\r\n      let ty = y;\r\n      for (let t = 0; t < txts.length; t++) {\r\n\r\n        svg.append(\"text\")\r\n          .attr(\"y\", ty)\r\n          .attr(\"x\", tx)\r\n          .attr(\"fill\", fill)\r\n          .text(txts[t])\r\n        tx += txts[t].length * 10;\r\n        if (tx - x > width) {\r\n          tx = x;\r\n          ty += 25;\r\n        }\r\n      }\r\n    },\r\n    drawTriangle(svg, color, points, stroke, opacity = 1) {\r\n      svg.append(\"polygon\")\r\n        .attr(\"points\", points)\r\n        .attr(\"fill\", color)\r\n        .attr(\"stroke-linejoin\", \"round\")\r\n        .attr(\"opacity\", opacity)\r\n        .attr(\"stroke\", stroke)\r\n        .attr(\"stroke-width\", \"15px\");\r\n    },\r\n    drawCircle(svg, x, y, r, fill, data, opacity, className = 'entCircle', idName) {\r\n      const _this = this;\r\n      const oData = _this.data\r\n      svg.append(\"circle\")\r\n        .attr(\"id\", idName)\r\n        .attr(\"class\", className)\r\n        .attr(\"opacity\", opacity)\r\n        .attr(\"cx\", x)\r\n        .attr(\"cy\", y)\r\n        .attr(\"r\", r)\r\n        .attr(\"fill\", fill)\r\n        .on(\"mouseover\", function (d) {\r\n          d3.select(this).attr(\"r\", r * 1.1)\r\n          let classN = d3.select(this).attr(\"class\");\r\n          if (classN == 'linePoint') {\r\n            d3.select(this).attr(\"opacity\", 1).attr(\"r\", 5)\r\n          }\r\n          else {\r\n            d3.selectAll(\".f\" + data['id'])\r\n              .attr(\"transform\", function (d) {\r\n                let transformd = d3.select(this).attr(\"transform\")\r\n                return transformd.split(\" \")[0] + \" scale(1.1)\"\r\n              })\r\n\r\n            d3.selectAll(\".basicRel\")\r\n              .attr(\"class\", function (d) {\r\n                let classN = d3.select(this).attr(\"class\");\r\n                let classNList = classN.split(\" \");\r\n                let jg = 0;\r\n                for (let i = 0; i < classNList.length - 1; i++) {\r\n                  console.log('source' + data['id'], classNList[i])\r\n                  if ('source' + data['id'] == classNList[i]) { jg = 1; }\r\n                  if ('target' + data['id'] == classNList[i]) { jg = 1; }\r\n                }\r\n                if (jg == 1) {\r\n                  classN += \" activeS\";\r\n                }\r\n                return classN;\r\n              })\r\n          }\r\n        })\r\n        .on(\"mouseleave\", function (d) {\r\n          d3.select(this).attr(\"r\", r)\r\n          let classN = d3.select(this).attr(\"class\");\r\n          if (classN == 'linePoint') {\r\n            d3.select(this).attr(\"opacity\", 0).attr(\"r\", 5)\r\n          }\r\n          else {\r\n            d3.selectAll(\".f\" + data['id'])\r\n              .attr(\"transform\", function (d) {\r\n                let transformd = d3.select(this).attr(\"transform\")\r\n                return transformd.split(\" \")[0] + \" scale(1)\"\r\n              })\r\n            d3.selectAll(\"path\")\r\n              .attr(\"class\", function (d) {\r\n                let thisSelect = d3.select(this)\r\n                let classN = thisSelect.attr(\"class\");\r\n                let classNList = classN.split(\" \")\r\n                if (classNList[classNList.length - 1] == \"activeS\") {\r\n                  classN = \"\";\r\n                  for (let i = 0; i < classNList.length - 1; i++) {\r\n                    classN += classNList[i] + \" \";\r\n                  }\r\n                }\r\n                return classN\r\n              })\r\n          }\r\n        })\r\n        .on(\"mousedown\", function (d) {\r\n          d3.select(this).attr(\"r\", r);\r\n          d3.selectAll(\".f\" + data['id'])\r\n            .attr(\"transform\", function (d) {\r\n              let transformd = d3.select(this).attr(\"transform\")\r\n              return transformd.split(\" \")[0] + \" scale(1)\"\r\n            })\r\n          let thisId = this.id.split(\"_\")[1];\r\n          let thisData = oData.find(function (a) { return a['id'] == thisId })\r\n          let thisTime = thisData['time'];\r\n          _this.click_Ent(thisTime);\r\n          // console.log(thisTime,thisId,thisData)\r\n        })\r\n      // .on(\"\")\r\n    },\r\n    drawTimeLine(svg, path, stroke, width, stroke_dasharray = \"0\", idName, className) {\r\n      svg.append('path')\r\n        .attr('d', path.toString())\r\n        .attr('stroke', stroke)\r\n        .attr('class', className)\r\n        .attr('id', idName)\r\n        .attr(\"stroke-dasharray\", stroke_dasharray)\r\n        .attr('stroke-width', width)\r\n        .attr('fill', 'none')\r\n        .on('mouseover', function (d) {\r\n          let thisSelect = d3.select(this)\r\n          let classN = thisSelect.attr(\"class\");\r\n          let idN = thisSelect.attr(\"id\");\r\n          if (classN.split(\" \")[0] == \"basicRel\") {\r\n            d3.select(this).attr(\"class\", classN + \" activeS\");\r\n          }\r\n        })\r\n        .on('mouseleave', function (d) {\r\n          let thisSelect = d3.select(this)\r\n          let classN = thisSelect.attr(\"class\");\r\n          let classNList = classN.split(\" \")\r\n          if (classNList[classNList.length - 1] == \"activeS\") {\r\n            classN = \"\";\r\n            for (let i = 0; i < classNList.length - 1; i++) {\r\n              classN += classNList[i] + \" \";\r\n            }\r\n            d3.select(this).attr(\"class\", classN);\r\n          }\r\n        })\r\n    },\r\n    drawArc(svg, x, y, arcPath, stroke, fill, className, stroke_dasharray = \"0\", width = 3) {\r\n      svg.append(\"path\")\r\n        .attr(\"d\", arcPath)\r\n        .attr(\"class\", className)\r\n        .attr(\"transform\", \"translate(\" + x + \",\" + y + \")\")\r\n        .attr(\"stroke\", stroke)\r\n        .attr('stroke-width', width)\r\n        .attr(\"stroke-dasharray\", stroke_dasharray)\r\n        .attr(\"stroke-linejoin\", \"round\")\r\n        .attr(\"fill\", fill)\r\n    },\r\n    updata() {\r\n      \r\n    const _this = this;\r\n      _this.drawprocData();\r\n    },\r\n    click_Ent(time) {\r\n      this.$emit(\"timeDur\", time);\r\n    },\r\n  },\r\n  created() {\r\n    const _this = this;\r\n    this.$nextTick(() => {\r\n      _this.updata();\r\n\r\n    });\r\n  },\r\n  mounted() {\r\n    const _this = this\r\n    // _this.tableData.find(function (d) { return d['key'] == 'name' })['value'] = 'Computer Network';\r\n    this.$bus.$on('selectEnt', (val) => {\r\n     _this.curEntId = val;\r\n     _this.updata();\r\n    });\r\n    this.$bus.$on('allProblem', (val) => {\r\n     _this.problemsData = val;\r\n      // _this.updata();\r\n    });\r\n    \r\n    this.$bus.$on('ConceptTree', (val) => {\r\n      _this.conceptTree = val;\r\n    });\r\n    \r\n    this.$bus.$on('Pro_Con', (val) => {\r\n      _this.problemConceptData = val;\r\n    });\r\n  },\r\n  // beforeDestroy() {\r\n  //   clearInterval(this.moveTimer);\r\n  // },\r\n} \r\n</script>\r\n\r\n<style>\r\n@import './index.css';\r\n</style>\r\n"]}]}