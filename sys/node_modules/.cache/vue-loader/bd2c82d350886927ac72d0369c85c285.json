{"remainingRequest":"D:\\Cailibuhong\\auto-generatingTestPaper\\Auto-generatingTestPaper\\sys\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Cailibuhong\\auto-generatingTestPaper\\Auto-generatingTestPaper\\sys\\src\\components\\proConSankey\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Cailibuhong\\auto-generatingTestPaper\\Auto-generatingTestPaper\\sys\\src\\components\\proConSankey\\index.vue","mtime":1702351546110},{"path":"D:\\Cailibuhong\\auto-generatingTestPaper\\Auto-generatingTestPaper\\sys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681618859467},{"path":"D:\\Cailibuhong\\auto-generatingTestPaper\\Auto-generatingTestPaper\\sys\\node_modules\\babel-loader\\lib\\index.js","mtime":1681618859957},{"path":"D:\\Cailibuhong\\auto-generatingTestPaper\\Auto-generatingTestPaper\\sys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681618859467},{"path":"D:\\Cailibuhong\\auto-generatingTestPaper\\Auto-generatingTestPaper\\sys\\node_modules\\vue-loader\\lib\\index.js","mtime":1681618860114}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyBpbXBvcnQgeyBwYXJhbSB9IGZyb20gJ3NlcnZlci9hcGknOw0KaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnDQppbXBvcnQgeyBvbk1vdW50ZWQsIHJlZiB9IGZyb20gJ3Z1ZSc7DQppbXBvcnQgZmlsZW5hbWVzIGZyb20gIkAvdXRpbHMvZmlsZU5hbWUiOw0KaW1wb3J0IGRvbXRvaW1hZ2UgZnJvbSAnZG9tLXRvLWltYWdlJzsNCi8vIGltcG9ydCBUZXN0SnNvbiBmcm9tICJAL2Fzc2V0cy9qc29uL2Nhc2UyX2Zpbi5qc29uIjsNCi8vIGltcG9ydCBUZXN0UmVsSnNvbiBmcm9tICJAL2Fzc2V0cy9qc29uL2Nhc2UyX2Zpbl9yZWwuanNvbiI7DQppbXBvcnQgQ2lyY2xlIGZyb20gJ0AvdXRpbHMvZ2VvbWV0cnkvY2lyY2xlJzsNCmltcG9ydCB0b29scyBmcm9tICJAL3V0aWxzL3Rvb2xzLmpzIjsNCmltcG9ydCBkcmF3VG9vbHMgZnJvbSAiQC91dGlscy9kcmF3aW5nVG9vbHMuanMiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIHByb3BzOiBbInRvb2xzU3RhdGUiXSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgcHJvTmFtZTogJycsDQogICAgICBzY2F0dGVyRGF0YTonJywNCiAgICAgIGFsbFByb2JsZW1zOicnLA0KICAgICAgYWxsQ29uY2VwdHM6JycsDQogICAgICBhbGxQcm9JbkNvbkdQVFNjYXR0ZXJEYXRhOicnLA0KICAgICAgYWxscHJvQ29uU2Fua2V5RGF0YTonJywNCiAgICAgIHByb1R5cGU6ICIiLA0KICAgICAgc2VsZWN0OiAnJywNCiAgICAgIHByb0Zvcm06IHsNCiAgICAgICAgbmFtZTogIiIsDQogICAgICAgIHR5cGU6ICIiLA0KICAgICAgICBjb250ZW50OiAiIg0KICAgICAgfSwNCiAgICAgIGF0dHJDb2xvcmxpc3Q6W10sDQogICAgICByb290U3ZnOicnLA0KICAgICAgd2lkdGg6MCwNCiAgICAgIGhlaWdodDowLA0KICAgICAgdGhpc0lkOiAxMCwNCiAgICAgIG1hcmdpbjogeyB0b3A6IDUsIHJpZ2h0OiA1LCBib3R0b206IDUsIGxlZnQ6IDUgfSwNCiAgICB9Ow0KICB9LA0KDQogIHdhdGNoOiB7DQogICAgdHlwZSh2YWwpIHsNCiAgICB9LA0KICAgIHRvb2xBZGRSZWwodmFsKSB7DQogICAgfSwNCiAgICB0b29sc1N0YXRlOiB7DQogICAgICBkZWVwOiB0cnVlLA0KICAgICAgaGFuZGxlcih2YWwpIHsNCiAgICAgICAgY29uc29sZS5sb2codmFsKQ0KICAgICAgICB0aGlzLnRvb2xBZGRSZWwgPSB2YWxbJ2FkZFJlbCddOw0KICAgICAgICB0aGlzLnRvb2xBZGRSZWxNYWluID0gdmFsWydhZGRSZWxNYWluJ107DQogICAgICAgIHRoaXMudG9vbERlbFJlbCA9IHZhbFsnZGVsUmVsJ107DQogICAgICB9DQogICAgfSwNCiAgICBzY2F0dGVyRGF0YSh2YWwpew0KICAgICAgY29uc3QgX3RoaXMgPSB0aGlzOw0KICAgICAgX3RoaXMudXBkYXRhQWxsKCk7DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZ2V0QWxsU2NhdHRlckRhdGEoKSB7DQogICAgICBjb25zdCBfdGhpcyA9IHRoaXM7DQogICAgICB0aGlzLiRodHRwDQogICAgICAgIC5nZXQoIi9hcGkvcHJvYmxlbS9hbGxQcm9JbkNvbkdQVFNjYXR0ZXJEYXRhIiwgeyBwYXJhbXM6IHt9IH0sIHt9KQ0KICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgICBfdGhpcy5hbGxQcm9JbkNvbkdQVFNjYXR0ZXJEYXRhID0gcmVzcG9uc2UuYm9keTsNCiAgICAgICAgICBjb25zb2xlLmxvZygiYWxsUHJvSW5Db25HUFRTY2F0dGVyRGF0YSIscmVzcG9uc2UuYm9keSk7DQogICAgICAgICAgX3RoaXMuc2NhdHRlckRhdGEgPSBfdGhpcy5hbGxQcm9JbkNvbkdQVFNjYXR0ZXJEYXRhOw0KICAgICAgICAgIC8vIF90aGlzLmFsbFJlbGF0aW9uc2hpcHMgPSByZXNwb25zZS5ib2R5Ow0KICAgICAgICAgIC8vIF90aGlzLmRyYXduZXRQRGF0YSgpOw0KICAgICAgICB9KTsNCiAgICAgIHRoaXMuJGh0dHANCiAgICAgICAgLmdldCgiL2FwaS9jb25jZXB0L2FsbHByb0NvblNhbmtleURhdGEiLCB7IHBhcmFtczoge30gfSwge30pDQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgIF90aGlzLmFsbHByb0NvblNhbmtleURhdGEgPSByZXNwb25zZS5ib2R5Ow0KICAgICAgICAgIGNvbnNvbGUubG9nKCJhbGxwcm9Db25TYW5rZXlEYXRhIixyZXNwb25zZS5ib2R5KTsNCiAgICAgICAgICAvLyBfdGhpcy5hbGxSZWxhdGlvbnNoaXBzID0gcmVzcG9uc2UuYm9keTsNCiAgICAgICAgICAvLyBfdGhpcy5kcmF3bmV0UERhdGEoKTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgICBkcmF3UHJvQ29uU2NhdHRlcihzdmcpIHsNCiAgICAgIGNvbnN0IF90aGlzID0gdGhpczsNCiAgICAgIGNvbnN0IG1hcmdpbiA9IF90aGlzLm1hcmdpbjsNCiAgICAgIGxldCBwc3ZnID0gc3ZnDQogICAgICBsZXQgd2lkdGggPSBwc3ZnLmF0dHIoIndpZHRoIik7DQogICAgICBsZXQgaGVpZ2h0ID0gcHN2Zy5hdHRyKCJoZWlnaHQiKTsNCiAgICAgIHBzdmcuc2VsZWN0KCIjbmV0UEciKS5yZW1vdmUoKTsNCiAgICAgIC8vIGxldCBwcm9nID0gcHN2Zy5hcHBlbmQoImciKS5hdHRyKCJpZCIsICJuZXRQRyIpLmF0dHIoIndpZHRoIiwgd2lkdGgpLmF0dHIoImhlaWdodCIsIGhlaWdodCk7DQogICAgICBsZXQgZ3JvdXBzID0gc3ZnLmFwcGVuZCgiZyIpLmF0dHIoImlkIiwgInByb0NvblNhbmtleUdyb3VwcyIpLmF0dHIoIndpZHRoIiwgd2lkdGgpLmF0dHIoImhlaWdodCIsIGhlaWdodCkNCiAgICAgIC8vIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgKyBncmFwaEdUcmFuc2Zvcm1YICsgJywnICsgZ3JhcGhHVHJhbnNmb3JtWSArICIpIHNjYWxlKCIgKyBncmFwaEdUcmFuc2Zvcm1LICsgIikiKTsNCiAgICAgIC8vIHRoaXMuZ3JvdXBzU3ZnID0gZ3JvdXBzOw0KDQogICAgICBsZXQgYmFja0cgPSBncm91cHMuYXBwZW5kKCJnIikuYXR0cigiaWQiLCAicHJvQ29uU2Fua2V5YmFja0ciKS5hdHRyKCJ3aWR0aCIsIHdpZHRoKS5hdHRyKCJoZWlnaHQiLCBoZWlnaHQpOw0KICAgICAgbGV0IGFyY0cgPSBncm91cHMuYXBwZW5kKCJnIikuYXR0cigiaWQiLCAicHJvQ29uU2Fua2V5YXJjRyIpLmF0dHIoIndpZHRoIiwgd2lkdGgpLmF0dHIoImhlaWdodCIsIGhlaWdodCk7DQogICAgICBsZXQgcmVsRyA9IGdyb3Vwcy5hcHBlbmQoImciKS5hdHRyKCJpZCIsICJwcm9Db25TYW5rZXlyZWxHIikuYXR0cigid2lkdGgiLCB3aWR0aCkuYXR0cigiaGVpZ2h0IiwgaGVpZ2h0KTsNCiAgICAgIGxldCBlbnRHID0gZ3JvdXBzLmFwcGVuZCgiZyIpLmF0dHIoImlkIiwgInByb0NvblNhbmtleWVudEciKS5hdHRyKCJ3aWR0aCIsIHdpZHRoKS5hdHRyKCJoZWlnaHQiLCBoZWlnaHQpOw0KICAgICAgbGV0IGZyb250RyA9IGdyb3Vwcy5hcHBlbmQoImciKS5hdHRyKCJpZCIsICJwcm9Db25TYW5rZXlmcm9udEciKS5hdHRyKCJ3aWR0aCIsIHdpZHRoKS5hdHRyKCJoZWlnaHQiLCBoZWlnaHQpOw0KDQogICAgICBsZXQgc2NhdHRlckRhdGEgPSBfdGhpcy5zY2F0dGVyRGF0YTsNCiAgICAgIGxldCB4TWF4TWluRFIgPSB0b29scy5nZXRNYXhNaW4oc2NhdHRlckRhdGEsICd4Jyk7DQogICAgICBsZXQgeU1heE1pbkRSID0gdG9vbHMuZ2V0TWF4TWluKHNjYXR0ZXJEYXRhLCAneScpOw0KICAgICAgbGV0IHNjYXR0ZXJ4TGluZWFyID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oW3hNYXhNaW5EUlsxXSwgeE1heE1pbkRSWzBdXSkucmFuZ2UoWzAsIHdpZHRoXSk7DQogICAgICBsZXQgc2NhdHRlcnlMaW5lYXIgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbeU1heE1pbkRSWzFdLCB5TWF4TWluRFJbMF1dKS5yYW5nZShbMCwgaGVpZ2h0LzJdKTsNCiAgICAgIGxldCBjb2xvckxpc3QgPSBfdGhpcy5hdHRyQ29sb3JsaXN0Ow0KICAgICAgY29uc3QgYWxsUHJvYmxlbXMgPSBfdGhpcy5hbGxQcm9ibGVtczsNCiAgICAgIGNvbnN0IGFsbENvbmNlcHRzID0gX3RoaXMuYWxsQ29uY2VwdHM7DQogICAgICBmb3IobGV0IGk9MDtpPHNjYXR0ZXJEYXRhLmxlbmd0aDtpKyspew0KICAgICAgICBsZXQgeCA9IHNjYXR0ZXJ4TGluZWFyKHNjYXR0ZXJEYXRhW2ldWyd4J10pOw0KICAgICAgICBsZXQgeSA9IHNjYXR0ZXJ5TGluZWFyKHNjYXR0ZXJEYXRhW2ldWyd5J10pOw0KICAgICAgICBsZXQgdHlwZSA9IHNjYXR0ZXJEYXRhW2ldWyd0eXBlJ107DQogICAgICAgIGlmKHR5cGUgPT0gImtwIil7DQogICAgICAgICAgbGV0IHBvaW50cyA9IGRyYXdUb29scy5jYWxjUmVndWxhclBvbHlnb25Qb2ludHMoMywgeCwgeSwgOCk7DQogICAgICAgICAgbGV0IHRyaWdhbCA9IGRyYXdUb29scy5kcmF3UG9seWdvbihlbnRHLCBwb2ludHMsIGBzY2F0dGVyQ2lyY2xlXyR7c2NhdHRlckRhdGFbaV1bJ3R5cGUnXX1fJHtzY2F0dGVyRGF0YVtpXVsnaWQnXX1gLCAnMHB4JywgImdyZXkiLCBjb2xvckxpc3RbcGFyc2VJbnQoc2NhdHRlckRhdGFbaV1bJ2tMYWInXSldKTsNCiAgICAgICAgICAvLyBkcmF3VG9vbHMuZHJhd0NpcmNsZShlbnRHLCB4LCB5LCA1LCBjb2xvckxpc3RbcGFyc2VJbnQoc2NhdHRlckRhdGFbaV1bJ2tMYWInXSldLCAxLCAxLCAxLCAnc2NhdHRlckNpcmNsZScsIGBzY2F0dGVyQ2lyY2xlXyR7c2NhdHRlckRhdGFbaV1bJ3R5cGUnXX1fJHtzY2F0dGVyRGF0YVtpXVsnaWQnXX1gKTsNCiAgICAgICAgICB0cmlnYWwub24oIm1vdXNlbW92ZSIsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgbGV0IHRzID0gZDMuc2VsZWN0KHRoaXMpOw0KICAgICAgICAgIGxldCB0cCA9IHRzLmF0dHIoImlkIikuc3BsaXQoIl8iKVsxXQ0KICAgICAgICAgIGxldCBpZCA9IHRzLmF0dHIoImlkIikuc3BsaXQoIl8iKVsyXTsNCiAgICAgICAgICBsZXQgZW50ID0ge30NCiAgICAgICAgICAvLyDmm7TmlrDmta7lsYLlhoXlrrkNCiAgICAgICAgICBsZXQgYXR0ciA9IFsndGl0bGUnXTsNCiAgICAgICAgICBsZXQgYXR0ck4gPSBbJ3RpdGxlJ107DQogICAgICAgICAgaWYodHAgPT0gJ3Bybycpew0KICAgICAgICAgICAgZW50ID0gYWxsUHJvYmxlbXMuZmluZChmdW5jdGlvbihwKXtyZXR1cm4gcFsnaWQnXSA9PSBpZH0pOw0KICAgICAgICAgICAgYXR0ciA9IFsndGl0bGUnXTsNCiAgICAgICAgICAgIGF0dHJOID0gWyd0aXRsZSddOw0KICAgICAgICAgIH0NCiAgICAgICAgICBlbHNlIGlmKHRwID09ICdrcCcpew0KICAgICAgICAgICAgZW50ID0gYWxsQ29uY2VwdHMuZmluZChmdW5jdGlvbihjKXtyZXR1cm4gY1snc29ydElkJ10gPT0gaWR9KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgYXR0ciA9IFsnbmFtZSddOw0KICAgICAgICAgICAgYXR0ck4gPSBbJ25hbWUnXTsNCiAgICAgICAgICB9DQogICAgICAgICAgY29uc29sZS5sb2coJ2lkJyxkKTsNCg0KICAgICAgICAgIGxldCBuYW1ldGV4dCA9ICcnOw0KICAgICAgICAgIC8vIGxldCBlbnQgPSBncm91cERhdGEuZmluZChmdW5jdGlvbiAoYykgeyByZXR1cm4gY1snaWQnXSA9PSBpZCB9KTsNCiAgICAgICAgICB2YXIgeVBvc2l0aW9uID0gZC5vZmZzZXRZICsgMjsNCiAgICAgICAgICB2YXIgeFBvc2l0aW9uID0gZC5vZmZzZXRYICsgMjsNCiAgICAgICAgICANCiAgICAgICAgICAvLyBpZihkLmNsaWVudFg+MjEwMCl7DQogICAgICAgICAgLy8gICB4UG9zaXRpb24gPSBkLmNsaWVudFggLSAyMTA7DQogICAgICAgICAgLy8gfQ0KICAgICAgICAgIGxldCBuYW1lVGV4dCA9IGVudFsndGl0bGUnXTsNCiAgICAgICAgICB2YXIgc2NhdHRlclRvb2x0aXAgPSBkMw0KICAgICAgICAgICAgLnNlbGVjdCgiLnByb0NvblNhbmtleVRvb2x0aXAiKQ0KICAgICAgICAgICAgLnN0eWxlKCJsZWZ0IiwgeFBvc2l0aW9uICsgInB4IikNCiAgICAgICAgICAgIC5zdHlsZSgidG9wIiwgeVBvc2l0aW9uICsgInB4Iik7DQogICAgICAgICAgLy8g5pu05paw5rWu5bGC5YaF5a65DQogICAgICAgICAgZm9yIChsZXQgYSA9IDA7IGEgPCBhdHRyLmxlbmd0aDsgYSsrKSB7DQoNCiAgICAgICAgICAgIHNjYXR0ZXJUb29sdGlwLnNlbGVjdChgLmF0dHIke2F9YCkudGV4dChgJHthdHRyTlthXX0gOiAke2VudFthdHRyW2FdXX1gKQ0KICAgICAgICAgIH0NCiAgICAgICAgICBzY2F0dGVyVG9vbHRpcC5zZWxlY3QoIi5uYW1lIikudGV4dChuYW1lVGV4dCk7DQogICAgICAgICAgLy8g56e76Zmk5rWu5bGCaGlkZGVu5qC35byP77yM5bGV56S65rWu5bGCDQogICAgICAgICAgc2NhdHRlclRvb2x0aXAuY2xhc3NlZCgiaGlkZGVuIiwgZmFsc2UpOw0KICAgICAgICB9KS5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgX3RoaXMuJGJ1cy4kZW1pdCgiU2VsZWN0aW5nU3R1IiwgIiIpOw0KICAgICAgICAgIGQzLnNlbGVjdCgiLnByb0NvblNhbmtleVRvb2x0aXAiKS5jbGFzc2VkKCJoaWRkZW4iLCB0cnVlKTsNCiAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgICBlbHNlew0KICAgICAgICBsZXQgY2lyY2xlID0gZHJhd1Rvb2xzLmRyYXdDaXJjbGUoZW50RywgeCwgeSwgNSwgY29sb3JMaXN0W3BhcnNlSW50KHNjYXR0ZXJEYXRhW2ldWydrTGFiJ10pXSwgMSwgMSwgMSwgJ3NjYXR0ZXJDaXJjbGUnLCBgc2NhdHRlckNpcmNsZV8ke3NjYXR0ZXJEYXRhW2ldWyd0eXBlJ119XyR7c2NhdHRlckRhdGFbaV1bJ2lkJ119YCk7DQogICAgICAgIGNpcmNsZS5vbigibW91c2Vtb3ZlIiwgZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICBsZXQgdHMgPSBkMy5zZWxlY3QodGhpcyk7DQogICAgICAgICAgbGV0IHRwID0gdHMuYXR0cigiaWQiKS5zcGxpdCgiXyIpWzFdDQogICAgICAgICAgbGV0IGlkID0gdHMuYXR0cigiaWQiKS5zcGxpdCgiXyIpWzJdOw0KICAgICAgICAgIGxldCBlbnQgPSB7fQ0KICAgICAgICAgIC8vIOabtOaWsOa1ruWxguWGheWuuQ0KICAgICAgICAgIGxldCBhdHRyID0gWyd0aXRsZSddOw0KICAgICAgICAgIGxldCBhdHRyTiA9IFsndGl0bGUnXTsNCiAgICAgICAgICBpZih0cCA9PSAncHJvJyl7DQogICAgICAgICAgICBlbnQgPSBhbGxQcm9ibGVtcy5maW5kKGZ1bmN0aW9uKHApe3JldHVybiBwWydpZCddID09IGlkfSk7DQogICAgICAgICAgICBhdHRyID0gWyd0aXRsZSddOw0KICAgICAgICAgICAgYXR0ck4gPSBbJ3RpdGxlJ107DQogICAgICAgICAgfQ0KICAgICAgICAgIGVsc2UgaWYodHAgPT0gJ2twJyl7DQogICAgICAgICAgICBlbnQgPSBhbGxDb25jZXB0cy5maW5kKGZ1bmN0aW9uKGMpe3JldHVybiBjWydzb3J0SWQnXSA9PSBpZH0pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBhdHRyID0gWyduYW1lJ107DQogICAgICAgICAgICBhdHRyTiA9IFsnbmFtZSddOw0KICAgICAgICAgIH0NCiAgICAgICAgICBjb25zb2xlLmxvZygnaWQnLGQpOw0KDQogICAgICAgICAgbGV0IG5hbWV0ZXh0ID0gJyc7DQogICAgICAgICAgLy8gbGV0IGVudCA9IGdyb3VwRGF0YS5maW5kKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjWydpZCddID09IGlkIH0pOw0KICAgICAgICAgIHZhciB5UG9zaXRpb24gPSBkLm9mZnNldFkgKyAyOw0KICAgICAgICAgIHZhciB4UG9zaXRpb24gPSBkLm9mZnNldFggKyAyOw0KICAgICAgICAgIA0KICAgICAgICAgIC8vIGlmKGQuY2xpZW50WD4yMTAwKXsNCiAgICAgICAgICAvLyAgIHhQb3NpdGlvbiA9IGQuY2xpZW50WCAtIDIxMDsNCiAgICAgICAgICAvLyB9DQogICAgICAgICAgbGV0IG5hbWVUZXh0ID0gZW50Wyd0aXRsZSddOw0KICAgICAgICAgIHZhciBzY2F0dGVyVG9vbHRpcCA9IGQzDQogICAgICAgICAgICAuc2VsZWN0KCIucHJvQ29uU2Fua2V5VG9vbHRpcCIpDQogICAgICAgICAgICAuc3R5bGUoImxlZnQiLCB4UG9zaXRpb24gKyAicHgiKQ0KICAgICAgICAgICAgLnN0eWxlKCJ0b3AiLCB5UG9zaXRpb24gKyAicHgiKTsNCiAgICAgICAgICAvLyDmm7TmlrDmta7lsYLlhoXlrrkNCiAgICAgICAgICBmb3IgKGxldCBhID0gMDsgYSA8IGF0dHIubGVuZ3RoOyBhKyspIHsNCg0KICAgICAgICAgICAgc2NhdHRlclRvb2x0aXAuc2VsZWN0KGAuYXR0ciR7YX1gKS50ZXh0KGAke2F0dHJOW2FdfSA6ICR7ZW50W2F0dHJbYV1dfWApDQogICAgICAgICAgfQ0KICAgICAgICAgIHNjYXR0ZXJUb29sdGlwLnNlbGVjdCgiLm5hbWUiKS50ZXh0KG5hbWVUZXh0KTsNCiAgICAgICAgICAvLyDnp7vpmaTmta7lsYJoaWRkZW7moLflvI/vvIzlsZXnpLrmta7lsYINCiAgICAgICAgICBzY2F0dGVyVG9vbHRpcC5jbGFzc2VkKCJoaWRkZW4iLCBmYWxzZSk7DQogICAgICAgIH0pLm9uKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICBfdGhpcy4kYnVzLiRlbWl0KCJTZWxlY3RpbmdTdHUiLCAiIik7DQogICAgICAgICAgZDMuc2VsZWN0KCIucHJvQ29uU2Fua2V5VG9vbHRpcCIpLmNsYXNzZWQoImhpZGRlbiIsIHRydWUpOw0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgICAgfQ0KDQoNCiAgICAgIGxldCBzY2F0dGVyQ29uRGF0YSA9IF90aGlzLmFsbHByb0NvblNhbmtleURhdGE7DQogICAgICBsZXQgeGNvbk1heE1pbkRSID0gdG9vbHMuZ2V0TWF4TWluKHNjYXR0ZXJDb25EYXRhLCAneCcpOw0KICAgICAgbGV0IHljb25NYXhNaW5EUiA9IHRvb2xzLmdldE1heE1pbihzY2F0dGVyQ29uRGF0YSwgJ3knKTsNCiAgICAgIGxldCBzY2F0dGVyQ29ueExpbmVhciA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFt4Y29uTWF4TWluRFJbMV0sIHhjb25NYXhNaW5EUlswXV0pLnJhbmdlKFswLCB3aWR0aF0pOw0KICAgICAgbGV0IHNjYXR0ZXJDb255TGluZWFyID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oW3ljb25NYXhNaW5EUlsxXSwgeWNvbk1heE1pbkRSWzBdXSkucmFuZ2UoW2hlaWdodC8yLCBoZWlnaHQtNTBdKTsNCiAgICAgIGZvcihsZXQgaT1zY2F0dGVyQ29uRGF0YS5sZW5ndGgtMTtpPj0wO2ktLSl7DQogICAgICAgIGxldCB4ID0gc2NhdHRlckNvbnhMaW5lYXIoc2NhdHRlckNvbkRhdGFbaV1bJ3gnXSk7DQogICAgICAgIGxldCB5ID0gc2NhdHRlckNvbnlMaW5lYXIoc2NhdHRlckNvbkRhdGFbaV1bJ3knXSk7DQogICAgICAgIGxldCBjb2xvciA9IGNvbG9yTGlzdFtwYXJzZUludChzY2F0dGVyQ29uRGF0YVtpXVsna0xhYiddKV0NCiAgICAgICAgaWYocGFyc2VJbnQoc2NhdHRlckNvbkRhdGFbaV1bJ2lkJ10pPDE5KXsNCiAgICAgICAgICBjb2xvciA9ICdyZWQnOw0KICAgICAgICB9DQogICAgICAgIGNvbnNvbGUubG9nKHNjYXR0ZXJDb25EYXRhW2ldKQ0KICAgICAgICBsZXQgY2lyY2xlcyA9IGRyYXdUb29scy5kcmF3Q2lyY2xlKGVudEcsIHgsIHksIDUsIGNvbG9yLCAxLCAxLCAxLCAnc2NhdHRlckNvbkNpcmNsZScsIGBzY2F0dGVyQ29uQ2lyY2xlXyR7c2NhdHRlckNvbkRhdGFbaV1bJ2lkJ119YCk7DQogICAgICAgIGNpcmNsZXMub24oIm1vdXNlbW92ZSIsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgbGV0IHRzID0gZDMuc2VsZWN0KHRoaXMpOw0KICAgICAgICAgIC8vIGxldCB0cCA9IHRzLmF0dHIoImlkIikuc3BsaXQoIl8iKVsxXQ0KICAgICAgICAgIGxldCBpZCA9IHRzLmF0dHIoImlkIikuc3BsaXQoIl8iKVsxXTsNCiAgICAgICAgICBsZXQgZW50ID0ge30NCiAgICAgICAgICAvLyDmm7TmlrDmta7lsYLlhoXlrrkNCiAgICAgICAgICBsZXQgYXR0ciA9IFsnbmFtZSddOw0KICAgICAgICAgIGxldCBhdHRyTiA9IFsnbmFtZSddOw0KICAgICAgICAgIGVudCA9IHNjYXR0ZXJDb25EYXRhLmZpbmQoZnVuY3Rpb24oYyl7cmV0dXJuIGNbJ2lkJ10gPT0gaWR9KTsNCiAgICAgICAgICBjb25zb2xlLmxvZygnaWQnLGVudCxpZCk7DQoNCiAgICAgICAgICBsZXQgbmFtZXRleHQgPSAnJzsNCiAgICAgICAgICAvLyBsZXQgZW50ID0gZ3JvdXBEYXRhLmZpbmQoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGNbJ2lkJ10gPT0gaWQgfSk7DQogICAgICAgICAgdmFyIHlQb3NpdGlvbiA9IGQub2Zmc2V0WSArIDI7DQogICAgICAgICAgdmFyIHhQb3NpdGlvbiA9IGQub2Zmc2V0WCArIDI7DQogICAgICAgICAgDQogICAgICAgICAgaWYoZC5vZmZzZXRYPjIwMCl7DQogICAgICAgICAgICB4UG9zaXRpb24gPSBkLm9mZnNldFggLSAyMTA7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmKGQub2Zmc2V0WT42MDApew0KICAgICAgICAgICAgeVBvc2l0aW9uID0gZC5vZmZzZXRZIC0gMTUwOw0KICAgICAgICAgIH0NCiAgICAgICAgICBsZXQgbmFtZVRleHQgPSBlbnRbJ25hbWUnXTsNCiAgICAgICAgICB2YXIgc2NhdHRlclRvb2x0aXAgPSBkMw0KICAgICAgICAgICAgLnNlbGVjdCgiLnByb0NvblNhbmtleVRvb2x0aXAiKQ0KICAgICAgICAgICAgLnN0eWxlKCJsZWZ0IiwgeFBvc2l0aW9uICsgInB4IikNCiAgICAgICAgICAgIC5zdHlsZSgidG9wIiwgeVBvc2l0aW9uICsgInB4Iik7DQogICAgICAgICAgLy8g5pu05paw5rWu5bGC5YaF5a65DQogICAgICAgICAgZm9yIChsZXQgYSA9IDA7IGEgPCBhdHRyLmxlbmd0aDsgYSsrKSB7DQoNCiAgICAgICAgICAgIHNjYXR0ZXJUb29sdGlwLnNlbGVjdChgLmF0dHIke2F9YCkudGV4dChgJHthdHRyTlthXX0gOiAke2VudFthdHRyW2FdXX1gKQ0KICAgICAgICAgIH0NCiAgICAgICAgICBzY2F0dGVyVG9vbHRpcC5zZWxlY3QoIi5uYW1lIikudGV4dChuYW1lVGV4dCk7DQogICAgICAgICAgLy8g56e76Zmk5rWu5bGCaGlkZGVu5qC35byP77yM5bGV56S65rWu5bGCDQogICAgICAgICAgc2NhdHRlclRvb2x0aXAuY2xhc3NlZCgiaGlkZGVuIiwgZmFsc2UpOw0KICAgICAgICB9KS5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgX3RoaXMuJGJ1cy4kZW1pdCgiU2VsZWN0aW5nU3R1IiwgIiIpOw0KICAgICAgICAgIGQzLnNlbGVjdCgiLnByb0NvblNhbmtleVRvb2x0aXAiKS5jbGFzc2VkKCJoaWRkZW4iLCB0cnVlKTsNCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIHVwZGF0YUFsbCgpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQogICAgICBsZXQgbWFyZ2luID0gX3RoaXMubWFyZ2luDQogICAgICBsZXQgd2lkdGggPSBfdGhpcy4kcmVmcy5wcm9Db25TYW5rZXlEaXYub2Zmc2V0V2lkdGggLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodDsNCiAgICAgIGxldCBoZWlnaHQgPSBfdGhpcy4kcmVmcy5wcm9Db25TYW5rZXlEaXYub2Zmc2V0SGVpZ2h0IC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207DQogICAgICBfdGhpcy53aWR0aCA9IHdpZHRoOw0KICAgICAgX3RoaXMuaGVpZ2h0ID0gaGVpZ2h0Ow0KICAgICAgZDMuc2VsZWN0KCIjcHJvQ29uU2Fua2V5Q2FudGFpbiIpLnNlbGVjdCgic3ZnIikucmVtb3ZlKCkNCiAgICAgIHZhciBzdmcgPSBkMy5zZWxlY3QoIiNwcm9Db25TYW5rZXlDYW50YWluIikuYXBwZW5kKCJzdmciKQ0KICAgICAgICAuYXR0cigid2lkdGgiLCB3aWR0aCAtIDApDQogICAgICAgIC5hdHRyKCJoZWlnaHQiLCBoZWlnaHQgLSAwKQ0KICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLDApJykNCiAgICAgICAgLnN0eWxlKCJwb3NpdGlvbiIsICJhYnNvbHV0ZSIpOw0KDQogICAgICBsZXQgZW50RyA9IHN2Zy5hcHBlbmQoImciKS5hdHRyKCJpZCIsICJlbnRHIikuYXR0cigid2lkdGgiLCB3aWR0aCkuYXR0cigiaGVpZ2h0IiwgaGVpZ2h0KTsNCiAgICAgIGxldCBzb25HID0gc3ZnLmFwcGVuZCgiZyIpLmF0dHIoImlkIiwgInNvbkciKS5hdHRyKCJ3aWR0aCIsIHdpZHRoKS5hdHRyKCJoZWlnaHQiLCBoZWlnaHQpOw0KICAgICAgX3RoaXMucm9vdFN2ZyA9IHN2ZzsNCiAgICAgIF90aGlzLmRyYXdQcm9Db25TY2F0dGVyKHN2Zyk7DQogICAgICAvLyB9KTsNCiAgICB9LA0KICAgIGNsaWNrX0VudCh0aW1lKSB7DQogICAgICB0aGlzLiRlbWl0KCJ0aW1lRHVyIiwgdGltZSk7DQogICAgfSwNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgIGxldCBtYXJnaW4gPSBfdGhpcy5tYXJnaW4NCiAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgfSk7DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgY29uc3QgX3RoaXMgPSB0aGlzOw0KICAgIF90aGlzLmdldEFsbFNjYXR0ZXJEYXRhKCk7DQogICAgZDMuc2VsZWN0KCIuc2NhdHRlclRvb2x0aXAiKS5jbGFzc2VkKCJoaWRkZW4iLCB0cnVlKTsNCiAgICBkMy5zZWxlY3QoIi5jaGFydFRvb2x0aXAiKS5jbGFzc2VkKCJoaWRkZW4iLCB0cnVlKTsNCiAgICB0aGlzLiRidXMuJG9uKCdDb25jZXB0VHJlZScsICh2YWwpID0+IHsNCiAgICAgIF90aGlzLmNvbmNlcHRUcmVlID0gdmFsOw0KICAgIH0pOw0KICAgIHRoaXMuJGJ1cy4kb24oJ2FsbFByb2JsZW1zJywgKHZhbCkgPT4gew0KICAgICAgX3RoaXMuYWxsUHJvYmxlbXMgPSB2YWw7DQogICAgfSk7DQogICAgdGhpcy4kYnVzLiRvbignYWxsQ29uY2VwdHMnLCAodmFsKSA9PiB7DQogICAgICBfdGhpcy5hbGxDb25jZXB0cyA9IHZhbDsNCiAgICAgIF90aGlzLnVwZGF0YUFsbCgpOw0KICAgIH0pOw0KICAgIHRoaXMuJGJ1cy4kb24oJ2F0dHJDb2xvcmxpc3QnLCAodmFsKSA9PiB7DQogICAgICBfdGhpcy5hdHRyQ29sb3JsaXN0ID0gdmFsOw0KICAgIH0pOw0KICAgIA0KICAgIC8vIHRoaXMuJHJlZnMubW92ZXByb0NvblNhbmtleUxlZnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdmVyIiwgX3RoaXMubW92ZXByb0NvblNhbmtleUxlZnQpOyAvLyDnm5HlkKzngrnlh7vkuovku7YNCg0KICB9LA0KICBiZWZvcmVEZXN0cm95KCkgew0KICAgIGNsZWFySW50ZXJ2YWwodGhpcy5tb3ZlVGltZXIpOw0KICB9LA0KfSANCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/proConSankey","sourcesContent":["<!-- eslint-disable no-unused-vars -->\r\n<!-- eslint-disable no-unused-vars -->\r\n\r\n<template>\r\n  <div class=\"proConSankey\" ref=\"proConSankeyDiv\">\r\n    <div class=\"panelHead\"></div>\r\n    <div id=\"proConSankeyCantain\" class=\"panelBody\" ref=\"proConSankeyCantain\">\r\n    </div>\r\n    \r\n    <!-- <div class=\"close\" ref=\"listen\">\r\n    </div> -->\r\n    <!-- <el-button type=\"primary\" @click=\"onSubmit\">Create</el-button> -->\r\n    <div class=\"proConSankeyTooltip toolTip\">\r\n      <p>\r\n          <br /><strong class=\"name toolTipAttr\"></strong>\r\n          <br /><strong class=\"text toolTipAttr\"></strong>\r\n          <br /><strong class=\"attr0 toolTipAttr\"></strong>\r\n          <br /><strong class=\"attr1 toolTipAttr\"></strong>\r\n          <br /><strong class=\"attr2 toolTipAttr\"></strong>\r\n          <br /><strong class=\"attr3 toolTipAttr\"></strong>\r\n          <br /><strong class=\"attr4 toolTipAttr\"></strong>\r\n        </p>\r\n    </div>\r\n  </div>\r\n</div></template>\r\n  \r\n<script>\r\n// import { param } from 'server/api';\r\nimport * as d3 from 'd3'\r\nimport { onMounted, ref } from 'vue';\r\nimport filenames from \"@/utils/fileName\";\r\nimport domtoimage from 'dom-to-image';\r\n// import TestJson from \"@/assets/json/case2_fin.json\";\r\n// import TestRelJson from \"@/assets/json/case2_fin_rel.json\";\r\nimport Circle from '@/utils/geometry/circle';\r\nimport tools from \"@/utils/tools.js\";\r\nimport drawTools from \"@/utils/drawingTools.js\";\r\n\r\nexport default {\r\n  props: [\"toolsState\"],\r\n  data() {\r\n    return {\r\n      proName: '',\r\n      scatterData:'',\r\n      allProblems:'',\r\n      allConcepts:'',\r\n      allProInConGPTScatterData:'',\r\n      allproConSankeyData:'',\r\n      proType: \"\",\r\n      select: '',\r\n      proForm: {\r\n        name: \"\",\r\n        type: \"\",\r\n        content: \"\"\r\n      },\r\n      attrColorlist:[],\r\n      rootSvg:'',\r\n      width:0,\r\n      height:0,\r\n      thisId: 10,\r\n      margin: { top: 5, right: 5, bottom: 5, left: 5 },\r\n    };\r\n  },\r\n\r\n  watch: {\r\n    type(val) {\r\n    },\r\n    toolAddRel(val) {\r\n    },\r\n    toolsState: {\r\n      deep: true,\r\n      handler(val) {\r\n        console.log(val)\r\n        this.toolAddRel = val['addRel'];\r\n        this.toolAddRelMain = val['addRelMain'];\r\n        this.toolDelRel = val['delRel'];\r\n      }\r\n    },\r\n    scatterData(val){\r\n      const _this = this;\r\n      _this.updataAll();\r\n    }\r\n  },\r\n  methods: {\r\n    getAllScatterData() {\r\n      const _this = this;\r\n      this.$http\r\n        .get(\"/api/problem/allProInConGPTScatterData\", { params: {} }, {})\r\n        .then((response) => {\r\n          _this.allProInConGPTScatterData = response.body;\r\n          console.log(\"allProInConGPTScatterData\",response.body);\r\n          _this.scatterData = _this.allProInConGPTScatterData;\r\n          // _this.allRelationships = response.body;\r\n          // _this.drawnetPData();\r\n        });\r\n      this.$http\r\n        .get(\"/api/concept/allproConSankeyData\", { params: {} }, {})\r\n        .then((response) => {\r\n          _this.allproConSankeyData = response.body;\r\n          console.log(\"allproConSankeyData\",response.body);\r\n          // _this.allRelationships = response.body;\r\n          // _this.drawnetPData();\r\n        });\r\n    },\r\n    drawProConScatter(svg) {\r\n      const _this = this;\r\n      const margin = _this.margin;\r\n      let psvg = svg\r\n      let width = psvg.attr(\"width\");\r\n      let height = psvg.attr(\"height\");\r\n      psvg.select(\"#netPG\").remove();\r\n      // let prog = psvg.append(\"g\").attr(\"id\", \"netPG\").attr(\"width\", width).attr(\"height\", height);\r\n      let groups = svg.append(\"g\").attr(\"id\", \"proConSankeyGroups\").attr(\"width\", width).attr(\"height\", height)\r\n      // .attr(\"transform\", \"translate(\" + graphGTransformX + ',' + graphGTransformY + \") scale(\" + graphGTransformK + \")\");\r\n      // this.groupsSvg = groups;\r\n\r\n      let backG = groups.append(\"g\").attr(\"id\", \"proConSankeybackG\").attr(\"width\", width).attr(\"height\", height);\r\n      let arcG = groups.append(\"g\").attr(\"id\", \"proConSankeyarcG\").attr(\"width\", width).attr(\"height\", height);\r\n      let relG = groups.append(\"g\").attr(\"id\", \"proConSankeyrelG\").attr(\"width\", width).attr(\"height\", height);\r\n      let entG = groups.append(\"g\").attr(\"id\", \"proConSankeyentG\").attr(\"width\", width).attr(\"height\", height);\r\n      let frontG = groups.append(\"g\").attr(\"id\", \"proConSankeyfrontG\").attr(\"width\", width).attr(\"height\", height);\r\n\r\n      let scatterData = _this.scatterData;\r\n      let xMaxMinDR = tools.getMaxMin(scatterData, 'x');\r\n      let yMaxMinDR = tools.getMaxMin(scatterData, 'y');\r\n      let scatterxLinear = d3.scaleLinear().domain([xMaxMinDR[1], xMaxMinDR[0]]).range([0, width]);\r\n      let scatteryLinear = d3.scaleLinear().domain([yMaxMinDR[1], yMaxMinDR[0]]).range([0, height/2]);\r\n      let colorList = _this.attrColorlist;\r\n      const allProblems = _this.allProblems;\r\n      const allConcepts = _this.allConcepts;\r\n      for(let i=0;i<scatterData.length;i++){\r\n        let x = scatterxLinear(scatterData[i]['x']);\r\n        let y = scatteryLinear(scatterData[i]['y']);\r\n        let type = scatterData[i]['type'];\r\n        if(type == \"kp\"){\r\n          let points = drawTools.calcRegularPolygonPoints(3, x, y, 8);\r\n          let trigal = drawTools.drawPolygon(entG, points, `scatterCircle_${scatterData[i]['type']}_${scatterData[i]['id']}`, '0px', \"grey\", colorList[parseInt(scatterData[i]['kLab'])]);\r\n          // drawTools.drawCircle(entG, x, y, 5, colorList[parseInt(scatterData[i]['kLab'])], 1, 1, 1, 'scatterCircle', `scatterCircle_${scatterData[i]['type']}_${scatterData[i]['id']}`);\r\n          trigal.on(\"mousemove\", function (d) {\r\n          let ts = d3.select(this);\r\n          let tp = ts.attr(\"id\").split(\"_\")[1]\r\n          let id = ts.attr(\"id\").split(\"_\")[2];\r\n          let ent = {}\r\n          // 更新浮层内容\r\n          let attr = ['title'];\r\n          let attrN = ['title'];\r\n          if(tp == 'pro'){\r\n            ent = allProblems.find(function(p){return p['id'] == id});\r\n            attr = ['title'];\r\n            attrN = ['title'];\r\n          }\r\n          else if(tp == 'kp'){\r\n            ent = allConcepts.find(function(c){return c['sortId'] == id});\r\n            \r\n            attr = ['name'];\r\n            attrN = ['name'];\r\n          }\r\n          console.log('id',d);\r\n\r\n          let nametext = '';\r\n          // let ent = groupData.find(function (c) { return c['id'] == id });\r\n          var yPosition = d.offsetY + 2;\r\n          var xPosition = d.offsetX + 2;\r\n          \r\n          // if(d.clientX>2100){\r\n          //   xPosition = d.clientX - 210;\r\n          // }\r\n          let nameText = ent['title'];\r\n          var scatterTooltip = d3\r\n            .select(\".proConSankeyTooltip\")\r\n            .style(\"left\", xPosition + \"px\")\r\n            .style(\"top\", yPosition + \"px\");\r\n          // 更新浮层内容\r\n          for (let a = 0; a < attr.length; a++) {\r\n\r\n            scatterTooltip.select(`.attr${a}`).text(`${attrN[a]} : ${ent[attr[a]]}`)\r\n          }\r\n          scatterTooltip.select(\".name\").text(nameText);\r\n          // 移除浮层hidden样式，展示浮层\r\n          scatterTooltip.classed(\"hidden\", false);\r\n        }).on(\"mouseleave\", function (d) {\r\n          _this.$bus.$emit(\"SelectingStu\", \"\");\r\n          d3.select(\".proConSankeyTooltip\").classed(\"hidden\", true);\r\n        })\r\n        }\r\n        else{\r\n        let circle = drawTools.drawCircle(entG, x, y, 5, colorList[parseInt(scatterData[i]['kLab'])], 1, 1, 1, 'scatterCircle', `scatterCircle_${scatterData[i]['type']}_${scatterData[i]['id']}`);\r\n        circle.on(\"mousemove\", function (d) {\r\n          let ts = d3.select(this);\r\n          let tp = ts.attr(\"id\").split(\"_\")[1]\r\n          let id = ts.attr(\"id\").split(\"_\")[2];\r\n          let ent = {}\r\n          // 更新浮层内容\r\n          let attr = ['title'];\r\n          let attrN = ['title'];\r\n          if(tp == 'pro'){\r\n            ent = allProblems.find(function(p){return p['id'] == id});\r\n            attr = ['title'];\r\n            attrN = ['title'];\r\n          }\r\n          else if(tp == 'kp'){\r\n            ent = allConcepts.find(function(c){return c['sortId'] == id});\r\n            \r\n            attr = ['name'];\r\n            attrN = ['name'];\r\n          }\r\n          console.log('id',d);\r\n\r\n          let nametext = '';\r\n          // let ent = groupData.find(function (c) { return c['id'] == id });\r\n          var yPosition = d.offsetY + 2;\r\n          var xPosition = d.offsetX + 2;\r\n          \r\n          // if(d.clientX>2100){\r\n          //   xPosition = d.clientX - 210;\r\n          // }\r\n          let nameText = ent['title'];\r\n          var scatterTooltip = d3\r\n            .select(\".proConSankeyTooltip\")\r\n            .style(\"left\", xPosition + \"px\")\r\n            .style(\"top\", yPosition + \"px\");\r\n          // 更新浮层内容\r\n          for (let a = 0; a < attr.length; a++) {\r\n\r\n            scatterTooltip.select(`.attr${a}`).text(`${attrN[a]} : ${ent[attr[a]]}`)\r\n          }\r\n          scatterTooltip.select(\".name\").text(nameText);\r\n          // 移除浮层hidden样式，展示浮层\r\n          scatterTooltip.classed(\"hidden\", false);\r\n        }).on(\"mouseleave\", function (d) {\r\n          _this.$bus.$emit(\"SelectingStu\", \"\");\r\n          d3.select(\".proConSankeyTooltip\").classed(\"hidden\", true);\r\n        })\r\n      }\r\n      }\r\n\r\n\r\n      let scatterConData = _this.allproConSankeyData;\r\n      let xconMaxMinDR = tools.getMaxMin(scatterConData, 'x');\r\n      let yconMaxMinDR = tools.getMaxMin(scatterConData, 'y');\r\n      let scatterConxLinear = d3.scaleLinear().domain([xconMaxMinDR[1], xconMaxMinDR[0]]).range([0, width]);\r\n      let scatterConyLinear = d3.scaleLinear().domain([yconMaxMinDR[1], yconMaxMinDR[0]]).range([height/2, height-50]);\r\n      for(let i=scatterConData.length-1;i>=0;i--){\r\n        let x = scatterConxLinear(scatterConData[i]['x']);\r\n        let y = scatterConyLinear(scatterConData[i]['y']);\r\n        let color = colorList[parseInt(scatterConData[i]['kLab'])]\r\n        if(parseInt(scatterConData[i]['id'])<19){\r\n          color = 'red';\r\n        }\r\n        console.log(scatterConData[i])\r\n        let circles = drawTools.drawCircle(entG, x, y, 5, color, 1, 1, 1, 'scatterConCircle', `scatterConCircle_${scatterConData[i]['id']}`);\r\n        circles.on(\"mousemove\", function (d) {\r\n          let ts = d3.select(this);\r\n          // let tp = ts.attr(\"id\").split(\"_\")[1]\r\n          let id = ts.attr(\"id\").split(\"_\")[1];\r\n          let ent = {}\r\n          // 更新浮层内容\r\n          let attr = ['name'];\r\n          let attrN = ['name'];\r\n          ent = scatterConData.find(function(c){return c['id'] == id});\r\n          console.log('id',ent,id);\r\n\r\n          let nametext = '';\r\n          // let ent = groupData.find(function (c) { return c['id'] == id });\r\n          var yPosition = d.offsetY + 2;\r\n          var xPosition = d.offsetX + 2;\r\n          \r\n          if(d.offsetX>200){\r\n            xPosition = d.offsetX - 210;\r\n          }\r\n          if(d.offsetY>600){\r\n            yPosition = d.offsetY - 150;\r\n          }\r\n          let nameText = ent['name'];\r\n          var scatterTooltip = d3\r\n            .select(\".proConSankeyTooltip\")\r\n            .style(\"left\", xPosition + \"px\")\r\n            .style(\"top\", yPosition + \"px\");\r\n          // 更新浮层内容\r\n          for (let a = 0; a < attr.length; a++) {\r\n\r\n            scatterTooltip.select(`.attr${a}`).text(`${attrN[a]} : ${ent[attr[a]]}`)\r\n          }\r\n          scatterTooltip.select(\".name\").text(nameText);\r\n          // 移除浮层hidden样式，展示浮层\r\n          scatterTooltip.classed(\"hidden\", false);\r\n        }).on(\"mouseleave\", function (d) {\r\n          _this.$bus.$emit(\"SelectingStu\", \"\");\r\n          d3.select(\".proConSankeyTooltip\").classed(\"hidden\", true);\r\n        })\r\n      }\r\n    },\r\n    updataAll() {\r\n      var _this = this;\r\n      let margin = _this.margin\r\n      let width = _this.$refs.proConSankeyDiv.offsetWidth - margin.left - margin.right;\r\n      let height = _this.$refs.proConSankeyDiv.offsetHeight - margin.top - margin.bottom;\r\n      _this.width = width;\r\n      _this.height = height;\r\n      d3.select(\"#proConSankeyCantain\").select(\"svg\").remove()\r\n      var svg = d3.select(\"#proConSankeyCantain\").append(\"svg\")\r\n        .attr(\"width\", width - 0)\r\n        .attr(\"height\", height - 0)\r\n        .attr('transform', 'translate(0,0)')\r\n        .style(\"position\", \"absolute\");\r\n\r\n      let entG = svg.append(\"g\").attr(\"id\", \"entG\").attr(\"width\", width).attr(\"height\", height);\r\n      let sonG = svg.append(\"g\").attr(\"id\", \"sonG\").attr(\"width\", width).attr(\"height\", height);\r\n      _this.rootSvg = svg;\r\n      _this.drawProConScatter(svg);\r\n      // });\r\n    },\r\n    click_Ent(time) {\r\n      this.$emit(\"timeDur\", time);\r\n    },\r\n  },\r\n  created() {\r\n    var _this = this;\r\n    let margin = _this.margin\r\n    this.$nextTick(() => {\r\n    });\r\n  },\r\n  mounted() {\r\n    const _this = this;\r\n    _this.getAllScatterData();\r\n    d3.select(\".scatterTooltip\").classed(\"hidden\", true);\r\n    d3.select(\".chartTooltip\").classed(\"hidden\", true);\r\n    this.$bus.$on('ConceptTree', (val) => {\r\n      _this.conceptTree = val;\r\n    });\r\n    this.$bus.$on('allProblems', (val) => {\r\n      _this.allProblems = val;\r\n    });\r\n    this.$bus.$on('allConcepts', (val) => {\r\n      _this.allConcepts = val;\r\n      _this.updataAll();\r\n    });\r\n    this.$bus.$on('attrColorlist', (val) => {\r\n      _this.attrColorlist = val;\r\n    });\r\n    \r\n    // this.$refs.moveproConSankeyLeft.addEventListener(\"mouseover\", _this.moveproConSankeyLeft); // 监听点击事件\r\n\r\n  },\r\n  beforeDestroy() {\r\n    clearInterval(this.moveTimer);\r\n  },\r\n} \r\n</script>\r\n\r\n<style>\r\n@import './index.css';\r\n</style>\r\n"]}]}