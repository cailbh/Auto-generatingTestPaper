{"remainingRequest":"D:\\Cailibuhong\\auto-generatingTestPaper\\Auto-generatingTestPaper\\sys\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Cailibuhong\\auto-generatingTestPaper\\Auto-generatingTestPaper\\sys\\src\\components\\proConSankey\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Cailibuhong\\auto-generatingTestPaper\\Auto-generatingTestPaper\\sys\\src\\components\\proConSankey\\index.vue","mtime":1703081770003},{"path":"D:\\Cailibuhong\\auto-generatingTestPaper\\Auto-generatingTestPaper\\sys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681618859467},{"path":"D:\\Cailibuhong\\auto-generatingTestPaper\\Auto-generatingTestPaper\\sys\\node_modules\\babel-loader\\lib\\index.js","mtime":1681618859957},{"path":"D:\\Cailibuhong\\auto-generatingTestPaper\\Auto-generatingTestPaper\\sys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681618859467},{"path":"D:\\Cailibuhong\\auto-generatingTestPaper\\Auto-generatingTestPaper\\sys\\node_modules\\vue-loader\\lib\\index.js","mtime":1681618860114}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyBpbXBvcnQgeyBwYXJhbSB9IGZyb20gJ3NlcnZlci9hcGknOw0KaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnDQppbXBvcnQgKiBhcyBkM1NhbmtleSBmcm9tICdkMy1zYW5rZXknDQppbXBvcnQgeyBvbk1vdW50ZWQsIHJlZiB9IGZyb20gJ3Z1ZSc7DQppbXBvcnQgZmlsZW5hbWVzIGZyb20gIkAvdXRpbHMvZmlsZU5hbWUiOw0KaW1wb3J0IGRvbXRvaW1hZ2UgZnJvbSAnZG9tLXRvLWltYWdlJzsNCi8vIGltcG9ydCBUZXN0SnNvbiBmcm9tICJAL2Fzc2V0cy9qc29uL2Nhc2UyX2Zpbi5qc29uIjsNCi8vIGltcG9ydCBUZXN0UmVsSnNvbiBmcm9tICJAL2Fzc2V0cy9qc29uL2Nhc2UyX2Zpbl9yZWwuanNvbiI7DQppbXBvcnQgQ2lyY2xlIGZyb20gJ0AvdXRpbHMvZ2VvbWV0cnkvY2lyY2xlJzsNCmltcG9ydCB0b29scyBmcm9tICJAL3V0aWxzL3Rvb2xzLmpzIjsNCi8vIGltcG9ydCAiQC91dGlscy9zYW5rZXkuanMiOw0KaW1wb3J0IGRyYXdUb29scyBmcm9tICJAL3V0aWxzL2RyYXdpbmdUb29scy5qcyI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgcHJvcHM6IFsidG9vbHNTdGF0ZSJdLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBwcm9OYW1lOiAnJywNCiAgICAgIENvbmNlcHRPcmk6JycsDQogICAgICBzYW5rZXlOb2RlRGF0YTonJywNCiAgICAgIHNhbmtleUxpbmtEYXRhOicnLA0KICAgICAgY3VyUGFwZXJTYW5rZXlEYXRhOiIiLA0KICAgICAgc2Fua2V5RGF0YTogJycsDQogICAgICBhbGxQcm9ibGVtczogJycsDQogICAgICBhbGxDb25jZXB0czogJycsDQogICAgICBhbGxQcm9JbkNvbkdQVFNhbmtleURhdGE6ICcnLA0KICAgICAgYWxscHJvQ29uU2Fua2V5RGF0YTogJycsDQogICAgICBwcm9UeXBlOiAiIiwNCiAgICAgIHNlbGVjdDogJycsDQogICAgICBwcm9Gb3JtOiB7DQogICAgICAgIG5hbWU6ICIiLA0KICAgICAgICB0eXBlOiAiIiwNCiAgICAgICAgY29udGVudDogIiINCiAgICAgIH0sDQogICAgICBhdHRyQ29sb3JsaXN0OiBbXSwNCiAgICAgIHJvb3RTdmc6ICcnLA0KICAgICAgd2lkdGg6IDAsDQogICAgICBoZWlnaHQ6IDAsDQogICAgICB0aGlzSWQ6IDEwLA0KICAgICAgbWFyZ2luOiB7IHRvcDogNSwgcmlnaHQ6IDUsIGJvdHRvbTogNSwgbGVmdDogNSB9LA0KICAgIH07DQogIH0sDQoNCiAgd2F0Y2g6IHsNCiAgICB0eXBlKHZhbCkgew0KICAgIH0sDQogICAgdG9vbEFkZFJlbCh2YWwpIHsNCiAgICB9LA0KICAgIHRvb2xzU3RhdGU6IHsNCiAgICAgIGRlZXA6IHRydWUsDQogICAgICBoYW5kbGVyKHZhbCkgew0KICAgICAgICBjb25zb2xlLmxvZyh2YWwpDQogICAgICAgIHRoaXMudG9vbEFkZFJlbCA9IHZhbFsnYWRkUmVsJ107DQogICAgICAgIHRoaXMudG9vbEFkZFJlbE1haW4gPSB2YWxbJ2FkZFJlbE1haW4nXTsNCiAgICAgICAgdGhpcy50b29sRGVsUmVsID0gdmFsWydkZWxSZWwnXTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIHNhbmtleURhdGE6IHsNCiAgICAvLyAgIGRlZXA6IHRydWUsDQogICAgLy8gICBoYW5kbGVyKHZhbCkgew0KICAgIC8vICAgICBjb25zb2xlLmxvZyh2YWwpDQogICAgLy8gICAgIHRoaXMudXBkYXRhQWxsKCk7DQogICAgLy8gICB9DQogICAgLy8gfSwNCiAgICBzYW5rZXlOb2RlRGF0YSgpew0KICAgICAgDQogICAgICAgIHRoaXMudXBkYXRhQWxsKCk7DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZ2V0QWxsU2Fua2V5RGF0YSgpIHsNCiAgICAgIGNvbnN0IF90aGlzID0gdGhpczsNCiAgICAvLyAgIF90aGlzLnNhbmtleURhdGEgPXsNCiAgICAvLyAgICAgIm5vZGVzIjogWw0KICAgIC8vICAgICAgIHsgIm5hbWUiOiAiQSIgfSwNCiAgICAvLyAgICAgICB7ICJuYW1lIjogIkIiIH0sDQogICAgLy8gICAgICAgeyAibmFtZSI6ICJDIiB9LA0KICAgIC8vICAgICAgIHsgIm5hbWUiOiAiRCIgfSwNCiAgICAvLyAgICAgICBdLA0KICAgIC8vICAgImxpbmtzIjogWw0KICAgIC8vICAgICB7J3NvdXJjZSc6MCwndGFyZ2V0JzoyLCd2YWx1ZSc6IjExMCJ9LA0KICAgIC8vICAgICB7J3NvdXJjZSc6MCwndGFyZ2V0JzozLCd2YWx1ZSc6IjUifSwNCiAgICAvLyAgICAgeydzb3VyY2UnOjEsJ3RhcmdldCc6MiwndmFsdWUnOiI0In0sDQogICAgLy8gICAgIHsnc291cmNlJzoxLCd0YXJnZXQnOjMsJ3ZhbHVlJzoiMiJ9LA0KDQogICAgLy8gICBdDQogICAgLy8gfQ0KICAgICAgdGhpcy4kaHR0cA0KICAgICAgICAuZ2V0KCIvYXBpL3NhbmtleURhdGEiLCB7IHBhcmFtczoge30gfSwge30pDQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgIF90aGlzLnNhbmtleUxpbmtEYXRhID0gcmVzcG9uc2UuYm9keTsNCiAgICAgICAgICBfdGhpcy5nZXRBbGxTYW5rZXlOb2RlRGF0YSgpOw0KICAgICAgICB9KTsNCiAgICAgIC8vIHRoaXMuJGh0dHANCiAgICAgIC8vICAgLmdldCgiL2FwaS9jb25jZXB0L2FsbHByb0NvblNhbmtleURhdGEiLCB7IHBhcmFtczoge30gfSwge30pDQogICAgICAvLyAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgLy8gICAgIF90aGlzLmFsbHByb0NvblNhbmtleURhdGEgPSByZXNwb25zZS5ib2R5Ow0KICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCJhbGxwcm9Db25TYW5rZXlEYXRhIixyZXNwb25zZS5ib2R5KTsNCiAgICAgIC8vICAgICAvLyBfdGhpcy5hbGxSZWxhdGlvbnNoaXBzID0gcmVzcG9uc2UuYm9keTsNCiAgICAgIC8vICAgICAvLyBfdGhpcy5kcmF3bmV0UERhdGEoKTsNCiAgICAgIC8vICAgfSk7DQogICAgfSwNCiAgICANCiAgICBnZXRBbGxTYW5rZXlOb2RlRGF0YSgpIHsNCiAgICAgIGNvbnN0IF90aGlzID0gdGhpczsNCiAgICAgIGxldCBub2RlcyA9IFtdOw0KICAgICAgbGV0IGNvbk9yaSA9IF90aGlzLkNvbmNlcHRPcmk7DQogICAgICBsZXQgc2Fua2V5TGlua0RhdGEgPSBfdGhpcy5zYW5rZXlMaW5rRGF0YTsNCiAgICAgIGxldCBqID0gMDsNCiAgICAgIGxldCBtYXggPSAwOw0KICAgICAgZm9yKGxldCBpPTA7aTxjb25PcmkubGVuZ3RoO2krKyl7DQogICAgICAgIG5vZGVzLnB1c2goY29uT3JpW2ldKTsNCiAgICAgICAgaisrOw0KICAgICAgfQ0KICAgICAgZm9yKGxldCBpPTA7aTxzYW5rZXlMaW5rRGF0YS5sZW5ndGg7aSsrKXsNCiAgICAgICAgbGV0IHRhcmdldCA9IHNhbmtleUxpbmtEYXRhW2ldWyd0YXJnZXQnXTsNCiAgICAgICAgaWYodGFyZ2V0Pm1heCl7bWF4PXRhcmdldDt9DQogICAgICB9DQogICAgICBsZXQgaT0wOw0KICAgICAgY29uc29sZS5sb2coY29uT3JpLCAyMTMxMzEzLGosbWF4LG5vZGVzKQ0KICAgICAgd2hpbGUoajw9bWF4KXsNCiAgICAgICAgbm9kZXMucHVzaCh7Im5hbWUiOmBjb24ke2l9YH0pOw0KICAgICAgICBpKys7DQogICAgICAgIGorKw0KICAgICAgfQ0KICAgICAgX3RoaXMuc2Fua2V5Tm9kZURhdGEgPSBub2RlczsNCg0KICAgIH0sDQogICAgZHJhd1Byb0NvblNhbmtleShzdmcpIHsNCiAgICAgIGNvbnN0IF90aGlzID0gdGhpczsNCiAgICAgIGNvbnN0IG1hcmdpbiA9IF90aGlzLm1hcmdpbjsNCiAgICAgIGxldCBwc3ZnID0gc3ZnDQogICAgICBsZXQgd2lkdGggPSBwc3ZnLmF0dHIoIndpZHRoIik7DQogICAgICBsZXQgaGVpZ2h0ID0gcHN2Zy5hdHRyKCJoZWlnaHQiKTsNCiAgICAgIHBzdmcuc2VsZWN0KCIjbmV0UEciKS5yZW1vdmUoKTsNCiAgICAgIC8vIGxldCBwcm9nID0gcHN2Zy5hcHBlbmQoImciKS5hdHRyKCJpZCIsICJuZXRQRyIpLmF0dHIoIndpZHRoIiwgd2lkdGgpLmF0dHIoImhlaWdodCIsIGhlaWdodCk7DQogICAgICBsZXQgZ3JvdXBzID0gc3ZnLmFwcGVuZCgiZyIpLmF0dHIoImlkIiwgInByb0NvblNhbmtleUdyb3VwcyIpLmF0dHIoIndpZHRoIiwgd2lkdGgpLmF0dHIoImhlaWdodCIsIGhlaWdodCkNCiAgICAgIC8vIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgKyBncmFwaEdUcmFuc2Zvcm1YICsgJywnICsgZ3JhcGhHVHJhbnNmb3JtWSArICIpIHNjYWxlKCIgKyBncmFwaEdUcmFuc2Zvcm1LICsgIikiKTsNCiAgICAgIC8vIHRoaXMuZ3JvdXBzU3ZnID0gZ3JvdXBzOw0KDQogICAgICBsZXQgYmFja0cgPSBncm91cHMuYXBwZW5kKCJnIikuYXR0cigiaWQiLCAicHJvQ29uU2Fua2V5YmFja0ciKS5hdHRyKCJ3aWR0aCIsIHdpZHRoKS5hdHRyKCJoZWlnaHQiLCBoZWlnaHQpOw0KICAgICAgbGV0IGFyY0cgPSBncm91cHMuYXBwZW5kKCJnIikuYXR0cigiaWQiLCAicHJvQ29uU2Fua2V5YXJjRyIpLmF0dHIoIndpZHRoIiwgd2lkdGgpLmF0dHIoImhlaWdodCIsIGhlaWdodCk7DQogICAgICBsZXQgcmVsRyA9IGdyb3Vwcy5hcHBlbmQoImciKS5hdHRyKCJpZCIsICJwcm9Db25TYW5rZXlyZWxHIikuYXR0cigid2lkdGgiLCB3aWR0aCkuYXR0cigiaGVpZ2h0IiwgaGVpZ2h0KTsNCiAgICAgIGxldCBlbnRHID0gZ3JvdXBzLmFwcGVuZCgiZyIpLmF0dHIoImlkIiwgInByb0NvblNhbmtleWVudEciKS5hdHRyKCJ3aWR0aCIsIHdpZHRoKS5hdHRyKCJoZWlnaHQiLCBoZWlnaHQpOw0KICAgICAgbGV0IGZyb250RyA9IGdyb3Vwcy5hcHBlbmQoImciKS5hdHRyKCJpZCIsICJwcm9Db25TYW5rZXlmcm9udEciKS5hdHRyKCJ3aWR0aCIsIHdpZHRoKS5hdHRyKCJoZWlnaHQiLCBoZWlnaHQpOw0KDQogICAgICAvLyBsZXQgc2NhdHRlckRhdGEgPSBfdGhpcy5zY2F0dGVyRGF0YTsNCiAgICAgIC8vIGxldCB4TWF4TWluRFIgPSB0b29scy5nZXRNYXhNaW4oc2NhdHRlckRhdGEsICd4Jyk7DQogICAgICAvLyBsZXQgeU1heE1pbkRSID0gdG9vbHMuZ2V0TWF4TWluKHNjYXR0ZXJEYXRhLCAneScpOw0KICAgICAgLy8gbGV0IHNjYXR0ZXJ4TGluZWFyID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oW3hNYXhNaW5EUlsxXSwgeE1heE1pbkRSWzBdXSkucmFuZ2UoWzAsIHdpZHRoXSk7DQogICAgICAvLyBsZXQgc2NhdHRlcnlMaW5lYXIgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbeU1heE1pbkRSWzFdLCB5TWF4TWluRFJbMF1dKS5yYW5nZShbMCwgaGVpZ2h0IC8gMl0pOw0KICAgICAgbGV0IGNvbG9yTGlzdCA9IF90aGlzLmF0dHJDb2xvcmxpc3Q7DQogICAgICB2YXIgbm9kZSA9IF90aGlzLnNhbmtleU5vZGVEYXRhDQogICAgICB2YXIgbGsgPSBfdGhpcy5zYW5rZXlMaW5rRGF0YTsNCiAgICAgIGxldCBtYXJnZSA9IF90aGlzLm1hcmdpbjsNCg0KICAgICAgY29uc3Qgbm9kZVNvcnQgPSBmdW5jdGlvbihhLGIpew0KICAgICAgICByZXR1cm4gMDsNCiAgICAgIH0NCg0KICAgICAgdmFyIHNhbmtleSA9IGQzU2Fua2V5LnNhbmtleSgpDQogICAgICAgIC5ub2RlV2lkdGgoNTApLy/mr4/kuKrotYTmupDlnZfnmoTmsLTlubPlg4/ntKDlrr3luqYNCiAgICAgICAgLm5vZGVQYWRkaW5nKDApLy/otYTmupDlnZfpl7TnmoTnurXlkJHpl7Tot50NCiAgICAgICAgLy8gLm5vZGVBbGlnbihkM1NhbmtleS5zYW5rZXlMZWZ0KSANCiAgICAgICAgLm5vZGVTb3J0KG5vZGVTb3J0KQ0KICAgICAgICAuc2l6ZShbd2lkdGgsIGhlaWdodCAqIDAuOTVdKTsNCiAgICAgIGxldCB7IG5vZGVzLCBsaW5rcyB9ID0gc2Fua2V5KHsNCiAgICAgICAgbm9kZXM6IG5vZGUubWFwKGQgPT4gT2JqZWN0LmFzc2lnbih7fSwgZCkpLA0KICAgICAgICBsaW5rczogbGsubWFwKGQgPT4gT2JqZWN0LmFzc2lnbih7fSwgZCkpDQogICAgICAgICAgICB9KTsNCiAgICAgIC8vIHZhciBwYXRoID0gc2Fua2V5LmxpbmsoKTsNCiAgICAgIHZhciBsaW5rID0gc3ZnLmFwcGVuZCgiZyIpLnNlbGVjdEFsbCgiLmxpbmsiKQ0KICAgICAgICAuZGF0YShsaW5rcykNCiAgICAgICAgLmVudGVyKCkuYXBwZW5kKCJwYXRoIikNCiAgICAgICAgLmF0dHIoImNsYXNzIiwgImxpbmsiKQ0KICAgICAgICAuYXR0cigiaWQiLCAic2FuIikNCiAgICAgICAgLmF0dHIoImZpbGwiLCJyZ2JhKDI1NSwgMCwgMCwwKSIpDQogICAgICAgIC5hdHRyKCJzdHJva2UiLCAicmdiYSgxMzIsIDEzMiwgMTMyLDAuMykiKQ0KICAgICAgICAuYXR0cigic3Ryb2tlLXdpZHRoIiwgZCA9PiBkLndpZHRoKQ0KICAgICAgICAuc3R5bGUoIm1peC1ibGVuZC1tb2RlIiwgIm11bHRpcGx5IikNCiAgICAgICAgLmF0dHIoImQiLCBkM1NhbmtleS5zYW5rZXlMaW5rSG9yaXpvbnRhbCgpKS8v6ZO+5o6l55qE6Lev5b6E6K6+572u5bey57uP6KKrc2Fua2V55bCB6KOF5LqG77yM6L+Z6YeM6LCD55So5LmL5ZCO5bCx5Y+v5Lul55Sf5oiQ6L+e57q/5ZGi55qE6Lev5b6EDQogICAgICAgIC8v5LiL6Z2i6L+Z5Y+l55Sf5oiQ57q/55qE5a695bqm77yMLy/nur/nmoTlrr3luqbmjInnhafnur/nq6/ngrnkuKTnq6/lnZfovoPlsI/ogIXmianlrr3vvIzkvYbkuLrllaXlgY/np7ttYXgoMSwgZC5kee+8ie+8nw0KICAgICAgICAvLyAuc3R5bGUoInN0cm9rZS13aWR0aCIsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgIC8vICAgcmV0dXJuIE1hdGgubWF4KDEsIGQuZHkpOw0KICAgICAgICAvLyB9KQ0KICAgICAgICAvLyAuYXR0cigidHJhbnNmb3JtIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuICJ0cmFuc2xhdGUoIiArIG1hcmdlLmxlZnQgKyAiLCIgKyBtYXJnZS50b3AgKyAiKSI7IH0pDQogICAgICAgIC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBiLmR5IC0gYS5keTsgfSk7Ly/ov5nlj6XljrvmjonmlYjmnpzkuIDmoLfkuI3nn6XkuLrllaXvvJ8NCiAgICAgIC8vKDUpc2Fua2V56K6+572u6ZO+5o6l5o+Q56S6DQogICAgICBsaW5rLmFwcGVuZCgidGl0bGUiKQ0KICAgICAgICAudGV4dChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5zb3VyY2UubmFtZSArICIg4oaSICIgKyBkLnRhcmdldC5uYW1lICsgIlxuIiArIGQudmFsdWU7IH0pOw0KDQogICAgICAgIGNvbnN0IGdyYWRpZW50ID0gbGluay5hcHBlbmQoImxpbmVhckdyYWRpZW50IikNCiAgICAgICAgLy8gLmF0dHIoImlkIiwgZCA9PiAoZC51aWQgPSBET00udWlkKCJsaW5rIikpLmlkKQ0KICAgICAgICAuYXR0cigiZ3JhZGllbnRVbml0cyIsICJ1c2VyU3BhY2VPblVzZSIpDQogICAgICAgIC5hdHRyKCJ4MSIsIGQgPT4gZC5zb3VyY2UueDEpDQogICAgICAgIC5hdHRyKCJ4MiIsIGQgPT4gZC50YXJnZXQueDApOw0KICAgIGdyYWRpZW50LmFwcGVuZCgic3RvcCIpDQogICAgICAgIC5hdHRyKCJvZmZzZXQiLCAiMCUiKQ0KICAgICAgICAuYXR0cigic3RvcC1jb2xvciIsIGQgPT4gY29sb3JMaXN0W3BhcnNlSW50KGQuc291cmNlLmNhdGVnb3J5KSVjb2xvckxpc3QubGVuZ3RoXSk7DQogICAgZ3JhZGllbnQuYXBwZW5kKCJzdG9wIikNCiAgICAgICAgLmF0dHIoIm9mZnNldCIsICIxMDAlIikNCiAgICAgICAgLmF0dHIoInN0b3AtY29sb3IiLCBkID0+IGNvbG9yTGlzdFtwYXJzZUludChkLnRhcmdldC5jYXRlZ29yeSklY29sb3JMaXN0Lmxlbmd0aF0pOw0KDQogICAgICAvLyg2KeaLluWKqA0KICAgICAgdmFyIG5vZGUgPSBzdmcuYXBwZW5kKCJnIikuc2VsZWN0QWxsKCIubm9kZSIpDQogICAgICAgIC5kYXRhKG5vZGVzKQ0KICAgICAgICAuZW50ZXIoKS5hcHBlbmQoImciKQ0KICAgICAgICAuYXR0cigiY2xhc3MiLCAibm9kZSIpDQogICAgICAgIC8vIC5hdHRyKCJ0cmFuc2Zvcm0iLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gInRyYW5zbGF0ZSgiICsgZC54ICsgIiwiICsgZC55ICsgIikiOyB9KQ0KDQogICAgICAgIC5jYWxsKGQzLmRyYWcoKQ0KICAgICAgICAgIC5vbigiZHJhZyIsIGRyYWdtb3ZlKSk7DQogICAgICAvLyg3KeWdlw0KICAgICAgbm9kZS5hcHBlbmQoInJlY3QiKQ0KICAgICAgICAuYXR0cigiaWQiLCAic2FuIikNCiAgICAgICAgLmF0dHIoIngiLCBkID0+IGQueDApDQogICAgICAgIC5hdHRyKCJ5IiwgZCA9PiBkLnkwKQ0KICAgICAgICAuYXR0cigiaGVpZ2h0IiwgZCA9PiAoZC55MSAtIGQueTApKQ0KICAgICAgICAuYXR0cigid2lkdGgiLCAoZCkgPT57DQogICAgICAgICAgbGV0IHJlY3RXaWR0aCA9IGQueDEgLSBkLngwOw0KICAgICAgICAgIGlmKGQuaW5kZXg8PTI0KXsNCiAgICAgICAgICAgIGxldCBsYXkgPSAgcGFyc2VJbnQoZC5sYXkpOw0KICAgICAgICAgICByZWN0V2lkdGggKz0gKHJlY3RXaWR0aC8zKSooMS1sYXkpOw0KICAgICAgICAgIH0NCiAgICAgICAgICByZXR1cm4gcmVjdFdpZHRofSkNCiAgICAgICAgLy8gLnRleHQoZCA9PiBgJHtkLm5hbWV9XG4ke2QudmFsdWUudG9Mb2NhbGVTdHJpbmcoKX1gKQ0KICAgICAgICAvLyAuYXR0cigiaGVpZ2h0IiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQuZHk7IH0pDQogICAgICAgIC8vIC5hdHRyKCJ3aWR0aCIsIHNhbmtleS5ub2RlV2lkdGgoKSkvL+WImuaJjeiuvue9rueahOWdl+eahOWuveW6piAgDQogICAgICAgIC8vIC5hdHRyKCJ0cmFuc2Zvcm0iLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gInRyYW5zbGF0ZSgiICsgbWFyZ2UubGVmdCArICIsIiArIG1hcmdlLnRvcCArICIpIjsgfSkNCiAgICAgICAgLnN0eWxlKCJmaWxsIiwgZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICBsZXQgY29sb3JJbmRleCA9cGFyc2VJbnQoZC5pbmRleC0yNSklY29sb3JMaXN0Lmxlbmd0aDsNCiAgICAgICAgICBpZihkLmluZGV4PD0yNCl7DQogICAgICAgICAgICBjb2xvckluZGV4ID0gcGFyc2VJbnQoZC5yb290RmF0aGVySW5kZXgpOw0KICAgICAgICAgIH0NCiAgICAgICAgICAvLyBuYSA9IGQubmFtZS5zdWJzdHIoMCwgZC5uYW1lLmxlbmd0aCAtIDEpDQogICAgICAgICAgLy8gaWYgKG5hID09ICdvcmknKSB7DQogICAgICAgICAgLy8gICByZXR1cm4gbWNvbG9yW3BhcnNlSW50KGQubmFtZS5zdWJzdHIoMykpIC0gMV07DQogICAgICAgICAgLy8gfQ0KICAgICAgICAgIC8vIGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuIGNvbG9yTGlzdFtjb2xvckluZGV4XTsNCiAgICAgICAgICAvLyB9DQogICAgICAgIH0NCiAgICAgICAgKQ0KICAgICAgICAvLyAuc3R5bGUoInN0cm9rZSIsIGZ1bmN0aW9uIChkKSB7IA0KICAgICAgICAvLyAgIGlmKGQuaW5kZXg8PTI0KQ0KICAgICAgICAvLyAgIHJldHVybiBkMy5yZ2IoZC5jb2xvcikuZGFya2VyKDAuMSk7IH0pLy/ovoPmt7ENCiAgICAgICAgLmFwcGVuZCgidGl0bGUiKQ0KICAgICAgICAudGV4dChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5uYW1lICsgIlxuIiArIGQudmFsdWU7IH0pOw0KICAgICAgLy8oOCnmloflrZcNCiAgICAgIG5vZGUuYXBwZW5kKCJ0ZXh0IikNCiAgICAgICAgLmF0dHIoIngiLCBmdW5jdGlvbiAoZCkgeyANCiAgICAgICAgICBsZXQgcmVjdFdpZHRoID0gZC54MSAtIGQueDA7DQogICAgICAgICAgaWYoZC5pbmRleDw9MjQpew0KICAgICAgICAgICAgbGV0IGxheSA9ICBwYXJzZUludChkLmxheSk7DQogICAgICAgICAgIHJlY3RXaWR0aCArPSAocmVjdFdpZHRoLzMpKigxLWxheSk7DQogICAgICAgICAgfQ0KICAgICAgICAgIHJldHVybiBkLngwK3JlY3RXaWR0aDsgfSkNCiAgICAgICAgLmF0dHIoInkiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC55MCsoZC55MSAtIGQueTApLzI7IH0pDQogICAgICAgIC5hdHRyKCJkeSIsICIuMzVlbSIpDQogICAgICAgIC5hdHRyKCJpZCIsICJzYW4iKQ0KICAgICAgICAuYXR0cigidGV4dC1hbmNob3IiLCAiZW5kIikvL+aWh+Wtl+WcqOW3pui+ue+8iOS4rei9tOWPs+i+ueeahO+8iQ0KICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgbnVsbCkNCiAgICAgICAgLnRleHQoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQubmFtZTsgfSkNCiAgICAgICAgLy8gLmZpbHRlcihmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC54IDwgd2lkdGggLyAyOyB9KS8v6Zmk5Y675Zyo5Lit6L205bem6L6555qEIA0KICAgICAgICAvLyAuYXR0cigieCIsIDYgKyBzYW5rZXkubm9kZVdpZHRoKCkpDQogICAgICAgIC5hdHRyKCJ0ZXh0LWFuY2hvciIsICJzdGFydCIpLy/mloflrZflnKjlj7PovrkNCiAgICAgICAgLy8gLmF0dHIoInRyYW5zZm9ybSIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiAidHJhbnNsYXRlKCIgKyBtYXJnZS5sZWZ0ICsgIiwiICsgbWFyZ2UudG9wICsgIikiOyB9KQ0KICAgICAgLy8gKDkp5ouW5YqoDQogICAgICBmdW5jdGlvbiBkcmFnbW92ZShkKSB7DQogICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgKyBkLnggKyAiLCIgKw0KICAgICAgICAgIChkLnkgPSAvL+S4i+mdoueahOe6teWdkOagh+iwg+aVtOWAvOaYr+aAjuS5iOiuoeeul+eahO+8nw0KICAgICAgICAgICAgTWF0aC5tYXgoMCwNCiAgICAgICAgICAgICAgTWF0aC5taW4oDQogICAgICAgICAgICAgICAgaGVpZ2h0IC0gZC5keSwNCiAgICAgICAgICAgICAgICBkMy5ldmVudC55DQogICAgICAgICAgICAgICkpKSArICIpIik7DQogICAgICAgIHNhbmtleS5yZWxheW91dCgpOy8v6YeN5paw5biD5bGALOe6v+S4iuS4i+eahOS9jee9ruiwg+aVtA0KICAgICAgICBsaW5rLmF0dHIoImQiLCBwYXRoKTsvL+abtOaWsOi3r+W+hA0KICAgICAgfQ0KDQoNCg0KICAgIH0sDQogICAgdXBkYXRhQWxsKCkgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCiAgICAgIGxldCBtYXJnaW4gPSBfdGhpcy5tYXJnaW4NCiAgICAgIGxldCB3aWR0aCA9IF90aGlzLiRyZWZzLnByb0NvblNhbmtleURpdi5vZmZzZXRXaWR0aCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0Ow0KICAgICAgbGV0IGhlaWdodCA9IF90aGlzLiRyZWZzLnByb0NvblNhbmtleURpdi5vZmZzZXRIZWlnaHQgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTsNCiAgICAgIF90aGlzLndpZHRoID0gd2lkdGg7DQogICAgICBfdGhpcy5oZWlnaHQgPSBoZWlnaHQ7DQogICAgICBkMy5zZWxlY3QoIiNwcm9Db25TYW5rZXlDYW50YWluIikuc2VsZWN0KCJzdmciKS5yZW1vdmUoKQ0KICAgICAgdmFyIHN2ZyA9IGQzLnNlbGVjdCgiI3Byb0NvblNhbmtleUNhbnRhaW4iKS5hcHBlbmQoInN2ZyIpDQogICAgICAgIC5hdHRyKCJ3aWR0aCIsIHdpZHRoIC0gMCkNCiAgICAgICAgLmF0dHIoImhlaWdodCIsIGhlaWdodCAtIDApDQogICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDAsMCknKQ0KICAgICAgICAuc3R5bGUoInBvc2l0aW9uIiwgImFic29sdXRlIik7DQoNCiAgICAgIGxldCBlbnRHID0gc3ZnLmFwcGVuZCgiZyIpLmF0dHIoImlkIiwgImVudEciKS5hdHRyKCJ3aWR0aCIsIHdpZHRoKS5hdHRyKCJoZWlnaHQiLCBoZWlnaHQpOw0KICAgICAgbGV0IHNvbkcgPSBzdmcuYXBwZW5kKCJnIikuYXR0cigiaWQiLCAic29uRyIpLmF0dHIoIndpZHRoIiwgd2lkdGgpLmF0dHIoImhlaWdodCIsIGhlaWdodCk7DQogICAgICBfdGhpcy5yb290U3ZnID0gc3ZnOw0KICAgICAgX3RoaXMuZHJhd1Byb0NvblNhbmtleShzdmcpOw0KICAgICAgLy8gfSk7DQogICAgfSwNCiAgICBjbGlja19FbnQodGltZSkgew0KICAgICAgdGhpcy4kZW1pdCgidGltZUR1ciIsIHRpbWUpOw0KICAgIH0sDQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdmFyIF90aGlzID0gdGhpczsNCiAgICBsZXQgbWFyZ2luID0gX3RoaXMubWFyZ2luDQogICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgIH0pOw0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIGNvbnN0IF90aGlzID0gdGhpczsNCiAgICBkMy5zZWxlY3QoIi5zY2F0dGVyVG9vbHRpcCIpLmNsYXNzZWQoImhpZGRlbiIsIHRydWUpOw0KICAgIGQzLnNlbGVjdCgiLmNoYXJ0VG9vbHRpcCIpLmNsYXNzZWQoImhpZGRlbiIsIHRydWUpOw0KICAgIHRoaXMuJGJ1cy4kb24oJ0NvbmNlcHRUcmVlJywgKHZhbCkgPT4gew0KICAgICAgX3RoaXMuY29uY2VwdFRyZWUgPSB2YWw7DQogICAgfSk7DQogICAgdGhpcy4kYnVzLiRvbignYWxsUHJvYmxlbXMnLCAodmFsKSA9PiB7DQogICAgICBfdGhpcy5hbGxQcm9ibGVtcyA9IHZhbDsNCiAgICB9KTsNCiAgICB0aGlzLiRidXMuJG9uKCdhbGxDb25jZXB0cycsICh2YWwpID0+IHsNCiAgICAgIF90aGlzLmFsbENvbmNlcHRzID0gdmFsOw0KICAgICAgX3RoaXMuZ2V0QWxsU2Fua2V5RGF0YSgpOw0KICAgICAgX3RoaXMudXBkYXRhQWxsKCk7DQogICAgfSk7DQogICAgdGhpcy4kYnVzLiRvbignQ29uY2VwdE9yaScsICh2YWwpID0+IHsNCiAgICAgIF90aGlzLkNvbmNlcHRPcmkgPSB2YWw7DQogICAgfSk7DQogICAgdGhpcy4kYnVzLiRvbignYXR0ckNvbG9ybGlzdCcsICh2YWwpID0+IHsNCiAgICAgIF90aGlzLmF0dHJDb2xvcmxpc3QgPSB2YWw7DQogICAgfSk7DQogICAgdGhpcy4kYnVzLiRvbignY3VyUGFwZXJTYW5rZXlEYXRhJywgKHZhbCkgPT4gew0KICAgICAgY29uc29sZS5sb2coImN1clBhcGVyU2Fua2V5RGF0YSIsdmFsKQ0KICAgICAgX3RoaXMuY3VyUGFwZXJTYW5rZXlEYXRhID0gdmFsWzBdLmxpbms7DQogICAgICBfdGhpcy5zYW5rZXlMaW5rRGF0YSA9IF90aGlzLmN1clBhcGVyU2Fua2V5RGF0YTsNCiAgICAgIF90aGlzLnVwZGF0YUFsbCgpOw0KICAgIH0pOw0KDQogICAgLy8gdGhpcy4kcmVmcy5tb3ZlcHJvQ29uU2Fua2V5TGVmdC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLCBfdGhpcy5tb3ZlcHJvQ29uU2Fua2V5TGVmdCk7IC8vIOebkeWQrOeCueWHu+S6i+S7tg0KDQogIH0sDQogIGJlZm9yZURlc3Ryb3koKSB7DQogICAgY2xlYXJJbnRlcnZhbCh0aGlzLm1vdmVUaW1lcik7DQogIH0sDQp9IA0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/proConSankey","sourcesContent":["<!-- eslint-disable no-unused-vars -->\r\n<!-- eslint-disable no-unused-vars -->\r\n\r\n<template>\r\n  <div class=\"proConSankey\" ref=\"proConSankeyDiv\">\r\n    <div class=\"panelHead\"></div>\r\n    <div id=\"proConSankeyCantain\" class=\"panelBody\" ref=\"proConSankeyCantain\">\r\n    </div>\r\n\r\n    <!-- <div class=\"close\" ref=\"listen\">\r\n    </div> -->\r\n    <!-- <el-button type=\"primary\" @click=\"onSubmit\">Create</el-button> -->\r\n    <!-- <div class=\"proConSankeyTooltip toolTip\">\r\n      <p>\r\n        <br /><strong class=\"name toolTipAttr\"></strong>\r\n        <br /><strong class=\"text toolTipAttr\"></strong>\r\n        <br /><strong class=\"attr0 toolTipAttr\"></strong>\r\n        <br /><strong class=\"attr1 toolTipAttr\"></strong>\r\n        <br /><strong class=\"attr2 toolTipAttr\"></strong>\r\n        <br /><strong class=\"attr3 toolTipAttr\"></strong>\r\n        <br /><strong class=\"attr4 toolTipAttr\"></strong>\r\n      </p>\r\n    </div> -->\r\n  </div>\r\n</div></template>\r\n<script>\r\n// import { param } from 'server/api';\r\nimport * as d3 from 'd3'\r\nimport * as d3Sankey from 'd3-sankey'\r\nimport { onMounted, ref } from 'vue';\r\nimport filenames from \"@/utils/fileName\";\r\nimport domtoimage from 'dom-to-image';\r\n// import TestJson from \"@/assets/json/case2_fin.json\";\r\n// import TestRelJson from \"@/assets/json/case2_fin_rel.json\";\r\nimport Circle from '@/utils/geometry/circle';\r\nimport tools from \"@/utils/tools.js\";\r\n// import \"@/utils/sankey.js\";\r\nimport drawTools from \"@/utils/drawingTools.js\";\r\n\r\nexport default {\r\n  props: [\"toolsState\"],\r\n  data() {\r\n    return {\r\n      proName: '',\r\n      ConceptOri:'',\r\n      sankeyNodeData:'',\r\n      sankeyLinkData:'',\r\n      curPaperSankeyData:\"\",\r\n      sankeyData: '',\r\n      allProblems: '',\r\n      allConcepts: '',\r\n      allProInConGPTSankeyData: '',\r\n      allproConSankeyData: '',\r\n      proType: \"\",\r\n      select: '',\r\n      proForm: {\r\n        name: \"\",\r\n        type: \"\",\r\n        content: \"\"\r\n      },\r\n      attrColorlist: [],\r\n      rootSvg: '',\r\n      width: 0,\r\n      height: 0,\r\n      thisId: 10,\r\n      margin: { top: 5, right: 5, bottom: 5, left: 5 },\r\n    };\r\n  },\r\n\r\n  watch: {\r\n    type(val) {\r\n    },\r\n    toolAddRel(val) {\r\n    },\r\n    toolsState: {\r\n      deep: true,\r\n      handler(val) {\r\n        console.log(val)\r\n        this.toolAddRel = val['addRel'];\r\n        this.toolAddRelMain = val['addRelMain'];\r\n        this.toolDelRel = val['delRel'];\r\n      }\r\n    },\r\n    // sankeyData: {\r\n    //   deep: true,\r\n    //   handler(val) {\r\n    //     console.log(val)\r\n    //     this.updataAll();\r\n    //   }\r\n    // },\r\n    sankeyNodeData(){\r\n      \r\n        this.updataAll();\r\n    }\r\n  },\r\n  methods: {\r\n    getAllSankeyData() {\r\n      const _this = this;\r\n    //   _this.sankeyData ={\r\n    //     \"nodes\": [\r\n    //       { \"name\": \"A\" },\r\n    //       { \"name\": \"B\" },\r\n    //       { \"name\": \"C\" },\r\n    //       { \"name\": \"D\" },\r\n    //       ],\r\n    //   \"links\": [\r\n    //     {'source':0,'target':2,'value':\"110\"},\r\n    //     {'source':0,'target':3,'value':\"5\"},\r\n    //     {'source':1,'target':2,'value':\"4\"},\r\n    //     {'source':1,'target':3,'value':\"2\"},\r\n\r\n    //   ]\r\n    // }\r\n      this.$http\r\n        .get(\"/api/sankeyData\", { params: {} }, {})\r\n        .then((response) => {\r\n          _this.sankeyLinkData = response.body;\r\n          _this.getAllSankeyNodeData();\r\n        });\r\n      // this.$http\r\n      //   .get(\"/api/concept/allproConSankeyData\", { params: {} }, {})\r\n      //   .then((response) => {\r\n      //     _this.allproConSankeyData = response.body;\r\n      //     console.log(\"allproConSankeyData\",response.body);\r\n      //     // _this.allRelationships = response.body;\r\n      //     // _this.drawnetPData();\r\n      //   });\r\n    },\r\n    \r\n    getAllSankeyNodeData() {\r\n      const _this = this;\r\n      let nodes = [];\r\n      let conOri = _this.ConceptOri;\r\n      let sankeyLinkData = _this.sankeyLinkData;\r\n      let j = 0;\r\n      let max = 0;\r\n      for(let i=0;i<conOri.length;i++){\r\n        nodes.push(conOri[i]);\r\n        j++;\r\n      }\r\n      for(let i=0;i<sankeyLinkData.length;i++){\r\n        let target = sankeyLinkData[i]['target'];\r\n        if(target>max){max=target;}\r\n      }\r\n      let i=0;\r\n      console.log(conOri, 2131313,j,max,nodes)\r\n      while(j<=max){\r\n        nodes.push({\"name\":`con${i}`});\r\n        i++;\r\n        j++\r\n      }\r\n      _this.sankeyNodeData = nodes;\r\n\r\n    },\r\n    drawProConSankey(svg) {\r\n      const _this = this;\r\n      const margin = _this.margin;\r\n      let psvg = svg\r\n      let width = psvg.attr(\"width\");\r\n      let height = psvg.attr(\"height\");\r\n      psvg.select(\"#netPG\").remove();\r\n      // let prog = psvg.append(\"g\").attr(\"id\", \"netPG\").attr(\"width\", width).attr(\"height\", height);\r\n      let groups = svg.append(\"g\").attr(\"id\", \"proConSankeyGroups\").attr(\"width\", width).attr(\"height\", height)\r\n      // .attr(\"transform\", \"translate(\" + graphGTransformX + ',' + graphGTransformY + \") scale(\" + graphGTransformK + \")\");\r\n      // this.groupsSvg = groups;\r\n\r\n      let backG = groups.append(\"g\").attr(\"id\", \"proConSankeybackG\").attr(\"width\", width).attr(\"height\", height);\r\n      let arcG = groups.append(\"g\").attr(\"id\", \"proConSankeyarcG\").attr(\"width\", width).attr(\"height\", height);\r\n      let relG = groups.append(\"g\").attr(\"id\", \"proConSankeyrelG\").attr(\"width\", width).attr(\"height\", height);\r\n      let entG = groups.append(\"g\").attr(\"id\", \"proConSankeyentG\").attr(\"width\", width).attr(\"height\", height);\r\n      let frontG = groups.append(\"g\").attr(\"id\", \"proConSankeyfrontG\").attr(\"width\", width).attr(\"height\", height);\r\n\r\n      // let scatterData = _this.scatterData;\r\n      // let xMaxMinDR = tools.getMaxMin(scatterData, 'x');\r\n      // let yMaxMinDR = tools.getMaxMin(scatterData, 'y');\r\n      // let scatterxLinear = d3.scaleLinear().domain([xMaxMinDR[1], xMaxMinDR[0]]).range([0, width]);\r\n      // let scatteryLinear = d3.scaleLinear().domain([yMaxMinDR[1], yMaxMinDR[0]]).range([0, height / 2]);\r\n      let colorList = _this.attrColorlist;\r\n      var node = _this.sankeyNodeData\r\n      var lk = _this.sankeyLinkData;\r\n      let marge = _this.margin;\r\n\r\n      const nodeSort = function(a,b){\r\n        return 0;\r\n      }\r\n\r\n      var sankey = d3Sankey.sankey()\r\n        .nodeWidth(50)//每个资源块的水平像素宽度\r\n        .nodePadding(0)//资源块间的纵向间距\r\n        // .nodeAlign(d3Sankey.sankeyLeft) \r\n        .nodeSort(nodeSort)\r\n        .size([width, height * 0.95]);\r\n      let { nodes, links } = sankey({\r\n        nodes: node.map(d => Object.assign({}, d)),\r\n        links: lk.map(d => Object.assign({}, d))\r\n            });\r\n      // var path = sankey.link();\r\n      var link = svg.append(\"g\").selectAll(\".link\")\r\n        .data(links)\r\n        .enter().append(\"path\")\r\n        .attr(\"class\", \"link\")\r\n        .attr(\"id\", \"san\")\r\n        .attr(\"fill\",\"rgba(255, 0, 0,0)\")\r\n        .attr(\"stroke\", \"rgba(132, 132, 132,0.3)\")\r\n        .attr(\"stroke-width\", d => d.width)\r\n        .style(\"mix-blend-mode\", \"multiply\")\r\n        .attr(\"d\", d3Sankey.sankeyLinkHorizontal())//链接的路径设置已经被sankey封装了，这里调用之后就可以生成连线呢的路径\r\n        //下面这句生成线的宽度，//线的宽度按照线端点两端块较小者扩宽，但为啥偏移max(1, d.dy）？\r\n        // .style(\"stroke-width\", function (d) {\r\n        //   return Math.max(1, d.dy);\r\n        // })\r\n        // .attr(\"transform\", function (d) { return \"translate(\" + marge.left + \",\" + marge.top + \")\"; })\r\n        .sort(function (a, b) { return b.dy - a.dy; });//这句去掉效果一样不知为啥？\r\n      //(5)sankey设置链接提示\r\n      link.append(\"title\")\r\n        .text(function (d) { return d.source.name + \" → \" + d.target.name + \"\\n\" + d.value; });\r\n\r\n        const gradient = link.append(\"linearGradient\")\r\n        // .attr(\"id\", d => (d.uid = DOM.uid(\"link\")).id)\r\n        .attr(\"gradientUnits\", \"userSpaceOnUse\")\r\n        .attr(\"x1\", d => d.source.x1)\r\n        .attr(\"x2\", d => d.target.x0);\r\n    gradient.append(\"stop\")\r\n        .attr(\"offset\", \"0%\")\r\n        .attr(\"stop-color\", d => colorList[parseInt(d.source.category)%colorList.length]);\r\n    gradient.append(\"stop\")\r\n        .attr(\"offset\", \"100%\")\r\n        .attr(\"stop-color\", d => colorList[parseInt(d.target.category)%colorList.length]);\r\n\r\n      //(6)拖动\r\n      var node = svg.append(\"g\").selectAll(\".node\")\r\n        .data(nodes)\r\n        .enter().append(\"g\")\r\n        .attr(\"class\", \"node\")\r\n        // .attr(\"transform\", function (d) { return \"translate(\" + d.x + \",\" + d.y + \")\"; })\r\n\r\n        .call(d3.drag()\r\n          .on(\"drag\", dragmove));\r\n      //(7)块\r\n      node.append(\"rect\")\r\n        .attr(\"id\", \"san\")\r\n        .attr(\"x\", d => d.x0)\r\n        .attr(\"y\", d => d.y0)\r\n        .attr(\"height\", d => (d.y1 - d.y0))\r\n        .attr(\"width\", (d) =>{\r\n          let rectWidth = d.x1 - d.x0;\r\n          if(d.index<=24){\r\n            let lay =  parseInt(d.lay);\r\n           rectWidth += (rectWidth/3)*(1-lay);\r\n          }\r\n          return rectWidth})\r\n        // .text(d => `${d.name}\\n${d.value.toLocaleString()}`)\r\n        // .attr(\"height\", function (d) { return d.dy; })\r\n        // .attr(\"width\", sankey.nodeWidth())//刚才设置的块的宽度  \r\n        // .attr(\"transform\", function (d) { return \"translate(\" + marge.left + \",\" + marge.top + \")\"; })\r\n        .style(\"fill\", function (d) {\r\n          let colorIndex =parseInt(d.index-25)%colorList.length;\r\n          if(d.index<=24){\r\n            colorIndex = parseInt(d.rootFatherIndex);\r\n          }\r\n          // na = d.name.substr(0, d.name.length - 1)\r\n          // if (na == 'ori') {\r\n          //   return mcolor[parseInt(d.name.substr(3)) - 1];\r\n          // }\r\n          // else {\r\n            return colorList[colorIndex];\r\n          // }\r\n        }\r\n        )\r\n        // .style(\"stroke\", function (d) { \r\n        //   if(d.index<=24)\r\n        //   return d3.rgb(d.color).darker(0.1); })//较深\r\n        .append(\"title\")\r\n        .text(function (d) { return d.name + \"\\n\" + d.value; });\r\n      //(8)文字\r\n      node.append(\"text\")\r\n        .attr(\"x\", function (d) { \r\n          let rectWidth = d.x1 - d.x0;\r\n          if(d.index<=24){\r\n            let lay =  parseInt(d.lay);\r\n           rectWidth += (rectWidth/3)*(1-lay);\r\n          }\r\n          return d.x0+rectWidth; })\r\n        .attr(\"y\", function (d) { return d.y0+(d.y1 - d.y0)/2; })\r\n        .attr(\"dy\", \".35em\")\r\n        .attr(\"id\", \"san\")\r\n        .attr(\"text-anchor\", \"end\")//文字在左边（中轴右边的）\r\n        .attr(\"transform\", null)\r\n        .text(function (d) { return d.name; })\r\n        // .filter(function (d) { return d.x < width / 2; })//除去在中轴左边的 \r\n        // .attr(\"x\", 6 + sankey.nodeWidth())\r\n        .attr(\"text-anchor\", \"start\")//文字在右边\r\n        // .attr(\"transform\", function (d) { return \"translate(\" + marge.left + \",\" + marge.top + \")\"; })\r\n      // (9)拖动\r\n      function dragmove(d) {\r\n        d3.select(this).attr(\"transform\", \"translate(\" + d.x + \",\" +\r\n          (d.y = //下面的纵坐标调整值是怎么计算的？\r\n            Math.max(0,\r\n              Math.min(\r\n                height - d.dy,\r\n                d3.event.y\r\n              ))) + \")\");\r\n        sankey.relayout();//重新布局,线上下的位置调整\r\n        link.attr(\"d\", path);//更新路径\r\n      }\r\n\r\n\r\n\r\n    },\r\n    updataAll() {\r\n      var _this = this;\r\n      let margin = _this.margin\r\n      let width = _this.$refs.proConSankeyDiv.offsetWidth - margin.left - margin.right;\r\n      let height = _this.$refs.proConSankeyDiv.offsetHeight - margin.top - margin.bottom;\r\n      _this.width = width;\r\n      _this.height = height;\r\n      d3.select(\"#proConSankeyCantain\").select(\"svg\").remove()\r\n      var svg = d3.select(\"#proConSankeyCantain\").append(\"svg\")\r\n        .attr(\"width\", width - 0)\r\n        .attr(\"height\", height - 0)\r\n        .attr('transform', 'translate(0,0)')\r\n        .style(\"position\", \"absolute\");\r\n\r\n      let entG = svg.append(\"g\").attr(\"id\", \"entG\").attr(\"width\", width).attr(\"height\", height);\r\n      let sonG = svg.append(\"g\").attr(\"id\", \"sonG\").attr(\"width\", width).attr(\"height\", height);\r\n      _this.rootSvg = svg;\r\n      _this.drawProConSankey(svg);\r\n      // });\r\n    },\r\n    click_Ent(time) {\r\n      this.$emit(\"timeDur\", time);\r\n    },\r\n  },\r\n  created() {\r\n    var _this = this;\r\n    let margin = _this.margin\r\n    this.$nextTick(() => {\r\n    });\r\n  },\r\n  mounted() {\r\n    const _this = this;\r\n    d3.select(\".scatterTooltip\").classed(\"hidden\", true);\r\n    d3.select(\".chartTooltip\").classed(\"hidden\", true);\r\n    this.$bus.$on('ConceptTree', (val) => {\r\n      _this.conceptTree = val;\r\n    });\r\n    this.$bus.$on('allProblems', (val) => {\r\n      _this.allProblems = val;\r\n    });\r\n    this.$bus.$on('allConcepts', (val) => {\r\n      _this.allConcepts = val;\r\n      _this.getAllSankeyData();\r\n      _this.updataAll();\r\n    });\r\n    this.$bus.$on('ConceptOri', (val) => {\r\n      _this.ConceptOri = val;\r\n    });\r\n    this.$bus.$on('attrColorlist', (val) => {\r\n      _this.attrColorlist = val;\r\n    });\r\n    this.$bus.$on('curPaperSankeyData', (val) => {\r\n      console.log(\"curPaperSankeyData\",val)\r\n      _this.curPaperSankeyData = val[0].link;\r\n      _this.sankeyLinkData = _this.curPaperSankeyData;\r\n      _this.updataAll();\r\n    });\r\n\r\n    // this.$refs.moveproConSankeyLeft.addEventListener(\"mouseover\", _this.moveproConSankeyLeft); // 监听点击事件\r\n\r\n  },\r\n  beforeDestroy() {\r\n    clearInterval(this.moveTimer);\r\n  },\r\n} \r\n</script>\r\n\r\n<style>\r\n@import './index.css';\r\n</style>\r\n"]}]}